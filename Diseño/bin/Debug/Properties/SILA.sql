----╔══════════════════════════════════════════════════════════════════╗----
----║ӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁ║----
----║Ӂ♦▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼♦Ӂ║----
----║Ӂ►<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>◄Ӂ║----
----║Ӂ►<<<<<<<< BASE DE DATOS PARA EL CLUB DE TAEKWONDO SILA >>>>>>>>◄Ӂ║----
----║Ӂ►<<<<<<<<<<<<<< CÓDIGO HECHO POR JHONATAN TORRES >>>>>>>>>>>>>>◄Ӂ║----
----║Ӂ►<<<<<<<<<<<<<<<<<< JTORRES802@MISENA.EDU.CO >>>>>>>>>>>>>>>>>>◄Ӂ║----
----║Ӂ►<<<<<<<<<<<< SERVICIO NACIONAL DE APRENDIZAJE SENA >>>>>>>>>>>◄Ӂ║----
----║Ӂ►<<<<<<<<<<<<<<<<<<<< COPYRIGHT® 2016-2030 >>>>>>>>>>>>>>>>>>>>◄Ӂ║----
----║Ӂ►<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>◄Ӂ║----
----║Ӂ♦▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲♦Ӂ║----
----║ӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁӁ║----
----╚══════════════════════════════════════════════════════════════════╝----'



----╔══════════════════════════════════════════════════════════════════╗----
----║▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼║----
----║►►►►►►►►►►►►►►►► USANDO BASE DE DATOS DEL SISTEMA ◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----'
								USE master;
									GO
----║►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----
----║▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲║----
----╚══════════════════════════════════════════════════════════════════╝----



----╔══════════════════════════════════════════════════════════════════╗----
----║▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼║----
----║►►►►►►►►►►►►►►►►►►►►►► CREANDO BASE DE DATOS ◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----'
BEGIN
	SET NOCOUNT ON
	DECLARE @DBName varchar(50)
	DECLARE @spidstr varchar(8000)
	DECLARE @ConnKilled smallint
	SET @ConnKilled=0
	SET @spidstr = ''
	Set @DBName = 'SILA'

	IF db_id(@DBName) < 4
	BEGIN
		PRINT 'Connections to system databases cannot be killed'
		RETURN
	END

	SELECT @spidstr=coalesce(@spidstr,',' )+'kill '+convert(varchar, spid)+ '; '
		FROM master..sysprocesses WHERE dbid=db_id(@DBName)
 
	IF LEN(@spidstr) > 0
	BEGIN
		EXEC(@spidstr)
		SELECT @ConnKilled = COUNT(1)
		FROM master..sysprocesses WHERE dbid=db_id(@DBName)
	END
END

BEGIN
			IF EXISTS(SELECT * FROM SYS.databases WHERE NAME = 'SILA')
							DROP DATABASE SILA;
END
									GO
									
							CREATE DATABASE SILA;
									GO
----║►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----
----║▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲║----
----╚══════════════════════════════════════════════════════════════════╝----



----╔══════════════════════════════════════════════════════════════════╗----
----║▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼║----
----║►►►►►►►►►►►►►►►►►►►►►► USANDO BASE DE DATOS ◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----'
								USE SILA;
									GO
----║►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----
----║▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲║----
----╚══════════════════════════════════════════════════════════════════╝----



----╔══════════════════════════════════════════════════════════════════╗----
----║▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼║----
----║►►►►►►►►►►►►►►►►►►► PROCEDIMIENTOS ALMACENADOS ◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----
----║►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----'
----║►►►►►►►►►►►►►►►►►►►►►►►►►►►►►► CREAR ◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----
CREATE PROC CREAR_TABLAS
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 01----
CREATE TABLE PROGRAM
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_PR BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_CUENTA BIGINT NULL,
	FORMULARIO BIGINT NULL,
	SONIDO VARCHAR(50) NULL,
	FMR_ANTERIOR BIGINT NULL,
	FMR_INICIO BIGINT NULL,
	CHECK (ID_PR < 2)
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 02----
CREATE TABLE OBJETO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_OBJETO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_OBJETO VARCHAR(50) UNIQUE NOT NULL,
	DESCRIPCION_OBJETO VARCHAR(MAX)NOT NULL,
	VALOR_APROXIMADO_OBJETO MONEY NOT NULL,
	FECHA_REGISTRO_OBJETO DATE DEFAULT GETDATE() NOT NULL,
	IMAGEN_OBJETO IMAGE NULL,
	ESTADO VARCHAR(15) DEFAULT 'ACTIVADO' NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (ESTADO = 'ACTIVADO' OR ESTADO = 'DESACTIVADO'),
	CHECK (FECHA_REGISTRO_OBJETO <= GETDATE())
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 03----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 04----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 05----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 06----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 07----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 08----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 09----
CREATE TABLE TIPO_CUENTA
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_TIPO_CUENTA BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	PERMISOS_TIPO_CUENTA VARCHAR(50) NOT NULL,
	NOMBRE_TIPO_CUENTA VARCHAR(50) UNIQUE NOT NULL,
	LIMITE_USUARIOS BIGINT  DEFAULT 1000,
	ESTADO VARCHAR(15) DEFAULT 'ACTIVADO' NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (ESTADO = 'ACTIVADO' OR ESTADO = 'DESACTIVADO')

);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 10----
CREATE TABLE SEDE
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_SEDE BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_SEDE VARCHAR(50) UNIQUE NOT NULL,
	PAIS_SEDE VARCHAR(50)  DEFAULT 'COLOMBIA',
	DEPARTAMENTO_SEDE VARCHAR(50) DEFAULT 'CUNDINAMARCA',
	MUNICIPIO_SEDE VARCHAR(50) DEFAULT 'BOGOTÁ',
	DIRECCION_SEDE VARCHAR(50) NOT NULL,
	FECHA_FUNDACION_SEDE DATE  DEFAULT GETDATE(),
	IMAGEN_SEDE IMAGE NULL,
	ESTADO VARCHAR(15) DEFAULT 'ACTIVADO' NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_FUNDACION_SEDE <= GETDATE()),
	CHECK (ESTADO = 'ACTIVADO' OR ESTADO = 'DESACTIVADO')
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 11----
CREATE TABLE INVENTARIO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_INVENTARIO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_SEDE BIGINT  REFERENCES SEDE(ID_SEDE) ON DELETE CASCADE DEFAULT 1,
	ID_OBJETO BIGINT REFERENCES OBJETO(ID_OBJETO) ON DELETE CASCADE NOT NULL,
	CANTIDAD_OBJETO_SEDE INT NOT NULL,
	FECHA_ACTUALIZACION_INVENTARIO DATE DEFAULT GETDATE(),
	ESTADO VARCHAR(15) DEFAULT 'ACTIVADO' NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_ACTUALIZACION_INVENTARIO <= GETDATE()),
	CHECK (ESTADO = 'ACTIVADO' OR ESTADO = 'DESACTIVADO')
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 12----
CREATE TABLE DATOS_CONTACTO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_DATOS_CONTACTO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_SEDE BIGINT REFERENCES SEDE(ID_SEDE) ON DELETE CASCADE DEFAULT 1,
	EPS VARCHAR(50) NOT NULL,
	DIRECCION_RESIDENCIA VARCHAR(50) NULL,
	CELULAR VARCHAR(10) NULL,
	TELEFONO_FIJO VARCHAR(7) NULL,
	ESTADO VARCHAR(15) DEFAULT 'ACTIVADO' NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (ESTADO = 'ACTIVADO' OR ESTADO = 'DESACTIVADO')
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 13----
CREATE TABLE DATOS_PROGRAMADOR
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_DATOS_PROGRAMADOR BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	CODIGO_PROGRAMADOR VARCHAR(50) UNIQUE NOT NULL,
	CONTRASEÑA_PROGRAMADOR_1 VARCHAR(50) UNIQUE NOT NULL,
	CONTRASEÑA_PROGRAMADOR_2 VARCHAR(50) UNIQUE NOT NULL,
	CODIGO_DESBLOQUEO VARCHAR(50) UNIQUE NOT NULL,
	NUMERO_ACTIVACION INT UNIQUE NOT NULL
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 14----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 15----
CREATE TABLE DATOS_ENTRENADOR
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_DATOS_ENTRENADOR BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ESTADO_ENTRENADOR VARCHAR(50) DEFAULT 'DISPONOBLE',
	GRADO_DAN_ENTRENADOR INT DEFAULT 1,
	DESCRIPCION_ESTUDIO_ENTRENADOR VARCHAR(MAX) NULL,
	SUELDO_ENTRENADOR MONEY NOT NULL,
	HOJA_DE_VIDA_ENTRENADOR IMAGE NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (GRADO_DAN_ENTRENADOR <= 9 AND GRADO_DAN_ENTRENADOR >= 0)
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 16----
CREATE TABLE TEMA_PREGUNTA
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_TEMA_PREGUNTA BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_TEMA_PREGUNTA VARCHAR(50) UNIQUE NOT NULL,
	EDAD_MINIMA_TEMA_PREGUNTA INT  DEFAULT 0,
	EDAD_MAXIMA_TEMA_PREGUNTA INT  DEFAULT 100,
	ESTADO VARCHAR(15) DEFAULT 'ACTIVADO' NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (EDAD_MINIMA_TEMA_PREGUNTA < EDAD_MAXIMA_TEMA_PREGUNTA AND EDAD_MINIMA_TEMA_PREGUNTA>=0 AND EDAD_MAXIMA_TEMA_PREGUNTA<=100),
	CHECK (EDAD_MINIMA_TEMA_PREGUNTA <= 25 AND EDAD_MINIMA_TEMA_PREGUNTA >= 0),
	CHECK (ESTADO = 'ACTIVADO' OR ESTADO = 'DESACTIVADO')
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 17----
CREATE TABLE PREGUNTA_SEGURIDAD
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_PREGUNTA_SEGURIDAD BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_TEMA_PREGUNTA BIGINT REFERENCES TEMA_PREGUNTA(ID_TEMA_PREGUNTA) ON DELETE CASCADE NOT NULL,
	PREGUNTA VARCHAR(MAX) NOT NULL,
	ESTADO VARCHAR(15) DEFAULT 'ACTIVADO' NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (ESTADO = 'ACTIVADO' OR ESTADO = 'DESACTIVADO')
	
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 18----
CREATE TABLE DATOS_SEGURIDAD
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_DATOS_SEGURIDAD BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_PREGUNTA_SEGURIDAD BIGINT REFERENCES PREGUNTA_SEGURIDAD(ID_PREGUNTA_SEGURIDAD) ON DELETE NO ACTION NOT NULL,
	RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX) NULL,
	FECHA_ULTIMO_CIERRE_SESION DATE  DEFAULT GETDATE(),
	FECHA_ULTIMO_CAMBIO_CONTRASEÑA DATE DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_ULTIMO_CIERRE_SESION <= GETDATE()),
	CHECK (FECHA_ULTIMO_CAMBIO_CONTRASEÑA <= GETDATE())
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 19----
CREATE TABLE CARGO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CARGO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_CARGO VARCHAR(50) UNIQUE NOT NULL,
	FUNCION_CARGO VARCHAR(MAX) NOT NULL,
	FECHA_INICIO_CARGO DATE NULL,
	FECHA_REELECCION_CARGO DATE NULL,
	ESTADO VARCHAR(15) DEFAULT 'ACTIVADO' NOT NULL,
	
	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_REELECCION_CARGO > GETDATE()),
	CHECK (FECHA_INICIO_CARGO < GETDATE()),
	CHECK (ESTADO = 'ACTIVADO' OR ESTADO = 'DESACTIVADO')
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 20----
CREATE TABLE DATOS_ADMINISTRADOR
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_DATOS_ADMINISTRADOR BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_CARGO BIGINT REFERENCES CARGO(ID_CARGO) ON DELETE NO ACTION NOT NULL,
	CODIGO_ADMINISTRADOR VARCHAR(50) UNIQUE NOT NULL,
	CONTRASEÑA_CORREO VARCHAR(MAX) NOT NULL
	 
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 21----
CREATE TABLE DATOS_PERSONALES
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_DATOS_PERSONALES BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	PRIMER_APELLIDO VARCHAR(50) NOT NULL,
	SEGUNDO_APELLIDO VARCHAR(50) NULL,
	PRIMER_NOMBRE VARCHAR(50) NOT NULL,
	SEGUNDO_NOMBRE VARCHAR(50) NULL,
	GENERO VARCHAR(50) DEFAULT 'HOMBRE',
	TIPO_DOCUMENTO VARCHAR(50) NOT NULL,
	NUMERO_DOCUMENTO VARCHAR(15) UNIQUE NOT NULL,
	FECHA_NACIMIENTO DATE DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_NACIMIENTO < GETDATE()),
	CHECK (GENERO = 'HOMBRE' OR GENERO = 'MUJER' OR GENERO = 'OTRO'),
	CHECK (PRIMER_NOMBRE !=  SEGUNDO_NOMBRE)
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 22----
CREATE TABLE INTENCIDAD_HORARIA
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_INTENCIDAD_HORARIA BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NIVEL_INTENCIDAD_HORARIA VARCHAR(50) UNIQUE NOT NULL,
	DURACION_CLASE TIME(0) DEFAULT '01:30:00',
	N_CLASES_SEMANA INT NOT NULL,
	ESTADO VARCHAR(15) DEFAULT 'ACTIVADO' NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (N_CLASES_SEMANA >= 1 AND N_CLASES_SEMANA <= 20),
	CHECK (ESTADO = 'ACTIVADO' OR ESTADO = 'DESACTIVADO')
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 23----
CREATE TABLE TIPO_MENSUALIDAD
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_TIPO_MENSUALIDAD BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_INTENCIDAD_HORARIA BIGINT REFERENCES INTENCIDAD_HORARIA(ID_INTENCIDAD_HORARIA) ON DELETE CASCADE UNIQUE NOT NULL,
	PRECIO_MENSUALIDAD MONEY NOT NULL,
	PRECIO_CLASE MONEY NOT NULL,
	ESTADO VARCHAR(15) DEFAULT 'ACTIVADO' NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (PRECIO_MENSUALIDAD > PRECIO_CLASE),
	CHECK (ESTADO = 'ACTIVADO' OR ESTADO = 'DESACTIVADO')
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 24----
CREATE TABLE CLASE_ENTRE_SEMANA
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CLASE_ENTRE_SEMANA BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	HORA_INICIO_CLASE_ENTRE_SEMANA TIME(0) UNIQUE NOT NULL,
	TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA TIME(0) DEFAULT '00:15:00',
	HORA_FINALIZACION_CLASE_ENTRE_SEMANA TIME(0) NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (HORA_INICIO_CLASE_ENTRE_SEMANA < HORA_FINALIZACION_CLASE_ENTRE_SEMANA)
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 25----
CREATE TABLE CLASE_SABADO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CLASE_SABADO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	HORA_INICIO_CLASE_SABADO TIME(0) UNIQUE NOT NULL,
	TIEMPO_EXPARSIMIENTO_CLASE_SABADO TIME(0) DEFAULT '00:15:00',
	HORA_FINALIZACION_CLASE_SABADO TIME(0) NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (HORA_INICIO_CLASE_SABADO < HORA_FINALIZACION_CLASE_SABADO)
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 26----
CREATE TABLE CLASE_DOMINGO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CLASE_DOMINGO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	HORA_INICIO_CLASE_DOMINGO  TIME(0) UNIQUE NOT NULL,
	TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO TIME(0) DEFAULT '00:15:00',
	HORA_FINALIZACION_CLASE_DOMINGO  TIME(0) NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (HORA_INICIO_CLASE_DOMINGO < HORA_FINALIZACION_CLASE_DOMINGO)
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 27----
CREATE TABLE CLASES_HORARIO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CLASES_HORARIO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_CLASE_DOMINGO BIGINT REFERENCES CLASE_DOMINGO(ID_CLASE_DOMINGO) ON DELETE CASCADE NULL,
	ID_CLASE_SABADO BIGINT REFERENCES CLASE_SABADO(ID_CLASE_SABADO) ON DELETE CASCADE NULL,
	ID_CLASE_ENTRE_SEMANA BIGINT REFERENCES CLASE_ENTRE_SEMANA(ID_CLASE_ENTRE_SEMANA) ON DELETE CASCADE NULL,
	ESTADO VARCHAR(15) DEFAULT 'ACTIVADO' NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (ID_CLASE_ENTRE_SEMANA != NULL OR ID_CLASE_SABADO != NULL OR ID_CLASE_ENTRE_SEMANA != NULL),
	CHECK (ESTADO = 'ACTIVADO' OR ESTADO = 'DESACTIVADO')
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 28----
CREATE TABLE HORARIO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_HORARIO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_CLASES_HORARIO BIGINT REFERENCES CLASES_HORARIO(ID_CLASES_HORARIO) ON DELETE CASCADE UNIQUE NOT NULL,
	NOMBRE_HORARIO VARCHAR(50) UNIQUE NOT NULL,
	EDAD_MINIMA_HORARIO INT NOT NULL,
	EDAD_MAXIMA_HORARIO INT NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (EDAD_MINIMA_HORARIO < EDAD_MAXIMA_HORARIO AND  EDAD_MAXIMA_HORARIO <= 100 AND EDAD_MINIMA_HORARIO >= 0)
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 29----
CREATE TABLE CINTURON
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CINTURON BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	COLOR_CINTURON VARCHAR(50) UNIQUE NOT NULL,
	SIGNIFICADO_CINTURON VARCHAR(MAX) NULL,
	IMAGEN_CINTURON IMAGE NULL,
	ESTADO VARCHAR(15) DEFAULT 'ACTIVADO' NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (ESTADO = 'ACTIVADO' OR ESTADO = 'DESACTIVADO')
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 30----
CREATE TABLE CATEGORIA_EDAD
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CATEGORIA_EDAD BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_CATEGORIA_EDAD VARCHAR(50) UNIQUE NOT NULL,
	EDAD_MINIMA_CATEGORIA INT NOT NULL,
	EDAD_MAXIMA_CATEGORIA INT NOT NULL,
	ESTADO VARCHAR(15) DEFAULT 'ACTIVADO' NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (EDAD_MINIMA_CATEGORIA <= EDAD_MAXIMA_CATEGORIA),
	CHECK (ESTADO = 'ACTIVADO' OR ESTADO = 'DESACTIVADO')
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 31----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 32----
CREATE TABLE DATOS_DEPORTISTA
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_DATOS_DEPORTISTA BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_CATEGORIA_EDAD BIGINT REFERENCES CATEGORIA_EDAD(ID_CATEGORIA_EDAD) ON DELETE NO ACTION NOT NULL,
	ID_CINTURON BIGINT REFERENCES CINTURON(ID_CINTURON) ON DELETE NO ACTION NOT NULL,
	ID_HORARIO BIGINT REFERENCES HORARIO(ID_HORARIO) ON DELETE NO ACTION NOT NULL,
	ID_TIPO_MENSUALIDAD BIGINT REFERENCES TIPO_MENSUALIDAD(ID_TIPO_MENSUALIDAD) ON DELETE NO ACTION NOT NULL,
	PESO_DEPORTISTA VARCHAR(50) NULL,
	ESTATURA_DEPORTISTA VARCHAR(50) NULL,
	TIPO_SANGRE_DEPORTISTA VARCHAR(50) NOT NULL,
	FOTOCOPIA_DOCUMENTO_ID IMAGE NULL,
	FOTOCOPIA_CARNE_EPS IMAGE NULL,
	CERTIFICADO_MEDICO_DEPORTISTA IMAGE NULL,
	FOTO_DEPORTISTA IMAGE NULL
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 33----
CREATE TABLE DEPORTISTA
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_DEPORTISTA BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_DATOS_PERSONALES BIGINT UNIQUE NOT NULL,
	ID_DATOS_CONTACTO BIGINT UNIQUE NOT NULL,
	ID_DATOS_DEPORTISTA BIGINT UNIQUE NOT NULL

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_DEPORTISTA_ID_DATOS_PERSONALES FOREIGN KEY (ID_DATOS_PERSONALES) 
	REFERENCES DATOS_PERSONALES(ID_DATOS_PERSONALES) ON DELETE NO ACTION,

	CONSTRAINT FK_DEPORTISTA_ID_DATOS_CONTACTO FOREIGN KEY (ID_DATOS_CONTACTO) 
	REFERENCES DATOS_CONTACTO(ID_DATOS_CONTACTO) ON DELETE NO ACTION,

	CONSTRAINT FK_DEPORTISTA_ID_DATOS_DEPORTISTA FOREIGN KEY (ID_DATOS_DEPORTISTA) 
	REFERENCES DATOS_DEPORTISTA(ID_DATOS_DEPORTISTA) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 34----
CREATE TABLE DATOS_ACUDIENTE
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_DATOS_ACUDIENTE BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_DEPORTISTA BIGINT UNIQUE NOT NULL,
	EMPLEO_ACUDIENTE VARCHAR(50) NULL,
	TELEFONO_TRABAJO_ACUDIENTE BIGINT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (TELEFONO_TRABAJO_ACUDIENTE > 3000000000 AND TELEFONO_TRABAJO_ACUDIENTE < 4000000000
	OR TELEFONO_TRABAJO_ACUDIENTE >= 1000000 AND TELEFONO_TRABAJO_ACUDIENTE <= 9999999 OR TELEFONO_TRABAJO_ACUDIENTE = NULL),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_DATOS_ACUDIENTE_ID_DEPORTISTA FOREIGN KEY (ID_DEPORTISTA) 
	REFERENCES DEPORTISTA(ID_DEPORTISTA) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 35----
CREATE TABLE DATOS_CUENTA
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_DATOS_CUENTA BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_DATOS_PERSONALES BIGINT UNIQUE NOT NULL,
	ID_DATOS_CONTACTO BIGINT UNIQUE NOT NULL,
	ID_DATOS_DEPORTISTA BIGINT UNIQUE NULL,
	ID_DATOS_SEGURIDAD BIGINT UNIQUE NOT NULL,
	ID_DATOS_ADMINISTRADOR BIGINT UNIQUE NULL,
	ID_DATOS_ACUDIENTE BIGINT UNIQUE NULL,
	ID_DATOS_PROGRAMADOR BIGINT UNIQUE NULL,
	ID_DATOS_ENTRENADOR BIGINT UNIQUE NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (ID_DATOS_DEPORTISTA  != NULL OR ID_DATOS_ADMINISTRADOR != NULL OR ID_DATOS_ACUDIENTE != NULL OR ID_DATOS_PROGRAMADOR != NULL OR ID_DATOS_ENTRENADOR != NULL),
	
	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_DATOS_CUENTA_ID_DATOS_PERSONALES FOREIGN KEY (ID_DATOS_PERSONALES) 
	REFERENCES DATOS_PERSONALES(ID_DATOS_PERSONALES) ON DELETE NO ACTION,

	CONSTRAINT FK_DATOS_CUENTA_ID_DATOS_CONTACTO FOREIGN KEY (ID_DATOS_CONTACTO) 
	REFERENCES DATOS_CONTACTO(ID_DATOS_CONTACTO) ON DELETE NO ACTION,

	CONSTRAINT FK_DATOS_CUENTA_ID_DATOS_DEPORTISTA FOREIGN KEY (ID_DATOS_DEPORTISTA) 
	REFERENCES DATOS_DEPORTISTA(ID_DATOS_DEPORTISTA) ON DELETE NO ACTION,

	CONSTRAINT FK_DATOS_CUENTA_ID_DATOS_SEGURIDAD FOREIGN KEY (ID_DATOS_SEGURIDAD) 
	REFERENCES DATOS_SEGURIDAD(ID_DATOS_SEGURIDAD) ON DELETE NO ACTION,

	CONSTRAINT FK_DATOS_CUENTA_ID_DATOS_ADMINISTRADOR FOREIGN KEY (ID_DATOS_ADMINISTRADOR) 
	REFERENCES DATOS_ADMINISTRADOR(ID_DATOS_ADMINISTRADOR) ON DELETE NO ACTION,

	CONSTRAINT FK_DATOS_CUENTA_ID_DATOS_ACUDIENTE FOREIGN KEY (ID_DATOS_ACUDIENTE) 
	REFERENCES DATOS_ACUDIENTE(ID_DATOS_ACUDIENTE) ON DELETE NO ACTION,

	CONSTRAINT FK_DATOS_CUENTA_ID_DATOS_PROGRAMADOR FOREIGN KEY (ID_DATOS_PROGRAMADOR) 
	REFERENCES DATOS_PROGRAMADOR(ID_DATOS_PROGRAMADOR) ON DELETE NO ACTION,

	CONSTRAINT FK_DATOS_CUENTA_ID_DATOS_ENTRENADOR FOREIGN KEY (ID_DATOS_ENTRENADOR) 
	REFERENCES DATOS_ENTRENADOR(ID_DATOS_ENTRENADOR) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 36----
CREATE TABLE CUENTA
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CUENTA BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_DATOS_CUENTA BIGINT UNIQUE NOT NULL,
	ID_TIPO_CUENTA BIGINT NOT NULL,
	CONTRASEÑA VARCHAR(50) NOT NULL,
	NOMBRE_USUARIO VARCHAR(50) UNIQUE NOT NULL,
	NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50) UNIQUE NOT NULL,
	ESTADO_CUENTA VARCHAR(50) NOT NULL,
	CORREO VARCHAR(50) UNIQUE NOT NULL,
	RED INT NULL,
	GREEN INT NULL,
	BLUE INT NULL,
	RED1 INT NULL,
	GREEN1 INT NULL,
	BLUE1 INT NULL,
	FOTO_PERFIL IMAGE NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (NOMBRE_USUARIO != NOMBRE_USUARIO_ALTERNATIVO),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_CUENTA_ID_DATOS_CUENTA FOREIGN KEY (ID_DATOS_CUENTA) 
	REFERENCES DATOS_CUENTA(ID_DATOS_CUENTA) ON DELETE NO ACTION,

	CONSTRAINT FK_CUENTA_ID_TIPO_CUENTA FOREIGN KEY (ID_TIPO_CUENTA) 
	REFERENCES TIPO_CUENTA(ID_TIPO_CUENTA) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 37----
CREATE TABLE REGISTRO_USUARIO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_REGISTRO_USUARIO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_CUENTA BIGINT UNIQUE NOT NULL,
	NOMBRE_REGISTRADOR VARCHAR(50) NOT NULL,
	CARGO_REGISTRADOR VARCHAR(50) NOT NULL,
	FECHA_REGISTRO DATE DEFAULT GETDATE(),
	FECHA_EXPIRACION DATE DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK(FECHA_REGISTRO <= GETDATE()),
	CHECK(FECHA_REGISTRO < FECHA_EXPIRACION),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_REGISTRO_USUARIO_ID_CUENTA FOREIGN KEY (ID_CUENTA) 
	REFERENCES CUENTA(ID_CUENTA) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 38----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 39----
CREATE TABLE ENTRENADOR
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_ENTRENADOR BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_DATOS_PERSONALES BIGINT UNIQUE NOT NULL,
	ID_DATOS_CONTACTO BIGINT UNIQUE NOT NULL,
	ID_DATOS_ENTRENADOR BIGINT UNIQUE NOT NULL

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_ENTRENADORS_ID_DATOS_PERSONALES FOREIGN KEY (ID_DATOS_PERSONALES) 
	REFERENCES DATOS_PERSONALES(ID_DATOS_PERSONALES) ON DELETE NO ACTION,

	CONSTRAINT FK_ENTRENADORS_ID_DATOS_CONTACTO FOREIGN KEY (ID_DATOS_CONTACTO) 
	REFERENCES DATOS_CONTACTO(ID_DATOS_CONTACTO) ON DELETE NO ACTION,

	CONSTRAINT FK_ENTRENADORS_ID_DATOS_ENTRENADOR FOREIGN KEY (ID_DATOS_ENTRENADOR) 
	REFERENCES DATOS_ENTRENADOR(ID_DATOS_ENTRENADOR) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 40----
CREATE TABLE PLANEACION_CLASES
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_PLANEACION_CLASES BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_ENTRENADOR BIGINT NOT NULL,
	DOCUMENTO_PLANEACION VARCHAR(MAX) NOT NULL,
	FECHA_INICIO DATE DEFAULT GETDATE(),
	FECHA_TERMINACION DATE NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_TERMINACION > GETDATE() AND FECHA_TERMINACION > FECHA_INICIO),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_PLANEACION_CLASES_ID_ENTRENADOR FOREIGN KEY (ID_ENTRENADOR) 
	REFERENCES ENTRENADOR(ID_ENTRENADOR) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 41----
CREATE TABLE TIPO_EVENTO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_TIPO_EVENTO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_TIPO_EVENTO VARCHAR(50) UNIQUE NOT NULL,
	DESCRIPCION_TIPO_EVENTO VARCHAR(MAX) NULL,
	IMAGEN_TIPO_EVENTO IMAGE NULL
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 42----
CREATE TABLE CREDITOS_ENTRENAMIENTO_REQUERIDOS
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	N_CREDITOS_ENTRENAMIENTO_REQUERIDOS INT NOT NULL,
	FECHA_INICIO_CONTEO DATE DEFAULT GETDATE(),
	FECHA_FINALIZACION_CONTEO DATE NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK(FECHA_INICIO_CONTEO < FECHA_FINALIZACION_CONTEO)
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 43----
CREATE TABLE REQUISITOS_EVENTO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_REQUISITOS_EVENTO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS BIGINT UNIQUE NOT NULL,
	REQUIERE_CERTIFICADO_MEDICO VARCHAR(10) DEFAULT 'SI',
	REQUIERE_PAZ_Y_SALVO VARCHAR(10) DEFAULT 'SI',
	REQUIERE_DOCUMENTO_ID VARCHAR(10) DEFAULT 'SI',
	REQUIERE_CANCELAR_VALOR_EVENTO VARCHAR(10) DEFAULT 'SI',
	REQUIERE_PERMISO_ACUDIENTE VARCHAR(10) DEFAULT 'SI'

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_REQUISITOS_EVENTO_ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS FOREIGN KEY (ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS) 
	REFERENCES CREDITOS_ENTRENAMIENTO_REQUERIDOS(ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 44----
CREATE TABLE HORARIO_EVENTO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_HORARIO_EVENTO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	HORA_AGRUPACION TIME NULL,
	HORA_INICIO TIME NOT NULL,
	HORA_FINALIZACION TIME NOT NULL,
	HORA_EXPARSIMIENTO TIME NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (HORA_FINALIZACION > HORA_INICIO AND HORA_AGRUPACION < HORA_INICIO AND HORA_EXPARSIMIENTO > HORA_FINALIZACION)
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 45----
CREATE TABLE DATOS_EVENTO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_DATOS_EVENTO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_TIPO_EVENTO BIGINT NOT NULL,
	ID_HORARIO_EVENTO BIGINT UNIQUE NOT NULL,
	ID_REQUISITOS_EVENTO BIGINT UNIQUE NOT NULL,
	DIRECCION_EVENTO VARCHAR(50) NOT NULL,
	LUGAR_EVENTO VARCHAR(50) NOT NULL,
	NOMBRE_EVENTO VARCHAR(50) NOT NULL,
	ANFITRION_EVENTO VARCHAR(50) NOT NULL,
	VALOR_EVENTO MONEY NOT NULL

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_DATOS_EVENTO_ID_TIPO_EVENTO FOREIGN KEY (ID_TIPO_EVENTO) 
	REFERENCES TIPO_EVENTO(ID_TIPO_EVENTO) ON DELETE NO ACTION,

	CONSTRAINT FK_DATOS_EVENTO_ID_HORARIO_EVENTO FOREIGN KEY (ID_HORARIO_EVENTO) 
	REFERENCES HORARIO_EVENTO(ID_HORARIO_EVENTO) ON DELETE NO ACTION,

	CONSTRAINT FK_DATOS_EVENTO_ID_REQUISITOS_EVENTO FOREIGN KEY (ID_REQUISITOS_EVENTO) 
	REFERENCES REQUISITOS_EVENTO(ID_REQUISITOS_EVENTO) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 46----
CREATE TABLE EVENTO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_EVENTO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_DATOS_EVENTO BIGINT NOT NULL,
	FECHA_REGISTRO_EVENTO DATE DEFAULT GETDATE(),
	FECHA_INICIO_EVENTO DATE NOT NULL,
	FECHA_FINALIZACION_EVENTO DATE NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_FINALIZACION_EVENTO >= FECHA_INICIO_EVENTO),
	CHECK (FECHA_REGISTRO_EVENTO <= GETDATE()),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_EVENTO_ID_DATOS_EVENTO FOREIGN KEY (ID_DATOS_EVENTO) 
	REFERENCES DATOS_EVENTO(ID_DATOS_EVENTO) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 47----
CREATE TABLE EXAMEN
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_EXAMEN BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_ENTRENADOR BIGINT NOT NULL,
	ID_EVENTO BIGINT UNIQUE NOT NULL,
	PRECIO_TABLA MONEY NOT NULL

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_EXAMEN_ID_ENTRENADOR FOREIGN KEY (ID_ENTRENADOR) 
	REFERENCES ENTRENADOR(ID_ENTRENADOR) ON DELETE NO ACTION,

	CONSTRAINT FK_EXAMEN_ID_EVENTO FOREIGN KEY (ID_EVENTO) 
	REFERENCES EVENTO(ID_EVENTO) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 48----
CREATE TABLE CATEGORIA_CAMPEONATO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CATEGORIA_CAMPEONATO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_CATEGORIA_CAMPEONATO VARCHAR(50) UNIQUE NOT NULL,
	NIVEL_IMPORTANCIA_CATEGORIA_CAMPEONATO VARCHAR(50) NULL,
	DESCRIPCION_CATEGORIA_CAMPEONATO VARCHAR(MAX) NULL
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 49----
CREATE TABLE CAMPEONATO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CAMPEONATO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_CATEGORIA_CAMPEONATO BIGINT NOT NULL,
	ID_EVENTO BIGINT UNIQUE NOT NULL,
	PRECIO_CATEGORIA_ADICIONAL MONEY DEFAULT $0

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_CAMPEONATO_ID_CATEGORIA_CAMPEONATO FOREIGN KEY (ID_CATEGORIA_CAMPEONATO) 
	REFERENCES CATEGORIA_CAMPEONATO(ID_CATEGORIA_CAMPEONATO) ON DELETE NO ACTION,

	CONSTRAINT FK_CAMPEONATO_ID_EVENTO FOREIGN KEY (ID_EVENTO) 
	REFERENCES EVENTO(ID_EVENTO) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 50----
CREATE TABLE NIVEL_EXAMEN
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_NIVEL_EXAMEN BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_NIVEL_EXAMEN VARCHAR(50) UNIQUE NOT NULL,
	COLOR_CINTURON_NIVEL_EXAMEN VARCHAR(50) NOT NULL,
	EDAD_MINIMA_NIVEL_EXAMEN INT NOT NULL,
	EDAD_MAXIMA_NIVEL_EXAMEN INT NOT NULL,
	PUNTAJE_REQUERIDO_NIVEL_EXAMEN DECIMAL(5,2) NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (EDAD_MINIMA_NIVEL_EXAMEN < EDAD_MAXIMA_NIVEL_EXAMEN)
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 51----
CREATE TABLE CONFIRMAR_ASISTENCIA_EXAMEN
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CONFIRMAR_ASISTENCIA_EXAMEN BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_EXAMEN BIGINT NOT NULL,
	ID_DEPORTISTA BIGINT NOT NULL,
	ID_NIVEL_EXAMEN BIGINT NOT NULL,
	FECHA_CONFIRMACION_ASISTENCIA_EXAMEN DATE DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_CONFIRMACION_ASISTENCIA_EXAMEN <= GETDATE()),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_CONFIRMAR_ASISTENCIA_EXAMEN_ID_DEPORTISTA FOREIGN KEY (ID_DEPORTISTA) 
	REFERENCES DEPORTISTA(ID_DEPORTISTA) ON DELETE NO ACTION,

	CONSTRAINT FK_CONFIRMAR_ASISTENCIA_EXAMEN_ID_EXAMEN FOREIGN KEY (ID_EXAMEN) 
	REFERENCES EXAMEN(ID_EXAMEN) ON DELETE NO ACTION,

	CONSTRAINT FK_CONFIRMAR_ASISTENCIA_EXAMEN_ID_NIVEL_EXAMEN FOREIGN KEY (ID_NIVEL_EXAMEN) 
	REFERENCES NIVEL_EXAMEN(ID_NIVEL_EXAMEN) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 52----
CREATE TABLE CONFIRMAR_ASISTENCIA_CAMPEONATO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CONFIRMAR_ASISTENCIA_CAMPEONATO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_CAMPEONATO BIGINT NOT NULL,
	ID_DEPORTISTA BIGINT NOT NULL,
	FECHA_CONFIRMACION_ASISTENCIA_CAMPEONATO DATE DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_CONFIRMACION_ASISTENCIA_CAMPEONATO <= GETDATE()),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_CONFIRMAR_ASISTENCIA_CAMPEONATO_ID_DEPORTISTA FOREIGN KEY (ID_DEPORTISTA) 
	REFERENCES DEPORTISTA(ID_DEPORTISTA) ON DELETE NO ACTION,

	CONSTRAINT FK_CONFIRMAR_ASISTENCIA_CAMPEONATO_ID_CAMPEONATO FOREIGN KEY (ID_CAMPEONATO) 
	REFERENCES CAMPEONATO(ID_CAMPEONATO) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 53----
CREATE TABLE CONFIRMAR_ASISTENCIA_EVENTO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CONFIRMAR_ASISTENCIA_EVENTO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_EVENTO BIGINT NOT NULL,
	ID_DEPORTISTA BIGINT NOT NULL,
	FECHA_CONFIRMACION_ASISTENCIA_EVENTO DATE DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_CONFIRMACION_ASISTENCIA_EVENTO <= GETDATE()),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_CONFIRMAR_ASISTENCIA_EVENTO_ID_DEPORTISTA FOREIGN KEY (ID_DEPORTISTA) 
	REFERENCES DEPORTISTA(ID_DEPORTISTA) ON DELETE NO ACTION,

	CONSTRAINT FK_CONFIRMAR_ASISTENCIA_EVENTO_ID_EVENTO FOREIGN KEY (ID_EVENTO) 
	REFERENCES EVENTO(ID_EVENTO) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 54----
CREATE TABLE FACTURA_EVENTO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_FACTURA_EVENTO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_CONFIRMAR_ASISTENCIA_EVENTO BIGINT UNIQUE NOT NULL,
	DESCRIPCION_FACTURA_EVENTO VARCHAR(MAX) NULL,
	VALOR_ADICIONAL_FACTURA_EVENTO MONEY DEFAULT $0,
	TOTAL_PAGAR_FACTURA_EVENTO MONEY NOT NULL,
	VALOR_CANCELADO_FACTURA_EVENTO MONEY NOT NULL,
	VALOR_DEUDA_FACTURA_EVENTO MONEY DEFAULT $0,
	FECHA_FACTURA_EVENTO DATE DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_FACTURA_EVENTO <= GETDATE()),
	CHECK (TOTAL_PAGAR_FACTURA_EVENTO >= VALOR_CANCELADO_FACTURA_EVENTO),
	CHECK (VALOR_DEUDA_FACTURA_EVENTO < TOTAL_PAGAR_FACTURA_EVENTO),
	CHECK (VALOR_ADICIONAL_FACTURA_EVENTO < TOTAL_PAGAR_FACTURA_EVENTO),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_FACTURA_EVENTO_ID_CONFIRMAR_ASISTENCIA_EVENTO FOREIGN KEY (ID_CONFIRMAR_ASISTENCIA_EVENTO) 
	REFERENCES CONFIRMAR_ASISTENCIA_EVENTO(ID_CONFIRMAR_ASISTENCIA_EVENTO) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 55----
CREATE TABLE FACTURA_CAMPEONATO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_FACTURA_CAMPEONATO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_CONFIRMAR_ASISTENCIA_CAMPEONATO BIGINT NOT NULL,
	DESCRIPCION_FACTURA_CAMPEONATO VARCHAR(MAX) NULL,
	VALOR_ADICIONAL_FACTURA_CAMPEONATO MONEY DEFAULT $0,
	N_CATEGORIAS_ADICIONALES_FACTURA_CAMPEONATO INT DEFAULT 0,
	TOTAL_PAGAR_FACTURA_CAMPEONATO MONEY NOT NULL,
	VALOR_CANCELADO_FACTURA_CAMPEONATO MONEY NOT NULL,
	VALOR_DEUDA_FACTURA_CAMPEONATO MONEY DEFAULT $0,
	FECHA_FACTURA_CAMPEONATO DATE DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_FACTURA_CAMPEONATO <= GETDATE()),
	CHECK (TOTAL_PAGAR_FACTURA_CAMPEONATO >= VALOR_CANCELADO_FACTURA_CAMPEONATO),
	CHECK (VALOR_DEUDA_FACTURA_CAMPEONATO < TOTAL_PAGAR_FACTURA_CAMPEONATO),
	CHECK (VALOR_ADICIONAL_FACTURA_CAMPEONATO < TOTAL_PAGAR_FACTURA_CAMPEONATO),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_FACTURA_CAMPEONATO_ID_CONFIRMAR_ASISTENCIA_CAMPEONATO FOREIGN KEY (ID_CONFIRMAR_ASISTENCIA_CAMPEONATO) 
	REFERENCES CONFIRMAR_ASISTENCIA_CAMPEONATO(ID_CONFIRMAR_ASISTENCIA_CAMPEONATO) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 56----
CREATE TABLE FACTURA_EXAMEN
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_FACTURA_EXAMEN BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_CONFIRMAR_ASISTENCIA_EXAMEN BIGINT NOT NULL,
	DESCRIPCION_FACTURA_EXAMEN VARCHAR(MAX) NULL,
	VALOR_ADICIONAL_FACTURA_EXAMEN MONEY DEFAULT $0,
	N_TABLAS_ADICIONALES_FACTURA_EXAMEN INT DEFAULT 0,
	TOTAL_PAGAR_FACTURA_EXAMEN MONEY NOT NULL,
	VALOR_CANCELADO_FACTURA_EXAMEN MONEY NOT NULL,
	VALOR_DEUDA_FACTURA_EXAMEN MONEY DEFAULT $0,
	FECHA_FACTURA_EXAMEN DATE DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_FACTURA_EXAMEN <= GETDATE()),
	CHECK (TOTAL_PAGAR_FACTURA_EXAMEN >= VALOR_CANCELADO_FACTURA_EXAMEN),
	CHECK (VALOR_DEUDA_FACTURA_EXAMEN < TOTAL_PAGAR_FACTURA_EXAMEN),
	CHECK (VALOR_ADICIONAL_FACTURA_EXAMEN < TOTAL_PAGAR_FACTURA_EXAMEN),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_FACTURA_EXAMEN_ID_CONFIRMAR_ASISTENCIA_EXAMEN FOREIGN KEY (ID_CONFIRMAR_ASISTENCIA_EXAMEN) 
	REFERENCES CONFIRMAR_ASISTENCIA_EXAMEN(ID_CONFIRMAR_ASISTENCIA_EXAMEN) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 57----
CREATE TABLE REGISTRO_AHORRO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_REGISTRO_AHORRO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_DEPORTISTA BIGINT NOT NULL,
	VALOR_DEPOSITADO MONEY NOT NULL,
	FECHA_REGISTRO_AHORRO DATE DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_REGISTRO_AHORRO <= GETDATE()),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_REGISTRO_AHORRO_ID_DEPORTISTA FOREIGN KEY (ID_DEPORTISTA) 
	REFERENCES DEPORTISTA(ID_DEPORTISTA) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 58----
CREATE TABLE FACTURA_MENSUALIDAD
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_FACTURA_MENSUALIDAD BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_DEPORTISTA BIGINT NOT NULL,
	DESCRIPCION_FACTURA_MENSUALIDAD VARCHAR(MAX) NULL,
	VALOR_ADICIONAL_FACTURA_MENSUALIDAD MONEY NULL,
	N_MESES_A_CANCELAR_FACTURA_MENSUALIDAD INT DEFAULT 1,
	TOTAL_CLASES_EXTRA_FACTURA_MENSUALIDAD INT DEFAULT 0,
	TOTAL_PAGAR_FACTURA_MENSUALIDAD MONEY NOT NULL,
	VALOR_CANCELADO_FACTURA_MENSUALIDAD MONEY NOT NULL,
	VALOR_DEUDA_FACTURA_MENSUALIDAD MONEY DEFAULT $0,
	FECHA_FACTURA_MENSUALIDAD DATE DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_FACTURA_MENSUALIDAD <= GETDATE()),
	CHECK (TOTAL_PAGAR_FACTURA_MENSUALIDAD >= VALOR_CANCELADO_FACTURA_MENSUALIDAD),
	CHECK (VALOR_DEUDA_FACTURA_MENSUALIDAD < TOTAL_PAGAR_FACTURA_MENSUALIDAD),
	CHECK (VALOR_ADICIONAL_FACTURA_MENSUALIDAD < TOTAL_PAGAR_FACTURA_MENSUALIDAD),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_FACTURA_MENSUALIDAD_ID_DEPORTISTA FOREIGN KEY (ID_DEPORTISTA) 
	REFERENCES DEPORTISTA(ID_DEPORTISTA) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 59----
CREATE TABLE TIPO_COMBATE
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_TIPO_COMBATE BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_TIPO_COMBATE VARCHAR(50) UNIQUE NOT NULL,
	DESCRIPCION_TIPO_COMBATE VARCHAR(MAX) NULL
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 60----
CREATE TABLE TIPO_POOMSAE
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_TIPO_POOMSAE BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_TIPO_POOMSAE VARCHAR(50) UNIQUE NOT NULL,
	DESCRIPCION_TIPO_POOMSAE VARCHAR(MAX) NULL
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 61----
CREATE TABLE TIPO_EXHIBICION
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_TIPO_EXHIBICION BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_TIPO_EXHIBICION VARCHAR(50) UNIQUE NOT NULL,
	DESCRIPCION_TIPO_EXHIBICION VARCHAR(MAX) NULL
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 62----
CREATE TABLE CATEGORIA_PESO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CATEGORIA_PESO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_CATEGORIA_PESO VARCHAR(50) UNIQUE NOT NULL,
	PESO_MINIMO INT NOT NULL,
	PESO_MAXIMO INT NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (PESO_MINIMO < PESO_MAXIMO)
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 63----
CREATE TABLE CATEGORIA_CINTURON
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_CATEGORIA_CINTURON BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_CATEGORÍA_CINTURON VARCHAR(50) UNIQUE NOT NULL,
	COLOR_CINTURON_MINIMO VARCHAR(50) NOT NULL,
	COLOR_CINTURON_MAXIMO VARCHAR(50) NOT NULL
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 64----
CREATE TABLE LOGRO_EXHIBICION
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_LOGRO_EXHIBICION BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_TIPO_EXHIBICION BIGINT NOT NULL,
	N_PRESENTACIONES_EHCIBICION INT DEFAULT 1,
	PROMEDIO_PUNTAJE_EHCIBICION DECIMAL(5,2) NULL

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_LOGRO_EXHIBICION_ID_TIPO_EXHIBICION  FOREIGN KEY (ID_TIPO_EXHIBICION) 
	REFERENCES TIPO_EXHIBICION (ID_TIPO_EXHIBICION) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 65----
CREATE TABLE LOGRO_POOMSAE
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_LOGRO_POOMSAE BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_TIPO_POOMSAE BIGINT NOT NULL,
	N_PRESENTACIONES_POOMSAE INT DEFAULT 1,
	PROMEDIO_PUNTAJE_POOMSAE DECIMAL(5,2) NOT NULL

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_LOGRO_POOMSAE_ID_TIPO_POOMSAE FOREIGN KEY (ID_TIPO_POOMSAE) 
	REFERENCES TIPO_POOMSAE (ID_TIPO_POOMSAE) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 66----
CREATE TABLE LOGRO_COMBATE
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_LOGRO_COMBATE BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_TIPO_COMBATE BIGINT NOT NULL,
	ID_CATEGORIA_PESO BIGINT NOT NULL,
	COMBATES_DISPUTADOS INT NOT NULL,
	COMBATES_GANADOS INT DEFAULT 0,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (COMBATES_DISPUTADOS >= COMBATES_GANADOS),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_LOGRO_CAMPEONATO_ID_TIPO_COMBATE FOREIGN KEY (ID_TIPO_COMBATE) 
	REFERENCES TIPO_COMBATE(ID_TIPO_COMBATE) ON DELETE NO ACTION,

	CONSTRAINT FK_LOGRO_CAMPEONATO_ID_TIPO_CATEGORIA_PESO FOREIGN KEY (ID_CATEGORIA_PESO) 
	REFERENCES CATEGORIA_PESO (ID_CATEGORIA_PESO) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 67----
CREATE TABLE LOGRO_DEPORTISTA_CAMPEONATO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_LOGRO_CAMPEONATO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_CAMPEONATO BIGINT NOT NULL,
	ID_CATEGORIA_CINTURON BIGINT NOT NULL,
	ID_DEPORTISTA BIGINT NOT NULL,
	ID_LOGRO_COMBATE BIGINT UNIQUE NULL,
	ID_LOGRO_POOMSAE BIGINT UNIQUE NULL,
	ID_LOGRO_EXHIBICION BIGINT UNIQUE NULL,
	MEDALLA_LOGRADA VARCHAR(50) NULL,
	FOTO_PODIUM VARCHAR(MAX) NULL,
	PUESTO_ALCANZADO INT NULL,
	TOTAL_PARTICIPANTES_CATEGORIA INT NULL,
	PUNTAJE_RAIKING DECIMAL(5,2) NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (ID_LOGRO_COMBATE != NULL OR ID_LOGRO_POOMSAE != NULL OR ID_LOGRO_EXHIBICION != NULL),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_LOGRO_DEPORTISTA_CAMPEONATO_ID_CAMPEONATO FOREIGN KEY (ID_CAMPEONATO) 
	REFERENCES CAMPEONATO(ID_CAMPEONATO) ON DELETE NO ACTION,

	CONSTRAINT FK_LOGRO_DEPORTISTA_CAMPEONATO_ID_CATEGORIA_CINTURON FOREIGN KEY (ID_CATEGORIA_CINTURON) 
	REFERENCES CATEGORIA_CINTURON(ID_CATEGORIA_CINTURON) ON DELETE NO ACTION,

	CONSTRAINT FK_LOGRO_DEPORTISTA_CAMPEONATO_ID_DEPORTISTA FOREIGN KEY (ID_DEPORTISTA) 
	REFERENCES DEPORTISTA(ID_DEPORTISTA) ON DELETE NO ACTION,

	CONSTRAINT FK_LOGRO_DEPORTISTA_CAMPEONATO_ID_LOGRO_COMBATE FOREIGN KEY (ID_LOGRO_COMBATE) 
	REFERENCES LOGRO_COMBATE(ID_LOGRO_COMBATE) ON DELETE NO ACTION,

	CONSTRAINT FK_LOGRO_DEPORTISTA_CAMPEONATO_ID_LOGRO_POOMSAE FOREIGN KEY (ID_LOGRO_POOMSAE) 
	REFERENCES LOGRO_POOMSAE(ID_LOGRO_POOMSAE) ON DELETE NO ACTION,

	CONSTRAINT FK_LOGRO_DEPORTISTA_CAMPEONATO_ID_LOGRO_EXHIBICION FOREIGN KEY (ID_LOGRO_EXHIBICION) 
	REFERENCES LOGRO_EXHIBICION(ID_LOGRO_EXHIBICION) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 68----
CREATE TABLE PRODUCTO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_PRODUCTO BIGINT IDENTITY PRIMARY KEY  NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_PRODUCTO VARCHAR(50) UNIQUE NOT NULL,
	DESCRIPCION_PRODUCTO VARCHAR(MAX) NULL,
	FOTO_PRODUCTO VARCHAR(MAX) NULL,
	PRECIO_PRODUCTO MONEY NOT NULL
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 69----
CREATE TABLE FACTURA_PRODUCTO
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_FACTURA_PRODUCTO BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_PRODUCTO BIGINT NOT NULL,
	ID_DEPORTISTA BIGINT NOT NULL,
	DESCRIPCION_FACTURA_PRODUCTO VARCHAR(MAX) NULL,
	CANTIDAD_PRODUCTO INT NOT NULL,
	TOTAL_PAGAR_FACTURA_PRODUCTO MONEY NOT NULL,
	VALOR_CANCELADO_FACTURA_PRODUCTO MONEY NOT NULL,
	VALOR_DEUDA_FACTURA_PRODUCTO MONEY DEFAULT $0,
	VALOR_ADICIONAL_FACTURA_PRODUCTO MONEY DEFAULT $0,
	FECHA_FACTURA_PRODUCTO DATE DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_FACTURA_PRODUCTO <= GETDATE()),
	CHECK (TOTAL_PAGAR_FACTURA_PRODUCTO >= VALOR_CANCELADO_FACTURA_PRODUCTO),
	CHECK (VALOR_DEUDA_FACTURA_PRODUCTO < TOTAL_PAGAR_FACTURA_PRODUCTO),
	CHECK (VALOR_ADICIONAL_FACTURA_PRODUCTO < TOTAL_PAGAR_FACTURA_PRODUCTO),
	

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_FACTURA_PRODUCTO_ID_PRODUCTO FOREIGN KEY (ID_PRODUCTO) 
	REFERENCES PRODUCTO(ID_PRODUCTO) ON DELETE NO ACTION,

	CONSTRAINT FK_FACTURA_PRODUCTO_ID_DEPORTISTA FOREIGN KEY (ID_DEPORTISTA) 
	REFERENCES DEPORTISTA(ID_DEPORTISTA) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 70----
CREATE TABLE HORARIO_ASISTENCIA
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_HORARIO_ASISTENCIA BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	HORA_INICIO_CLASE TIME NOT NULL,
	HORA_FINALIZACION_CLASE TIME NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (HORA_INICIO_CLASE > HORA_FINALIZACION_CLASE)
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 71----
CREATE TABLE ASISTENCIA_DEPORTISTA
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_ASISTENCIA_DEPORTISTA BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_HORARIO_ASISTENCIA BIGINT NOT NULL,
	ID_DEPORTISTA BIGINT NOT NULL,
	OBSERVACION_ASISTENCIA VARCHAR(MAX) NULL,
	CREDITOS_ENTRENAMIENTO INT DEFAULT 0,
	FECHA_ASISTENCIA DATETIME DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_ASISTENCIA <= GETDATE()),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_ASISTENCIA_DEPORTISTA_ID_DEPORTISTA FOREIGN KEY (ID_DEPORTISTA) 
	REFERENCES DEPORTISTA(ID_DEPORTISTA) ON DELETE NO ACTION,
	CONSTRAINT FK_ASISTENCIA_DEPORTISTA_ID_HORARIO_ASISTENCIA FOREIGN KEY (ID_HORARIO_ASISTENCIA) 
	REFERENCES HORARIO_ASISTENCIA(ID_HORARIO_ASISTENCIA) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 72----
CREATE TABLE MULTA
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_MULTA BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	NOMBRE_MULTA VARCHAR(50) UNIQUE NOT NULL,
	GRAVEDAD_FALTA VARCHAR(50) DEFAULT 'LEVE',
	VALOR_MULTA MONEY NOT NULL
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 73----
CREATE TABLE DEUDA_MULTAS
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_DEUDA_MULTAS BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_DEPORTISTA BIGINT UNIQUE NOT NULL,
	VALOR_DEUDA_MULTAS MONEY NOT NULL,
	VALOR_CANCELADO_DEUDA_MULTAS MONEY NOT NULL,

	--ESTABLECIENDO RESTRICCIONES
	CHECK (VALOR_DEUDA_MULTAS >= VALOR_CANCELADO_DEUDA_MULTAS),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_DEUDA_MULTAS_ID_DEPORTISTA FOREIGN KEY (ID_DEPORTISTA) 
	REFERENCES DEPORTISTA(ID_DEPORTISTA) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» CREANDO TABLA 74----
CREATE TABLE REGISTRO_MULTAS
(
	--ESTABLECIENDO LLAVE PRIMARIA DE LA TABLA
	ID_REGISTRO_MULTAS BIGINT IDENTITY PRIMARY KEY NOT NULL,

	-- CREANDO COLUMNAS
	ID_DEUDA_MULTAS BIGINT NOT NULL,
	ID_MULTA BIGINT NOT NULL,
	FECHA_REGISTRO_MULTAS DATETIME DEFAULT GETDATE(),

	--ESTABLECIENDO RESTRICCIONES
	CHECK (FECHA_REGISTRO_MULTAS <= GETDATE()),

	--ESTABLECIENDO LLAVES FORÁNEAS
	CONSTRAINT FK_REGISTRO_MULTAS_ID_DEUDA_MULTAS FOREIGN KEY (ID_DEUDA_MULTAS) 
	REFERENCES DEUDA_MULTAS(ID_DEUDA_MULTAS) ON DELETE NO ACTION,

	CONSTRAINT FK_REGISTRO_MULTAS_ID_MULTA FOREIGN KEY (ID_MULTA) 
	REFERENCES MULTA(ID_MULTA) ON DELETE NO ACTION
);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH 
GO
EXECUTE CREAR_TABLAS;
GO

CREATE PROC BORRAR_TABLAS
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 74----
DROP TABLE REGISTRO_MULTA;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 73----
DROP TABLE DEUDA_MULTAS;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 72----
DROP TABLE MULTA;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 71----
DROP TABLE ASISTENCIA_DEPORTISTA;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 70----
DROP TABLE HORARIO_ASISTENCIA;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 69----
DROP TABLE FACTURA_PRODUCTO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 68----
DROP TABLE PRODUCTO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 67----
DROP TABLE LOGRO_DEPORTISTA_CAMPEONATO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 66----
DROP TABLE LOGRO_COMBATE;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 65----
DROP TABLE LOGRO_POOMSAE;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 64----
DROP TABLE LOGRO_EXCIBICION;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 63----
DROP TABLE CATEGORIA_CINTURON;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 62----
DROP TABLE CATEGORIA_PESO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 61----
DROP TABLE TIPO_EXCIBICION;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 60----
DROP TABLE TIPO_POOMSAE;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 59----
DROP TABLE TIPO_COMBATE;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 58----
DROP TABLE FACTURA_MENSUALIDAD;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 57----
DROP TABLE REGISTRO_AHORRO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 56----
DROP TABLE FACTURA_EXAMEN;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 55----
DROP TABLE FACTURA_CAMPEONATO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 54----
DROP TABLE FACTURA_EVENTO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 53----
DROP TABLE CONFIRMAR_ASISTENCIA_EVENTO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 52----
DROP TABLE CONFIRMAR_ASISTENCIA_CAMPEONATO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 51----
DROP TABLE CONFIRMAR_ASISTENCIA_EXAMEN;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 50----
DROP TABLE NIVEL_EXAMEN;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 49----
DROP TABLE CAMPEONATO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 48----
DROP TABLE CATEGORIA_CAMPEONATO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 47----
DROP TABLE EXAMEN;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 46----
DROP TABLE EVENTO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 45----
DROP TABLE DATOS_EVENTO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 44----
DROP TABLE HORARIO_EVENTO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 43----
DROP TABLE REQUISITOS_EVENTO;	
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 42----
DROP TABLE CREDITOS_ENTRENAMIENTO_REQUERIDOS;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 41----
DROP TABLE TIPO_EVENTO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 40----
DROP TABLE PLANEACION_CLASES;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 39----
DROP TABLE ENTRENADOR;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 38----
DROP TABLE CUMPLEAÑOS;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 37----
DROP TABLE REGISTRO_USUARIO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 36----
DROP TABLE CUENTA;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 35----
DROP TABLE DATOS_CUENTA;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 34----
DROP TABLE DATOS_ACUDIENTE;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 33----
DROP TABLE DEPORTISTA;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 32----
DROP TABLE DATOS_DEPORTISTA;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 31----
DROP TABLE REQUISITOS_CUMPLIDOS_DEP;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 30----
DROP TABLE CATEGORIA_EDAD;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 29----
DROP TABLE CINTURON;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 28----
DROP TABLE HORARIO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 27----
DROP TABLE CLASES_HORARIO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 26----
DROP TABLE CLASE_DOMINGO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 25----
DROP TABLE CLASE_SABADO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 24----
DROP TABLE CLASE_ENTRE_SEMANA;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 23----
DROP TABLE TIPO_MENSUALIDAD;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 22----
DROP TABLE INTENCIDAD_HORARIA;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 21----
DROP TABLE DATOS_PERSONALES;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 20----
DROP TABLE DATOS_ADMINISTRADOR;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 19----
DROP TABLE CARGO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 18----
DROP TABLE DATOS_SEGURIDAD;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 17----
DROP TABLE PREGUNTA_SEGURIDAD;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 16----
DROP TABLE TEMA_PREGUNTA;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 15----
DROP TABLE DATOS_ENTRENADOR;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 14----
DROP TABLE CONTRATO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 13----
DROP TABLE DATOS_PROGRAMADOR;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 12----
DROP TABLE DATOS_CONTACTO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 11----
DROP TABLE INVENTARIO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 10----
DROP TABLE SEDE;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 09----
DROP TABLE TIPO_CUENTA;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 08----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 07----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 05----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 05----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 04----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 03----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 02----
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
DROP TABLE PROGRAM;
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» BORRANDO TABLA 01----
DROP TABLE OBJETO;
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
	COMMIT TRAN Devolver
END TRY
BEGIN CATCH
		SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

--PROGRAM
CREATE PROC UPDATE_PROGRAM1
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FORMULARIO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PROGRAM 
SET  
FORMULARIO = @FORMULARIO
WHERE ID_PR = 1;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PROGRAM3
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CUENTA
SET  
RED = @RED,
GREEN = @GREEN,
BLUE = @BLUE,
RED1 = @RED1,
GREEN1 = @GREEN1,
BLUE1 = @BLUE1
WHERE ID_CUENTA = (SELECT ID_CUENTA FROM PROGRAM WHERE ID_PR = 1);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PROGRAM4
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@SONIDO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PROGRAM 
SET  
SONIDO = @SONIDO
WHERE ID_PR = 1;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PROGRAM6
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PROGRAM 
SET  
ID_CUENTA = @ID,
FMR_ANTERIOR = 0
WHERE ID_PR = 1;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PROGRAM7
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FOTO_PERFIL IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CUENTA
SET
FOTO_PERFIL = @FOTO_PERFIL
WHERE ID_CUENTA = (SELECT ID_CUENTA FROM PROGRAM WHERE ID_PR = 1);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PROGRAM8
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FORMULARIO BIGINT,
@FMR_ANTERIOR BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PROGRAM 
SET  
FORMULARIO = @FORMULARIO,
FMR_ANTERIOR = @FMR_ANTERIOR
WHERE ID_PR = 1;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PROGRAM9
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FMR_INICIO  BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PROGRAM 
SET  
@FMR_INICIO = @FMR_INICIO
WHERE ID_PR = 1;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC SELECT_PROGRAM
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT * FROM VIEW_PROGRAM
WHERE ID_PR = 1;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_PROGRAM1
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT 
FORMULARIO,
FMR_ANTERIOR,
FMR_INICIO
FROM VIEW_PROGRAM
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_PROGRAM2
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @CNTR VARCHAR(50), @NMBR VARCHAR(50);
SET @CNTR =
(SELECT 
DECRYPTBYPASSPHRASE('password',CONTRASEÑA)
FROM VIEW_PROGRAM)
SET @NMBR =
(SELECT 
NOMBRE_USUARIO
FROM VIEW_PROGRAM)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT 
@NMBR,
@CNTR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_PROGRAM3
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT 
RED,
GREEN,
BLUE,
RED1,
GREEN1,
BLUE1
FROM VIEW_PROGRAM
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_PROGRAM4
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT 
SONIDO
FROM VIEW_PROGRAM
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_PROGRAM5
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT 
USUARIO,	
ESTADO_CUENTA,
CORREO,
RED,
GREEN,
BLUE,
RED1,
GREEN1,
BLUE1,
FOTO_PERFIL
FROM VIEW_PROGRAM
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_PROGRAM6
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT 
NOMBRE_USUARIO,
CORREO,
NOMBRE,
ESTADO_CUENTA,
FOTO_PERFIL,
GENERO
FROM VIEW_PROGRAM
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_NOMBRE_USUARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_USUARIO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT * FROM CUENTA
WHERE (NOMBRE_USUARIO = @NOMBRE_USUARIO) OR (CORREO = @NOMBRE_USUARIO) OR (NOMBRE_USUARIO_ALTERNATIVO = @NOMBRE_USUARIO); 
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC AUTENTIFICAR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_USUARIO VARCHAR(50),
@CONTRASEÑA VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
SELECT 
*
FROM CUENTA
WHERE (NOMBRE_USUARIO = @NOMBRE_USUARIO AND DECRYPTBYPASSPHRASE('password',CONTRASEÑA) = @CONTRASEÑA) OR (CORREO = @NOMBRE_USUARIO AND DECRYPTBYPASSPHRASE('password',CONTRASEÑA) = @CONTRASEÑA) OR (NOMBRE_USUARIO_ALTERNATIVO = @NOMBRE_USUARIO AND DECRYPTBYPASSPHRASE('password',CONTRASEÑA) = @CONTRASEÑA); 
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
END
GO

CREATE PROC AUTENTIFICAR_MAYUS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
DECLARE @CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@CORREO VARCHAR(50);
SET @CONTRASEÑA = (SELECT DECRYPTBYPASSPHRASE('password',CONTRASEÑA) FROM CUENTA WHERE ID_CUENTA = @ID);
SET @NOMBRE_USUARIO = (SELECT NOMBRE_USUARIO FROM CUENTA WHERE ID_CUENTA = @ID);
SET @NOMBRE_USUARIO_ALTERNATIVO = (SELECT NOMBRE_USUARIO_ALTERNATIVO FROM CUENTA WHERE ID_CUENTA = @ID);
SET @CORREO = (SELECT CORREO FROM CUENTA WHERE ID_CUENTA = @ID);
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
SELECT
@CONTRASEÑA,
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
@CORREO 
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
END
GO

CREATE PROC OBTENER_DATOS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver

BEGIN
	DECLARE @CUENTA BIGINT

	SET @CUENTA = (SELECT ID_TIPO_CUENTA FROM CUENTA
		WHERE ID_CUENTA = @ID);
		END

BEGIN
	EXECUTE UPDATE_PROGRAM6 @ID;
END

BEGIN
	IF (@CUENTA = 1 OR @CUENTA = 2)
		BEGIN
			EXECUTE UPDATE_PROGRAM1 1;
			EXECUTE UPDATE_PROGRAM9 1;
		END
	ELSE IF(@CUENTA = 3)
		BEGIN
			EXECUTE UPDATE_PROGRAM1 1;
			EXECUTE UPDATE_PROGRAM9 1;
		END
	ELSE IF(@CUENTA = 4)
		BEGIN
			EXECUTE UPDATE_PROGRAM1 1;
			EXECUTE UPDATE_PROGRAM9 1;
		END
	ELSE IF(@CUENTA = 5)
		BEGIN
			EXECUTE UPDATE_PROGRAM1 1;
			EXECUTE UPDATE_PROGRAM9 1;
		END
END
	COMMIT TRAN Devolver
END TRY
BEGIN CATCH
		SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

--OBJETO
CREATE PROC INSERT_OBJETO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_OBJETO VARCHAR(50),
@DESCRIPCION_OBJETO VARCHAR(MAX),
@VALOR_APROXIMADO_OBJETO MONEY,
@IMAGEN_OBJETO IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO OBJETO 
VALUES
(UPPER(@NOMBRE_OBJETO), 
@DESCRIPCION_OBJETO, 
@VALOR_APROXIMADO_OBJETO,
GETDATE(),
@IMAGEN_OBJETO,
'ACTIVADO');
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_OBJETO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,
@NOMBRE_OBJETO VARCHAR(50),
@DESCRIPCION_OBJETO VARCHAR(MAX),
@VALOR_APROXIMADO_OBJETO MONEY,
@IMAGEN_OBJETO IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE OBJETO 
SET  
NOMBRE_OBJETO = UPPER(@NOMBRE_OBJETO),
DESCRIPCION_OBJETO = @DESCRIPCION_OBJETO,
VALOR_APROXIMADO_OBJETO = @VALOR_APROXIMADO_OBJETO,
FECHA_REGISTRO_OBJETO = GETDATE(),
IMAGEN_OBJETO = @IMAGEN_OBJETO
WHERE ID_OBJETO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_OBJETO_DESCRIPCION
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_OBJETO BIGINT,
@DESCRIPCION_OBJETO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE OBJETO 
SET  
DESCRIPCION_OBJETO = @DESCRIPCION_OBJETO,
FECHA_REGISTRO_OBJETO = GETDATE()
WHERE ID_OBJETO = @ID_OBJETO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_OBJETO_VALOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_OBJETO BIGINT,
@VALOR_APROXIMADO_OBJETO MONEY)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE OBJETO 
SET  
VALOR_APROXIMADO_OBJETO = @VALOR_APROXIMADO_OBJETO,
FECHA_REGISTRO_OBJETO = GETDATE()
WHERE ID_OBJETO = @ID_OBJETO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_OBJETO_IMAGEN
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_OBJETO BIGINT,
@IMAGEN_OBJETO IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE OBJETO 
SET  
IMAGEN_OBJETO = @IMAGEN_OBJETO,
FECHA_REGISTRO_OBJETO = GETDATE()
WHERE ID_OBJETO = @ID_OBJETO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC RECICLAR_OBJETO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE OBJETO 
SET  
ESTADO = 'DESACTIVADO',
FECHA_REGISTRO_OBJETO = GETDATE()
WHERE ID_OBJETO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC RECUPERAR_OBJETO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE OBJETO 
SET  
ESTADO = 'ACTIVADO',
FECHA_REGISTRO_OBJETO = GETDATE()
WHERE ID_OBJETO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_OBJETO_TDESCRIPCION
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@DESCRIPCION_OBJETO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE OBJETO 
SET  
DESCRIPCION_OBJETO = @DESCRIPCION_OBJETO,
FECHA_REGISTRO_OBJETO = GETDATE()
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_OBJETO_TVALOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@VALOR_APROXIMADO_OBJETO MONEY)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE OBJETO 
SET  
VALOR_APROXIMADO_OBJETO = @VALOR_APROXIMADO_OBJETO,
FECHA_REGISTRO_OBJETO = GETDATE()
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_OBJETO_TIMAGEN
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@IMAGEN_OBJETO IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE OBJETO 
SET  
IMAGEN_OBJETO = @IMAGEN_OBJETO,
FECHA_REGISTRO_OBJETO = GETDATE()
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC RECICLAR_TOBJETO
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE OBJETO 
SET  
ESTADO = 'DESACTIVADO',
FECHA_REGISTRO_OBJETO = GETDATE()
WHERE ESTADO = 'ACTIVADO';
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC RECUPERAR_TOBJETO
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE OBJETO 
SET  
ESTADO = 'ACTIVADO',
FECHA_REGISTRO_OBJETO = GETDATE()
WHERE ESTADO = 'DESACTIVADO';
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_OBJETO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE 
FROM OBJETO
WHERE ID_OBJETO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TROBJETO
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE 
FROM OBJETO
WHERE ESTADO = 'DESACTIVADO';
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TOBJETO
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE OBJETO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_OBJETOT
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_OBJETO VARCHAR(50), @FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_OBJETO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_OBJETO
WHERE (Objeto LIKE @NAME OR precio_estimado LIKE @NAME OR Descripción LIKE @NAME OR Descripción LIKE @NAME) AND Fecha_de_Actualización >= @FECHA
ORDER BY Fecha_de_Actualización DESC;
END
GO

CREATE PROC LIKE_OBJETOTT
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_OBJETO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_OBJETO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_OBJETO
WHERE (Objeto LIKE @NAME OR precio_estimado LIKE @NAME OR Descripción LIKE @NAME) 
END
GO

CREATE PROC LIKE_OBJETON
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_OBJETO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_OBJETO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_OBJETO
WHERE Objeto LIKE @NAME;
END
GO

CREATE PROC LIKE_OBJETOP
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_OBJETO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_OBJETO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_OBJETO
WHERE precio_estimado LIKE @NAME;
END
GO

CREATE PROC LIKE_OBJETOD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_OBJETO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_OBJETO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_OBJETO
WHERE Descripción LIKE @NAME;
END
GO

CREATE PROC LIKE_OBJETOF
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_OBJETO
WHERE Fecha_de_Actualización >= @FECHA
ORDER BY Fecha_de_Actualización DESC;
END
GO

CREATE PROC SELECT_OBJETO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_OBJETO
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_OBJETO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_OBJETO;
END
GO

CREATE PROC LIKE_ROBJETOT
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_OBJETO VARCHAR(50), @FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_OBJETO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_OBJETO_D
WHERE (Objeto LIKE @NAME OR precio_estimado LIKE @NAME OR Descripción LIKE @NAME OR Descripción LIKE @NAME) AND Fecha_de_reciclado >= @FECHA
ORDER BY Fecha_de_reciclado DESC;
END
GO

CREATE PROC LIKE_ROBJETOTT
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_OBJETO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_OBJETO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_OBJETO_D
WHERE (Objeto LIKE @NAME OR precio_estimado LIKE @NAME OR Descripción LIKE @NAME) 
END
GO

CREATE PROC LIKE_ROBJETON
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_OBJETO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_OBJETO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_OBJETO_D
WHERE Objeto LIKE @NAME;
END
GO

CREATE PROC LIKE_ROBJETOP
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_OBJETO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_OBJETO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_OBJETO_D
WHERE precio_estimado LIKE @NAME;
END
GO

CREATE PROC LIKE_ROBJETOD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_OBJETO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_OBJETO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_OBJETO_D
WHERE Descripción LIKE @NAME;
END
GO

CREATE PROC LIKE_ROBJETOF
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_OBJETO_D
WHERE Fecha_de_reciclado >= @FECHA
ORDER BY Fecha_de_reciclado DESC;
END
GO

CREATE PROC SELECT_ROBJETO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_OBJETO_D
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_ROBJETO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_OBJETO_D;
END
GO

CREATE PROC TSELECT_GRAFICAR_OBJETO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT Objeto, precio_estimado
FROM VIEW_OBJETO;
END
GO

--TIPO_EVENTO
CREATE PROC INSERT_TIPO_EVENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_TIPO_EVENTO VARCHAR(50),
@DESCRIPCION_TIPO_EVENTO VARCHAR(MAX),
@IMAGEN_TIPO_EVENTO IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO TIPO_EVENTO 
VALUES
(UPPER(@NOMBRE_TIPO_EVENTO), 
@DESCRIPCION_TIPO_EVENTO, 
@IMAGEN_TIPO_EVENTO);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_EVENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,
@NOMBRE_TIPO_EVENTO VARCHAR(50),
@DESCRIPCION_TIPO_EVENTO VARCHAR(MAX),
@IMAGEN_TIPO_EVENTO IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TIPO_EVENTO 
SET  
NOMBRE_TIPO_EVENTO = UPPER(@NOMBRE_TIPO_EVENTO),
DESCRIPCION_TIPO_EVENTO = @DESCRIPCION_TIPO_EVENTO,
IMAGEN_TIPO_EVENTO = @IMAGEN_TIPO_EVENTO
WHERE ID_TIPO_EVENTO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_EVENTO_DESCRIPCION
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TIPO_EVENTO BIGINT,
@DESCRIPCION_TIPO_EVENTO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TIPO_EVENTO 
SET  
DESCRIPCION_TIPO_EVENTO = @DESCRIPCION_TIPO_EVENTO
WHERE ID_TIPO_EVENTO = @ID_TIPO_EVENTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_EVENTO_IMAGEN
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TIPO_EVENTO BIGINT,
@IMAGEN_TIPO_EVENTO IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TIPO_EVENTO 
SET  
IMAGEN_TIPO_EVENTO = @IMAGEN_TIPO_EVENTO
WHERE ID_TIPO_EVENTO = @ID_TIPO_EVENTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_EVENTO_TDESCRIPCION
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@DESCRIPCION_TIPO_EVENTO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TIPO_EVENTO 
SET  
DESCRIPCION_TIPO_EVENTO = @DESCRIPCION_TIPO_EVENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_EVENTO_TIMAGEN
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@IMAGEN_TIPO_EVENTO IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TIPO_EVENTO
SET  
IMAGEN_TIPO_EVENTO = @IMAGEN_TIPO_EVENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TIPO_EVENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE 
FROM TIPO_EVENTO
WHERE ID_TIPO_EVENTO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TTIPO_EVENTO
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE TIPO_EVENTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_TIPO_EVENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_TIPO_EVENTO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_TIPO_EVENTO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_TIPO_EVENTO
WHERE Tipo_evento LIKE @NAME;
END
GO

CREATE PROC SELECT_TIPO_EVENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_TIPO_EVENTO
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_TIPO_EVENTO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_TIPO_EVENTO;
END
GO

--CREDITOS_ENTRENAMIENTO_REQUERIDOS
CREATE PROC INSERT_CREDITOS_ENTRENAMIENTO_REQUERIDOS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@N_CREDITOS_ENTRENAMIENTO_REQUERIDOS INT,
@FECHA_INICIO_CONTEO DATE,
@FECHA_FINALIZACION_CONTEO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO CREDITOS_ENTRENAMIENTO_REQUERIDOS 
VALUES
(@N_CREDITOS_ENTRENAMIENTO_REQUERIDOS,
@FECHA_INICIO_CONTEO,
@FECHA_FINALIZACION_CONTEO);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CREDITOS_ENTRENAMIENTO_REQUERIDOS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,
@N_CREDITOS_ENTRENAMIENTO_REQUERIDOS INT,
@FECHA_INICIO_CONTEO DATE,
@FECHA_FINALIZACION_CONTEO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CREDITOS_ENTRENAMIENTO_REQUERIDOS 
SET  
N_CREDITOS_ENTRENAMIENTO_REQUERIDOS = @N_CREDITOS_ENTRENAMIENTO_REQUERIDOS,
FECHA_INICIO_CONTEO = @FECHA_INICIO_CONTEO,
FECHA_FINALIZACION_CONTEO = @FECHA_FINALIZACION_CONTEO
WHERE ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CREDITOS_ENTRENAMIENTO_REQUERIDOS_N_CREDITOS_ENTRENAMIENTO_REQUERIDOS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS BIGINT,
@N_CREDITOS_ENTRENAMIENTO_REQUERIDOS INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CREDITOS_ENTRENAMIENTO_REQUERIDOS 
SET  
N_CREDITOS_ENTRENAMIENTO_REQUERIDOS = @N_CREDITOS_ENTRENAMIENTO_REQUERIDOS
WHERE ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS = @ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CREDITOS_ENTRENAMIENTO_REQUERIDOS_FECHA_INICIO_CONTEO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS BIGINT,
@FECHA_INICIO_CONTEO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CREDITOS_ENTRENAMIENTO_REQUERIDOS 
SET  
FECHA_INICIO_CONTEO = @FECHA_INICIO_CONTEO
WHERE ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS = @ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CREDITOS_ENTRENAMIENTO_REQUERIDOS_FINALIZACION_CONTEO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS BIGINT,
@FECHA_FINALIZACION_CONTEO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CREDITOS_ENTRENAMIENTO_REQUERIDOS 
SET  
FECHA_FINALIZACION_CONTEO = @FECHA_FINALIZACION_CONTEO
WHERE ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS = @ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CREDITOS_ENTRENAMIENTO_REQUERIDOS_TN_CREDITOS_ENTRENAMIENTO_REQUERIDOS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@N_CREDITOS_ENTRENAMIENTO_REQUERIDOS INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CREDITOS_ENTRENAMIENTO_REQUERIDOS 
SET  
N_CREDITOS_ENTRENAMIENTO_REQUERIDOS = @N_CREDITOS_ENTRENAMIENTO_REQUERIDOS
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CREDITOS_ENTRENAMIENTO_REQUERIDOS_TFECHA_INICIO_CONTEO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FECHA_INICIO_CONTEO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CREDITOS_ENTRENAMIENTO_REQUERIDOS 
SET  
FECHA_INICIO_CONTEO = @FECHA_INICIO_CONTEO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CREDITOS_ENTRENAMIENTO_REQUERIDOS_TFECHA_FINALIZACION_CONTEO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FECHA_FINALIZACION_CONTEO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CREDITOS_ENTRENAMIENTO_REQUERIDOS 
SET  
FECHA_FINALIZACION_CONTEO = @FECHA_FINALIZACION_CONTEO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_CREDITOS_ENTRENAMIENTO_REQUERIDOS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE 
FROM CREDITOS_ENTRENAMIENTO_REQUERIDOS
WHERE ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TCREDITOS_ENTRENAMIENTO_REQUERIDOS
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE CREDITOS_ENTRENAMIENTO_REQUERIDOS;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_CREDITOS_ENTRENAMIENTO_REQUERIDOS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@INICIO DATE, @FIN DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CREDITOS_ENTRENAMIENTO_REQUERIDOS
WHERE Fecha_inicio < @INICIO and Fecha_inicio >@FIN;
END
GO

CREATE PROC SELECT_CREDITOS_ENTRENAMIENTO_REQUERIDOS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CREDITOS_ENTRENAMIENTO_REQUERIDOS
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_CREDITOS_ENTRENAMIENTO_REQUERIDOS
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CREDITOS_ENTRENAMIENTO_REQUERIDOS;
END
GO

--TIPO_EVENTO
CREATE PROC INSERT_REQUISITOS_EVENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS BIGINT,
@REQUIERE_CERTIFICADO_MEDICO VARCHAR(10),
@REQUIERE_PAZ_Y_SALVO VARCHAR(10),
@REQUIERE_DOCUMENTO_ID VARCHAR(10),
@REQUIERE_CANCELAR_VALOR_EVENTO VARCHAR(10),
@REQUIERE_PERMISO_ACUDIENTE VARCHAR(10))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO REQUISITOS_EVENTO
VALUES
(@ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS,
UPPER(@REQUIERE_CERTIFICADO_MEDICO),
UPPER(@REQUIERE_PAZ_Y_SALVO),
UPPER(@REQUIERE_DOCUMENTO_ID),
UPPER(@REQUIERE_CANCELAR_VALOR_EVENTO),
UPPER(@REQUIERE_PERMISO_ACUDIENTE));
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_REQUISITOS_EVENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,
@ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS BIGINT,
@REQUIERE_CERTIFICADO_MEDICO VARCHAR(10),
@REQUIERE_PAZ_Y_SALVO VARCHAR(10),
@REQUIERE_DOCUMENTO_ID VARCHAR(10),
@REQUIERE_CANCELAR_VALOR_EVENTO VARCHAR(10),
@REQUIERE_PERMISO_ACUDIENTE VARCHAR(10))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE REQUISITOS_EVENTO 
SET  
ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS = @ID_CREDITOS_ENTRENAMIENTO_REQUERIDOS,
REQUIERE_CERTIFICADO_MEDICO = UPPER(@REQUIERE_CERTIFICADO_MEDICO),
REQUIERE_PAZ_Y_SALVO = UPPER(@REQUIERE_PAZ_Y_SALVO),
REQUIERE_DOCUMENTO_ID = UPPER(@REQUIERE_DOCUMENTO_ID),
REQUIERE_CANCELAR_VALOR_EVENTO = UPPER(@REQUIERE_CANCELAR_VALOR_EVENTO),
REQUIERE_PERMISO_ACUDIENTE = UPPER(@REQUIERE_PERMISO_ACUDIENTE)
WHERE ID_REQUISITOS_EVENTO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_REQUISITOS_EVENTO_REQUIERE_CERTIFICADO_MEDICO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_REQUISITOS_EVENTO BIGINT,
@REQUIERE_CERTIFICADO_MEDICO VARCHAR(10))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE REQUISITOS_EVENTO 
SET  
REQUIERE_CERTIFICADO_MEDICO = @REQUIERE_CERTIFICADO_MEDICO
WHERE ID_REQUISITOS_EVENTO = @ID_REQUISITOS_EVENTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_REQUISITOS_EVENTO_REQUIERE_PAZ_Y_SALVO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_REQUISITOS_EVENTO BIGINT,
@REQUIERE_PAZ_Y_SALVO VARCHAR(10))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE REQUISITOS_EVENTO 
SET  
REQUIERE_PAZ_Y_SALVO = @REQUIERE_PAZ_Y_SALVO
WHERE ID_REQUISITOS_EVENTO = @ID_REQUISITOS_EVENTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_REQUISITOS_EVENTO_REQUIERE_DOCUMENTO_ID
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_REQUISITOS_EVENTO BIGINT,
@REQUIERE_DOCUMENTO_ID VARCHAR(10))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE REQUISITOS_EVENTO 
SET  
REQUIERE_DOCUMENTO_ID = @REQUIERE_DOCUMENTO_ID
WHERE ID_REQUISITOS_EVENTO = @ID_REQUISITOS_EVENTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_REQUISITOS_EVENTO_REQUIERE_CANCELAR_VALOR_EVENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_REQUISITOS_EVENTO BIGINT,
@REQUIERE_CANCELAR_VALOR_EVENTO VARCHAR(10))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE REQUISITOS_EVENTO 
SET  
REQUIERE_CANCELAR_VALOR_EVENTO = @REQUIERE_CANCELAR_VALOR_EVENTO
WHERE ID_REQUISITOS_EVENTO = @ID_REQUISITOS_EVENTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_REQUISITOS_EVENTO_REQUIERE_PERMISO_ACUDIENTE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_REQUISITOS_EVENTO BIGINT,
@REQUIERE_PERMISO_ACUDIENTE VARCHAR(10))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE REQUISITOS_EVENTO 
SET  
REQUIERE_PERMISO_ACUDIENTE = @REQUIERE_PERMISO_ACUDIENTE
WHERE ID_REQUISITOS_EVENTO = @ID_REQUISITOS_EVENTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_REQUISITOS_EVENTO_TREQUIERE_CERTIFICADO_MEDICO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@REQUIERE_CERTIFICADO_MEDICO VARCHAR(10))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE REQUISITOS_EVENTO 
SET  
REQUIERE_CERTIFICADO_MEDICO = @REQUIERE_CERTIFICADO_MEDICO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_REQUISITOS_EVENTO_TREQUIERE_PAZ_Y_SALVO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@REQUIERE_PAZ_Y_SALVO VARCHAR(10))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE REQUISITOS_EVENTO 
SET  
REQUIERE_PAZ_Y_SALVO = @REQUIERE_PAZ_Y_SALVO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_REQUISITOS_EVENTO_TREQUIERE_DOCUMENTO_ID
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@REQUIERE_DOCUMENTO_ID VARCHAR(10))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE REQUISITOS_EVENTO 
SET  
REQUIERE_DOCUMENTO_ID = @REQUIERE_DOCUMENTO_ID
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_REQUISITOS_EVENTO_TREQUIERE_CANCELAR_VALOR_EVENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@REQUIERE_CANCELAR_VALOR_EVENTO VARCHAR(10))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE REQUISITOS_EVENTO 
SET  
REQUIERE_CANCELAR_VALOR_EVENTO = @REQUIERE_CANCELAR_VALOR_EVENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_REQUISITOS_EVENTO_TREQUIERE_PERMISO_ACUDIENTE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@REQUIERE_PERMISO_ACUDIENTE VARCHAR(10))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE REQUISITOS_EVENTO 
SET  
REQUIERE_PERMISO_ACUDIENTE = @REQUIERE_PERMISO_ACUDIENTE
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_REQUISITOS_EVENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE 
FROM REQUISITOS_EVENTO
WHERE ID_REQUISITOS_EVENTO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TREQUISITOS_EVENTO
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE REQUISITOS_EVENTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC SELECT_REQUISITOS_EVENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_REQUISITOS_EVENTO
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_REQUISITOS_EVENTO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_REQUISITOS_EVENTO;
END
GO

--PLANEACION_CLASES
CREATE PROC INSERT_PLANEACION_CLASES
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_ENTRENADOR BIGINT,
@DOCUMENTO_PLANEACION VARCHAR(MAX),
@FECHA_INICIO DATE,
@FECHA_TERMINACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO PLANEACION_CLASES 
VALUES
(@ID_ENTRENADOR, 
@DOCUMENTO_PLANEACION, 
@FECHA_INICIO,
@FECHA_TERMINACION);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PLANEACION_CLASES
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,
@ID_ENTRENADOR BIGINT,
@DOCUMENTO_PLANEACION VARCHAR(MAX),
@FECHA_INICIO DATE,
@FECHA_TERMINACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PLANEACION_CLASES 
SET  
ID_ENTRENADOR = @ID_ENTRENADOR,
DOCUMENTO_PLANEACION = @DOCUMENTO_PLANEACION,
FECHA_INICIO = @FECHA_INICIO,
FECHA_TERMINACION = @FECHA_TERMINACION
WHERE ID_PLANEACION_CLASES = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PLANEACION_CLASES_DOCUMENTO_PLANEACION
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_PLANEACION_CLASES BIGINT,
@DOCUMENTO_PLANEACION VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PLANEACION_CLASES
SET  
DOCUMENTO_PLANEACION = @DOCUMENTO_PLANEACION
WHERE ID_PLANEACION_CLASES = @ID_PLANEACION_CLASES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PLANEACION_CLASES_FECHA_INICIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_PLANEACION_CLASES BIGINT,
@FECHA_INICIO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PLANEACION_CLASES 
SET  
FECHA_INICIO = @FECHA_INICIO
WHERE ID_PLANEACION_CLASES = @ID_PLANEACION_CLASES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PLANEACION_CLASES_FECHA_TERMINACION
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_PLANEACION_CLASES BIGINT,
@FECHA_TERMINACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE FECHA_TERMINACION 
SET  
FECHA_TERMINACION = @FECHA_TERMINACION
WHERE ID_PLANEACION_CLASES = @ID_PLANEACION_CLASES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PLANEACION_CLASES_TDOCUMENTO_PLANEACION
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@DOCUMENTO_PLANEACION VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PLANEACION_CLASES 
SET  
DOCUMENTO_PLANEACION = @DOCUMENTO_PLANEACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PLANEACION_CLASES_TFECHA_INICIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FECHA_INICIO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PLANEACION_CLASES 
SET  
FECHA_INICIO = @FECHA_INICIO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PLANEACION_CLASES_TFECHA_TERMINACION
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FECHA_TERMINACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PLANEACION_CLASES 
SET  
FECHA_TERMINACION = @FECHA_TERMINACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_PLANEACION_CLASES
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE 
FROM PLANEACION_CLASES
WHERE ID_PLANEACION_CLASES = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TPLANEACION_CLASES
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE PLANEACION_CLASES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_PLANEACION_CLASES
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@INICIO DATE, @FIN DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_PLANEACION_CLASES
WHERE Fecha_inicio < @INICIO and Fecha_inicio >@FIN;
END
GO

CREATE PROC SELECT_PLANEACION_CLASES
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_PLANEACION_CLASES
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_PLANEACION_CLASES
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_PLANEACION_CLASES;
END
GO

--TIPO_CUENTA
CREATE PROC INSERT_TIPO_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@PERMISOS_TIPO_CUENTA VARCHAR(50),
@NOMBRE_TIPO_CUENTA VARCHAR(50),
@LIMITE_USUARIOS BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN 
INSERT INTO TIPO_CUENTA
VALUES (UPPER(@PERMISOS_TIPO_CUENTA), 
UPPER(@NOMBRE_TIPO_CUENTA), 
@LIMITE_USUARIOS,
'ACTIVADO')
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,
@PERMISOS_TIPO_CUENTA VARCHAR(50),
@NOMBRE_TIPO_CUENTA VARCHAR(50),
@LIMITE_USUARIOS BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN 
UPDATE TIPO_CUENTA
SET
PERMISOS_TIPO_CUENTA = @PERMISOS_TIPO_CUENTA,
NOMBRE_TIPO_CUENTA = @NOMBRE_TIPO_CUENTA,
LIMITE_USUARIOS = @LIMITE_USUARIOS
WHERE ID_TIPO_CUENTA = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_CUENTA_LIMITE_USUARIOS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TIPO_CUENTA BIGINT,
@LIMITE_USUARIOS BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TIPO_CUENTA
SET  
LIMITE_USUARIOS = @LIMITE_USUARIOS
WHERE ID_TIPO_CUENTA = @ID_TIPO_CUENTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_CUENTA_PERMISOS_TIPO_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TIPO_CUENTA BIGINT,
@PERMISOS_TIPO_CUENTA VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TIPO_CUENTA
SET  
PERMISOS_TIPO_CUENTA = UPPER(@PERMISOS_TIPO_CUENTA)
WHERE ID_TIPO_CUENTA = @ID_TIPO_CUENTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_CUENTA_TLIMITE_USUARIOS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@LIMITE_USUARIOS BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TIPO_CUENTA
SET  
LIMITE_USUARIOS = @LIMITE_USUARIOS
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_CUENTA_TPERMISOS_TIPO_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@PERMISOS_TIPO_CUENTA VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TIPO_CUENTA
SET  
PERMISOS_TIPO_CUENTA = UPPER(@PERMISOS_TIPO_CUENTA)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TIPO_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE TIPO_CUENTA
WHERE ID_TIPO_CUENTA = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TTIPO_CUENTA
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE TIPO_CUENTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_TIPO_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_TIPO_CUENTA VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_TIPO_CUENTA)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_TIPO_CUENTA
WHERE Cuenta LIKE @NAME;
END
GO

CREATE PROC SELECT_TIPO_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT * 
FROM VIEW_TIPO_CUENTA
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_TIPO_CUENTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_TIPO_CUENTA;
END
GO

CREATE PROC TSELECT_GRAFICAR_TIPO_CUENTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT Cuenta, Usuarios_soportados
FROM VIEW_TIPO_CUENTA;
END
GO

--SEDE
CREATE PROC INSERT_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_SEDE VARCHAR(50),
@PAIS_SEDE VARCHAR(50),
@DEPARTAMENTO_SEDE VARCHAR(50),
@MUNICIPIO_SEDE VARCHAR(50),
@DIRECCION_SEDE VARCHAR(50),
@FECHA_FUNDACION_SEDE DATE,
@IMAGEN_SEDE IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO SEDE
VALUES
(UPPER(@NOMBRE_SEDE), 
UPPER(@PAIS_SEDE),
UPPER(@DEPARTAMENTO_SEDE),
UPPER(@MUNICIPIO_SEDE),
UPPER(@DIRECCION_SEDE),
@FECHA_FUNDACION_SEDE,
@IMAGEN_SEDE,
'ACTIVADO');
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@NOMBRE_SEDE VARCHAR(50),
@PAIS_SEDE VARCHAR(50),
@DEPARTAMENTO_SEDE VARCHAR(50),
@MUNICIPIO_SEDE VARCHAR(50),
@DIRECCION_SEDE VARCHAR(50),
@FECHA_FUNDACION_SEDE DATE,
@IMAGEN_SEDE IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE SEDE
SET
NOMBRE_SEDE = UPPER(@NOMBRE_SEDE), 
PAIS_SEDE = UPPER(@PAIS_SEDE),
DEPARTAMENTO_SEDE = UPPER(@DEPARTAMENTO_SEDE),
MUNICIPIO_SEDE = UPPER(@MUNICIPIO_SEDE),
DIRECCION_SEDE = UPPER(@DIRECCION_SEDE),
FECHA_FUNDACION_SEDE = @FECHA_FUNDACION_SEDE,
IMAGEN_SEDE = @IMAGEN_SEDE
WHERE ID_SEDE = @ID_SEDE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_SEDE_PAIS_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@PAIS_SEDE VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE SEDE
SET  
PAIS_SEDE = UPPER(@PAIS_SEDE)
WHERE ID_SEDE = @ID_SEDE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_SEDE_DEPARTAMENTO_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@DEPARTAMENTO_SEDE VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE SEDE
SET  
DEPARTAMENTO_SEDE = UPPER(@DEPARTAMENTO_SEDE)
WHERE ID_SEDE = @ID_SEDE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_SEDE_MUNICIPIO_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@MUNICIPIO_SEDE VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE SEDE
SET  
MUNICIPIO_SEDE = UPPER(@MUNICIPIO_SEDE)
WHERE ID_SEDE = @ID_SEDE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_SEDE_DIRECCION_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@DIRECCION_SEDE VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE SEDE
SET  
DIRECCION_SEDE = UPPER(@DIRECCION_SEDE)
WHERE ID_SEDE = @ID_SEDE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_SEDE_FECHA_FUNDACION_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@FECHA_FUNDACION_SEDE DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE SEDE
SET  
FECHA_FUNDACION_SEDE = @FECHA_FUNDACION_SEDE
WHERE ID_SEDE = @ID_SEDE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_SEDE_IMAGEN_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@IMAGEN_SEDE IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE SEDE
SET  
IMAGEN_SEDE = @IMAGEN_SEDE
WHERE ID_SEDE = @ID_SEDE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_SEDE_TPAIS_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@PAIS_SEDE VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE SEDE
SET  
PAIS_SEDE = UPPER(@PAIS_SEDE)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_SEDE_TDEPARTAMENTO_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@DEPARTAMENTO_SEDE VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE SEDE
SET  
DEPARTAMENTO_SEDE = UPPER(@DEPARTAMENTO_SEDE)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_SEDE_TMUNICIPIO_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@MUNICIPIO_SEDE VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE SEDE
SET  
MUNICIPIO_SEDE = UPPER(@MUNICIPIO_SEDE)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_SEDE_TDIRECCION_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@DIRECCION_SEDE VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE SEDE
SET  
DIRECCION_SEDE = UPPER(@DIRECCION_SEDE)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_SEDE_FECHA_TFUNDACION_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FECHA_FUNDACION_SEDE DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE SEDE
SET  
FECHA_FUNDACION_SEDE = @FECHA_FUNDACION_SEDE
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_SEDE_TIMAGEN_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@IMAGEN_SEDE IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE SEDE
SET  
IMAGEN_SEDE = @IMAGEN_SEDE
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE SEDE
WHERE ID_SEDE = @ID_SEDE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TSEDE
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE SEDE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_SEDE VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_SEDE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_SEDE
WHERE Sede LIKE @NAME;
END
GO

CREATE PROC SELECT_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_SEDE
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_SEDE
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_SEDE;
END
GO

--INVENTARIO
CREATE PROC INSERT_INVENTARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@ID_OBJETO BIGINT,
@CANTIDAD_OBJETO_SEDE INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO INVENTARIO
VALUES
(@ID_SEDE, 
@ID_OBJETO,
@CANTIDAD_OBJETO_SEDE,
GETDATE(),
'ACTIVADO');
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_INVENTARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_INVENTARIO BIGINT,
@ID_SEDE BIGINT,
@ID_OBJETO BIGINT,
@CANTIDAD_OBJETO_SEDE INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE INVENTARIO
SET
ID_SEDE = @ID_SEDE,
ID_OBJETO = @ID_OBJETO,
CANTIDAD_OBJETO_SEDE = @CANTIDAD_OBJETO_SEDE,
FECHA_ACTUALIZACION_INVENTARIO = GETDATE()
WHERE ID_INVENTARIO = @ID_INVENTARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_INVENTARIO_ID_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_INVENTARIO BIGINT,
@ID_SEDE BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE INVENTARIO
SET  
ID_SEDE = @ID_SEDE,
FECHA_ACTUALIZACION_INVENTARIO = GETDATE()
WHERE ID_INVENTARIO = @ID_INVENTARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_INVENTARIO_ID_OBJETO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_INVENTARIO BIGINT,
@ID_OBJETO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE INVENTARIO
SET  
ID_OBJETO = @ID_OBJETO,
FECHA_ACTUALIZACION_INVENTARIO = GETDATE()
WHERE ID_INVENTARIO = @ID_INVENTARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_INVENTARIO_CANTIDAD_OBJETO_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_INVENTARIO BIGINT,
@CANTIDAD_OBJETO_SEDE INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE INVENTARIO
SET  
CANTIDAD_OBJETO_SEDE = @CANTIDAD_OBJETO_SEDE,
FECHA_ACTUALIZACION_INVENTARIO = GETDATE()
WHERE ID_INVENTARIO = @ID_INVENTARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_INVENTARIO_TID_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE INVENTARIO
SET  
ID_SEDE = @ID_SEDE,
FECHA_ACTUALIZACION_INVENTARIO = GETDATE()
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_INVENTARIO_TID_OBJETO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_OBJETO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE INVENTARIO
SET  
ID_OBJETO = @ID_OBJETO,
FECHA_ACTUALIZACION_INVENTARIO = GETDATE()
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_INVENTARIO_TCANTIDAD_OBJETO_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@CANTIDAD_OBJETO_SEDE INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE INVENTARIO
SET  
CANTIDAD_OBJETO_SEDE = @CANTIDAD_OBJETO_SEDE,
FECHA_ACTUALIZACION_INVENTARIO = GETDATE()
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH

GO

CREATE PROC DELETE_INVENTARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_INVENTARIO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE INVENTARIO
WHERE ID_INVENTARIO = @ID_INVENTARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TINVENTARIO
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE INVENTARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_INVENTARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_OBJETO VARCHAR(50), 
@SEDE VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
DECLARE @SED VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_OBJETO)+'%'
SET @SED = '%'+UPPER(@SEDE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_INVENTARIO
WHERE Objeto LIKE @NAME AND Sede LIKE @SED;
END
GO

CREATE PROC SELECT_INVENTARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_INVENTARIO
WHERE Objeto = @ID;
END
GO

CREATE PROC TSELECT_INVENTARIO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_INVENTARIO;
END
GO

CREATE PROC TSELECT_GRAFICAR_INVENTARIO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT Objeto, Valor_total_estimado
FROM VIEW_INVENTARIO;
END
GO

--TEMA_PREGUNTA
CREATE PROC INSERT_TEMA_PREGUNTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_TEMA_PREGUNTA VARCHAR(50),
@EDAD_MINIMA_TEMA_PREGUNTA INT,
@EDAD_MAXIMA_TEMA_PREGUNTA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO TEMA_PREGUNTA
VALUES
(UPPER(@NOMBRE_TEMA_PREGUNTA), 
@EDAD_MINIMA_TEMA_PREGUNTA,
@EDAD_MAXIMA_TEMA_PREGUNTA,
'ACTIVADO');
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TEMA_PREGUNTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TEMA_PREGUNTA BIGINT,
@NOMBRE_TEMA_PREGUNTA VARCHAR(50),
@EDAD_MINIMA_TEMA_PREGUNTA INT,
@EDAD_MAXIMA_TEMA_PREGUNTA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TEMA_PREGUNTA
SET
NOMBRE_TEMA_PREGUNTA = UPPER(@NOMBRE_TEMA_PREGUNTA),
EDAD_MINIMA_TEMA_PREGUNTA = @EDAD_MINIMA_TEMA_PREGUNTA,
EDAD_MAXIMA_TEMA_PREGUNTA = @EDAD_MAXIMA_TEMA_PREGUNTA
WHERE ID_TEMA_PREGUNTA = @ID_TEMA_PREGUNTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TEMA_PREGUNTA_EDAD_MINIMA_TEMA_PREGUNTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TEMA_PREGUNTA BIGINT,
@EDAD_MINIMA_TEMA_PREGUNTA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TEMA_PREGUNTA
SET  
EDAD_MINIMA_TEMA_PREGUNTA = @EDAD_MINIMA_TEMA_PREGUNTA
WHERE ID_TEMA_PREGUNTA = @ID_TEMA_PREGUNTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TEMA_PREGUNTA_EDAD_MAXIMA_TEMA_PREGUNTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TEMA_PREGUNTA BIGINT,
@EDAD_MAXIMA_TEMA_PREGUNTA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TEMA_PREGUNTA
SET  
EDAD_MAXIMA_TEMA_PREGUNTA = @EDAD_MAXIMA_TEMA_PREGUNTA
WHERE ID_TEMA_PREGUNTA = @ID_TEMA_PREGUNTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TEMA_PREGUNTA_TEDAD_MINIMA_TEMA_PREGUNTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@EDAD_MINIMA_TEMA_PREGUNTA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TEMA_PREGUNTA
SET  
EDAD_MINIMA_TEMA_PREGUNTA = @EDAD_MINIMA_TEMA_PREGUNTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TEMA_PREGUNTA_TEDAD_MAXIMA_TEMA_PREGUNTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@EDAD_MAXIMA_TEMA_PREGUNTA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TEMA_PREGUNTA
SET  
EDAD_MAXIMA_TEMA_PREGUNTA = @EDAD_MAXIMA_TEMA_PREGUNTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TEMA_PREGUNTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TEMA_PREGUNTA BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE TEMA_PREGUNTA
WHERE ID_TEMA_PREGUNTA = @ID_TEMA_PREGUNTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TTEMA_PREGUNTA
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE TEMA_PREGUNTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_TEMA_PREGUNTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_TEMA_PREGUNTA VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE_TEMA_PREGUNTA)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_TEMA_PREGUNTA
WHERE Tema LIKE @NAME;
END
GO

CREATE PROC SELECT_TEMA_PREGUNTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_TEMA_PREGUNTA
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_TEMA_PREGUNTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_TEMA_PREGUNTA;
END
GO

--PREGUNTA_SEGURIDAD
CREATE PROC INSERT_PREGUNTA_SEGURIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TEMA_PREGUNTA BIGINT,
@PREGUNTA VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO PREGUNTA_SEGURIDAD
VALUES
(@ID_TEMA_PREGUNTA,
UPPER(@PREGUNTA),
'ACTIVADO');
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PREGUNTA_SEGURIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_PREGUNTA_SEGURIDAD BIGINT,
@ID_TEMA_PREGUNTA BIGINT,
@PREGUNTA VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PREGUNTA_SEGURIDAD
SET
ID_TEMA_PREGUNTA = @ID_TEMA_PREGUNTA,
PREGUNTA = @PREGUNTA
WHERE ID_PREGUNTA_SEGURIDAD = @ID_PREGUNTA_SEGURIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PREGUNTA_SEGURIDAD_ID_TEMA_PREGUNTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_PREGUNTA_SEGURIDAD BIGINT,
@ID_TEMA_PREGUNTA BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PREGUNTA_SEGURIDAD
SET  
ID_TEMA_PREGUNTA = UPPER(@ID_TEMA_PREGUNTA)
WHERE ID_PREGUNTA_SEGURIDAD = @ID_PREGUNTA_SEGURIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PREGUNTA_SEGURIDAD_PREGUNTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_PREGUNTA_SEGURIDAD BIGINT,
@PREGUNTA VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PREGUNTA_SEGURIDAD
SET  
PREGUNTA = UPPER(@PREGUNTA)
WHERE ID_PREGUNTA_SEGURIDAD = @ID_PREGUNTA_SEGURIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PREGUNTA_SEGURIDAD_TID_TEMA_PREGUNTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TEMA_PREGUNTA BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PREGUNTA_SEGURIDAD
SET  
ID_TEMA_PREGUNTA = UPPER(@ID_TEMA_PREGUNTA);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_PREGUNTA_SEGURIDAD_TPREGUNTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@PREGUNTA VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE PREGUNTA_SEGURIDAD
SET  
PREGUNTA = UPPER(@PREGUNTA);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_PREGUNTA_SEGURIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TEMA_PREGUNTA BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE TEMA_PREGUNTA
WHERE ID_TEMA_PREGUNTA = @ID_TEMA_PREGUNTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TPREGUNTA_SEGURIDAD
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE PREGUNTA_SEGURIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_PREGUNTA_SEGURIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@PREGUNTA VARCHAR(50), 
@TEMA VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @PREG VARCHAR (50)
DECLARE @TEM VARCHAR (50)
SET @PREG = '%'+UPPER(@PREGUNTA)+'%'
SET @TEM = '%'+UPPER(@TEMA)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_TEMA_PREGUNTA
WHERE Tema LIKE @TEM AND Pregunta LIKE @PREG;
END
GO

CREATE PROC SELECT_PREGUNTA_SEGURIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_PREGUNTA_SEGURIDAD
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_PREGUNTA_SEGURIDAD
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_PREGUNTA_SEGURIDAD;
END
GO

--CARGO
CREATE PROC INSERT_CARGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_CARGO VARCHAR(50),
@FUNCION_CARGO VARCHAR(MAX),
@FECHA_INICIO_CARGO DATE,
@FECHA_REELECCION_CARGO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO CARGO
VALUES
(UPPER(@NOMBRE_CARGO),
@FUNCION_CARGO,
@FECHA_INICIO_CARGO,
@FECHA_REELECCION_CARGO,
'ACTIVADO');
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CARGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CARGO BIGINT,
@NOMBRE_CARGO VARCHAR(50),
@FUNCION_CARGO VARCHAR(MAX),
@FECHA_INICIO_CARGO DATE,
@FECHA_REELECCION_CARGO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CARGO
SET
NOMBRE_CARGO = UPPER(@NOMBRE_CARGO),
FUNCION_CARGO = @FUNCION_CARGO,
FECHA_INICIO_CARGO = @FECHA_INICIO_CARGO,
FECHA_REELECCION_CARGO = @FECHA_REELECCION_CARGO
WHERE ID_CARGO = @ID_CARGO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CARGO_FUNCION_CARGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CARGO BIGINT,
@FUNCION_CARGO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CARGO
SET  
FUNCION_CARGO = @FUNCION_CARGO
WHERE ID_CARGO = @ID_CARGO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CARGO_FECHA_INICIO_CARGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CARGO BIGINT,
@FECHA_INICIO_CARGO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CARGO
SET  
FECHA_INICIO_CARGO = @FECHA_INICIO_CARGO
WHERE ID_CARGO = @ID_CARGO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CARGO_FECHA_REELECCION_CARGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CARGO BIGINT,
@FECHA_REELECCION_CARGO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CARGO
SET  
FECHA_REELECCION_CARGO = @FECHA_REELECCION_CARGO
WHERE ID_CARGO = @ID_CARGO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CARGO_TFUNCION_CARGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FUNCION_CARGO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CARGO
SET  
FUNCION_CARGO = @FUNCION_CARGO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CARGO_TFECHA_INICIO_CARGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FECHA_INICIO_CARGO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CARGO
SET  
FECHA_INICIO_CARGO = @FECHA_INICIO_CARGO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CARGO_TFECHA_REELECCION_CARGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FECHA_REELECCION_CARGO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CARGO
SET  
FECHA_REELECCION_CARGO = @FECHA_REELECCION_CARGO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_CARGO 
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CARGO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE CARGO
WHERE ID_CARGO = @ID_CARGO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TCARGO
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE CARGO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_CARGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@CARGO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @CARG VARCHAR (50)
SET @CARG = '%'+UPPER(@CARGO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CARGO
WHERE Cargo LIKE @CARG;
END
GO

CREATE PROC SELECT_CARGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CARGO
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_CARGO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CARGO;
END
GO

--INTENCIDAD_HORARIA
CREATE PROC INSERT_INTENCIDAD_HORARIA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NIVEL_INTENCIDAD_HORARIA VARCHAR(50),
@DURACION_CLASE TIME(0),
@N_CLASES_SEMANA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO INTENCIDAD_HORARIA
VALUES
(UPPER(@NIVEL_INTENCIDAD_HORARIA),
@DURACION_CLASE,
@N_CLASES_SEMANA,
'ACTIVADO');
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_INTENCIDAD_HORARIA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_INTENCIDAD_HORARIA BIGINT,
@NIVEL_INTENCIDAD_HORARIA VARCHAR(50),
@DURACION_CLASE TIME(0),
@N_CLASES_SEMANA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE INTENCIDAD_HORARIA
SET
NIVEL_INTENCIDAD_HORARIA = UPPER(@NIVEL_INTENCIDAD_HORARIA),
DURACION_CLASE = @DURACION_CLASE,
N_CLASES_SEMANA = @N_CLASES_SEMANA
WHERE ID_INTENCIDAD_HORARIA = @ID_INTENCIDAD_HORARIA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_INTENCIDAD_HORARIA_DURACION_CLASE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_INTENCIDAD_HORARIA BIGINT,
@DURACION_CLASE TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE INTENCIDAD_HORARIA
SET  
DURACION_CLASE = @DURACION_CLASE
WHERE ID_INTENCIDAD_HORARIA = @ID_INTENCIDAD_HORARIA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_INTENCIDAD_HORARIA_N_CLASES_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_INTENCIDAD_HORARIA BIGINT,
@N_CLASES_SEMANA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE INTENCIDAD_HORARIA
SET  
N_CLASES_SEMANA = @N_CLASES_SEMANA
WHERE ID_INTENCIDAD_HORARIA = @ID_INTENCIDAD_HORARIA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_INTENCIDAD_HORARIA_TDURACION_CLASE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@DURACION_CLASE TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE INTENCIDAD_HORARIA
SET  
DURACION_CLASE = @DURACION_CLASE
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_INTENCIDAD_HORARIA_TN_CLASES_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@N_CLASES_SEMANA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE INTENCIDAD_HORARIA
SET  
N_CLASES_SEMANA = @N_CLASES_SEMANA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_INTENCIDAD_HORARIA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver

----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
DELETE INTENCIDAD_HORARIA
WHERE ID_INTENCIDAD_HORARIA = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TINTENCIDAD_HORARIA
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE INTENCIDAD_HORARIA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_INTENCIDAD_HORARIA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NIVEL VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NIV VARCHAR (50)
SET @NIV = '%'+UPPER(@NIVEL)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_INTENCIDAD_HORARIA
WHERE Nivel_de_intencidad LIKE @NIV;
END
GO

CREATE PROC SELECT_INTENCIDAD_HORARIA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_INTENCIDAD_HORARIA
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_INTENCIDAD_HORARIA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_INTENCIDAD_HORARIA;
END
GO

--TIPO_MENSUALIDAD
CREATE PROC INSERT_TIPO_MENSUALIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NIVEL_INTENCIDAD_HORARIA VARCHAR(50),
@DURACION_CLASE TIME(0),
@N_CLASES_SEMANA INT,

@PRECIO_MENSUALIDAD MONEY,
@PRECIO_CLASE MONEY)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
EXEC INSERT_INTENCIDAD_HORARIA
@NIVEL_INTENCIDAD_HORARIA,
@DURACION_CLASE,
@N_CLASES_SEMANA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
DECLARE @ID BIGINT
SET @ID = (SELECT MAX(ID_INTENCIDAD_HORARIA) FROM INTENCIDAD_HORARIA)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
INSERT INTO TIPO_MENSUALIDAD
VALUES
(@ID,
@PRECIO_MENSUALIDAD,
@PRECIO_CLASE,
'ACTIVADO');
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_MENSUALIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,
@NIVEL_INTENCIDAD_HORARIA VARCHAR(50),
@DURACION_CLASE TIME(0),
@N_CLASES_SEMANA INT,

@PRECIO_MENSUALIDAD MONEY,
@PRECIO_CLASE MONEY)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_INTENCIDAD_HORARIA BIGINT
SET @ID_INTENCIDAD_HORARIA = (SELECT ID_INTENCIDAD_HORARIA FROM TIPO_MENSUALIDAD WHERE ID_TIPO_MENSUALIDAD = @ID)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC UPDATE_INTENCIDAD_HORARIA
@ID_INTENCIDAD_HORARIA,
@NIVEL_INTENCIDAD_HORARIA,
@DURACION_CLASE,
@N_CLASES_SEMANA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
UPDATE TIPO_MENSUALIDAD
SET
PRECIO_MENSUALIDAD = @PRECIO_MENSUALIDAD,
PRECIO_CLASE = @PRECIO_CLASE
WHERE ID_TIPO_MENSUALIDAD = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_MENSUALIDAD_DURACION_CLASE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TIPO_MENSUALIDAD BIGINT,
@DURACION_CLASE VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_INTENCIDAD_HORARIA BIGINT
SET @ID_INTENCIDAD_HORARIA = (SELECT ID_INTENCIDAD_HORARIA FROM TIPO_MENSUALIDAD WHERE ID_TIPO_MENSUALIDAD = @ID_TIPO_MENSUALIDAD)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC UPDATE_INTENCIDAD_HORARIA_DURACION_CLASE
@ID_INTENCIDAD_HORARIA,
@DURACION_CLASE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_MENSUALIDAD_N_CLASES_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TIPO_MENSUALIDAD BIGINT,
@N_CLASES_SEMANA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_INTENCIDAD_HORARIA BIGINT
SET @ID_INTENCIDAD_HORARIA = (SELECT ID_INTENCIDAD_HORARIA FROM TIPO_MENSUALIDAD WHERE ID_TIPO_MENSUALIDAD = @ID_TIPO_MENSUALIDAD)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC UPDATE_INTENCIDAD_HORARIA_N_CLASES_SEMANA
@ID_INTENCIDAD_HORARIA,
@N_CLASES_SEMANA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_MENSUALIDAD_PRECIO_MENSUALIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TIPO_MENSUALIDAD BIGINT,
@PRECIO_MENSUALIDAD MONEY)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TIPO_MENSUALIDAD
SET  
PRECIO_MENSUALIDAD = @PRECIO_MENSUALIDAD
WHERE ID_TIPO_MENSUALIDAD = @ID_TIPO_MENSUALIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_MENSUALIDAD_PRECIO_CLASE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_TIPO_MENSUALIDAD BIGINT,
@PRECIO_CLASE MONEY)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TIPO_MENSUALIDAD
SET  
PRECIO_CLASE = @PRECIO_CLASE
WHERE ID_TIPO_MENSUALIDAD = @ID_TIPO_MENSUALIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_MENSUALIDAD_TDURACION_CLASE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@DURACION_CLASE VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
EXEC UPDATE_INTENCIDAD_HORARIA_TDURACION_CLASE
@DURACION_CLASE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_MENSUALIDAD_TN_CLASES_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@N_CLASES_SEMANA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
EXEC UPDATE_INTENCIDAD_HORARIA_TN_CLASES_SEMANA
@N_CLASES_SEMANA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_MENSUALIDAD_TPRECIO_MENSUALIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@PRECIO_MENSUALIDAD MONEY)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TIPO_MENSUALIDAD
SET  
PRECIO_MENSUALIDAD = @PRECIO_MENSUALIDAD
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_TIPO_MENSUALIDAD_TPRECIO_CLASE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@PRECIO_CLASE MONEY)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE TIPO_MENSUALIDAD
SET  
PRECIO_CLASE = @PRECIO_CLASE
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TIPO_MENSUALIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver

----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_INTENCIDAD_HORARIA BIGINT
SET @ID_INTENCIDAD_HORARIA = (SELECT ID_INTENCIDAD_HORARIA FROM TIPO_MENSUALIDAD WHERE ID_TIPO_MENSUALIDAD = @ID)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
DELETE TIPO_MENSUALIDAD
WHERE ID_TIPO_MENSUALIDAD = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC DELETE_INTENCIDAD_HORARIA
@ID_INTENCIDAD_HORARIA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TTIPO_MENSUALIDAD
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE TIPO_MENSUALIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC DELETE_TINTENCIDAD_HORARIA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_TIPO_MENSUALIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NIVEL VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NIV VARCHAR (50)
SET @NIV = '%'+UPPER(@NIVEL)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_TIPO_MENSUALIDAD
WHERE Nivel_de_intencidad LIKE @NIV;
END
GO

CREATE PROC SELECT_TIPO_MENSUALIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_TIPO_MENSUALIDAD
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_TIPO_MENSUALIDAD
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_TIPO_MENSUALIDAD;
END
GO

CREATE PROC TSELECT_GRAFICAR_TIPO_MENSUALIDAD
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT Nivel_de_intencidad, Valor_mensualidad
FROM VIEW_TIPO_MENSUALIDAD;
END
GO

--CLASE_DOMINGO
CREATE PROC INSERT_CLASE_DOMINGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@HORA_INICIO_CLASE_DOMINGO TIME(0),
@TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO TIME(0),
@HORA_FINALIZACION_CLASE_DOMINGO TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO CLASE_DOMINGO
VALUES
(@HORA_INICIO_CLASE_DOMINGO,
@TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO,
@HORA_FINALIZACION_CLASE_DOMINGO);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_DOMINGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,

@HORA_INICIO_CLASE_DOMINGO TIME(0),
@TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO TIME(0),
@HORA_FINALIZACION_CLASE_DOMINGO TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_DOMINGO
SET
HORA_INICIO_CLASE_DOMINGO = @HORA_INICIO_CLASE_DOMINGO,
TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO = @TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO,
HORA_FINALIZACION_CLASE_DOMINGO = @HORA_FINALIZACION_CLASE_DOMINGO
WHERE ID_CLASE_DOMINGO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_DOMINGO_TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CLASE_DOMINGO BIGINT,
@TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_DOMINGO
SET  
TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO = @TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO
WHERE ID_CLASE_DOMINGO = @ID_CLASE_DOMINGO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_DOMINGO_HORA_FINALIZACION_CLASE_DOMINGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CLASE_DOMINGO BIGINT,
@HORA_FINALIZACION_CLASE_DOMINGO TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_DOMINGO
SET  
HORA_FINALIZACION_CLASE_DOMINGO = @HORA_FINALIZACION_CLASE_DOMINGO
WHERE ID_CLASE_DOMINGO = @ID_CLASE_DOMINGO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_DOMINGO_TTIEMPO_EXPARSIMIENTO_CLASE_DOMINGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_DOMINGO
SET  
TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO = @TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_DOMINGO_THORA_FINALIZACION_CLASE_DOMINGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@HORA_FINALIZACION_CLASE_DOMINGO TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_DOMINGO
SET  
HORA_FINALIZACION_CLASE_DOMINGO = @HORA_FINALIZACION_CLASE_DOMINGO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_CLASE_DOMINGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver

----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
DELETE CLASE_DOMINGO
WHERE ID_CLASE_DOMINGO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TCLASE_DOMINGO
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE CLASE_DOMINGO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC SELECT_CLASE_DOMINGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CLASE_DOMINGO
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_CLASE_DOMINGO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CLASE_DOMINGO;
END
GO

--CLASE_SABADO
CREATE PROC INSERT_CLASE_SABADO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@HORA_INICIO_CLASE_SABADO TIME(0),
@TIEMPO_EXPARSIMIENTO_CLASE_SABADO TIME(0),
@HORA_FINALIZACION_CLASE_SABADO TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO CLASE_SABADO
VALUES
(@HORA_INICIO_CLASE_SABADO,
@TIEMPO_EXPARSIMIENTO_CLASE_SABADO,
@HORA_FINALIZACION_CLASE_SABADO);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_SABADO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,

@HORA_INICIO_CLASE_SABADO TIME(0),
@TIEMPO_EXPARSIMIENTO_CLASE_SABADO TIME(0),
@HORA_FINALIZACION_CLASE_SABADO TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_SABADO
SET
HORA_INICIO_CLASE_SABADO = @HORA_INICIO_CLASE_SABADO,
TIEMPO_EXPARSIMIENTO_CLASE_SABADO = @TIEMPO_EXPARSIMIENTO_CLASE_SABADO,
HORA_FINALIZACION_CLASE_SABADO = @HORA_FINALIZACION_CLASE_SABADO
WHERE ID_CLASE_SABADO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_SABADO_TIEMPO_EXPARSIMIENTO_CLASE_SABADO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CLASE_SABADO BIGINT,
@TIEMPO_EXPARSIMIENTO_CLASE_SABADO TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_SABADO
SET  
TIEMPO_EXPARSIMIENTO_CLASE_SABADO = @TIEMPO_EXPARSIMIENTO_CLASE_SABADO
WHERE ID_CLASE_SABADO = @ID_CLASE_SABADO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_SABADO_HORA_FINALIZACION_CLASE_SABADO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CLASE_SABADO BIGINT,
@HORA_FINALIZACION_CLASE_SABADO TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_SABADO
SET  
HORA_FINALIZACION_CLASE_SABADO = @HORA_FINALIZACION_CLASE_SABADO
WHERE ID_CLASE_SABADO = @ID_CLASE_SABADO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_SABADO_TTIEMPO_EXPARSIMIENTO_CLASE_SABADO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@TIEMPO_EXPARSIMIENTO_CLASE_SABADO TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_SABADO
SET  
TIEMPO_EXPARSIMIENTO_CLASE_SABADO = @TIEMPO_EXPARSIMIENTO_CLASE_SABADO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_SABADO_THORA_FINALIZACION_CLASE_SABADO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@HORA_FINALIZACION_CLASE_SABADO TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_SABADO
SET  
HORA_FINALIZACION_CLASE_SABADO = @HORA_FINALIZACION_CLASE_SABADO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_CLASE_SABADO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver

----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
DELETE CLASE_SABADO
WHERE ID_CLASE_SABADO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TCLASE_SABADO
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE CLASE_SABADO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC SELECT_CLASE_SABADO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CLASE_SABADO
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_CLASE_SABADO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CLASE_SABADO;
END
GO

--CLASE_ENTRE_SEMANA
CREATE PROC INSERT_CLASE_ENTRE_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@HORA_INICIO_CLASE_ENTRE_SEMANA TIME(0),
@TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA TIME(0),
@HORA_FINALIZACION_CLASE_ENTRE_SEMANA TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO CLASE_ENTRE_SEMANA
VALUES
(@HORA_INICIO_CLASE_ENTRE_SEMANA,
@TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA,
@HORA_FINALIZACION_CLASE_ENTRE_SEMANA);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_ENTRE_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,

@HORA_INICIO_CLASE_ENTRE_SEMANA TIME(0),
@TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA TIME(0),
@HORA_FINALIZACION_CLASE_ENTRE_SEMANA TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_ENTRE_SEMANA
SET
HORA_INICIO_CLASE_ENTRE_SEMANA = @HORA_INICIO_CLASE_ENTRE_SEMANA,
TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA = @TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA,
HORA_FINALIZACION_CLASE_ENTRE_SEMANA = @HORA_FINALIZACION_CLASE_ENTRE_SEMANA
WHERE ID_CLASE_ENTRE_SEMANA = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_ENTRE_SEMANA_TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CLASE_ENTRE_SEMANA BIGINT,
@TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_ENTRE_SEMANA
SET  
TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA = @TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA
WHERE ID_CLASE_ENTRE_SEMANA = @ID_CLASE_ENTRE_SEMANA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_ENTRE_SEMANA_HORA_FINALIZACION_CLASE_ENTRE_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CLASE_ENTRE_SEMANA BIGINT,
@HORA_FINALIZACION_CLASE_ENTRE_SEMANA TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_ENTRE_SEMANA
SET  
HORA_FINALIZACION_CLASE_ENTRE_SEMANA = @HORA_FINALIZACION_CLASE_ENTRE_SEMANA
WHERE ID_CLASE_ENTRE_SEMANA = @ID_CLASE_ENTRE_SEMANA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_ENTRE_SEMANA_TTIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_ENTRE_SEMANA
SET  
TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA = @TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CLASE_ENTRE_SEMANA_THORA_FINALIZACION_CLASE_ENTRE_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@HORA_FINALIZACION_CLASE_ENTRE_SEMANA TIME(0))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASE_ENTRE_SEMANA
SET  
HORA_FINALIZACION_CLASE_ENTRE_SEMANA = @HORA_FINALIZACION_CLASE_ENTRE_SEMANA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_CLASE_ENTRE_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver

----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
DELETE CLASE_ENTRE_SEMANA
WHERE ID_CLASE_ENTRE_SEMANA = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TCLASE_ENTRE_SEMANA
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE CLASE_ENTRE_SEMANA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC SELECT_CLASE_ENTRE_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CLASE_ENTRE_SEMANA
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_CLASE_ENTRE_SEMANA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CLASE_ENTRE_SEMANA;
END
GO

--HORARIO
CREATE PROC INSERT_HORARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CLASE_DOMINGO BIGINT,
@ID_CLASE_SABADO BIGINT,
@ID_CLASE_ENTRE_SEMANA BIGINT,
	
@NOMBRE_HORARIO VARCHAR(50),
@EDAD_MINIMA_HORARIO INT,
@EDAD_MAXIMA_HORARIO INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO CLASES_HORARIO
VALUES
(@ID_CLASE_DOMINGO,
@ID_CLASE_SABADO,
@ID_CLASE_ENTRE_SEMANA,
'ACTIVADO');
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
DECLARE @ID_CLASES_HORARIO BIGINT

SET @ID_CLASES_HORARIO = (SELECT MAX(ID_CLASES_HORARIO) FROM CLASES_HORARIO)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
INSERT INTO HORARIO
VALUES
(@ID_CLASES_HORARIO,
UPPER(@NOMBRE_HORARIO),
@EDAD_MINIMA_HORARIO,
@EDAD_MAXIMA_HORARIO
);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_HORARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,

@ID_CLASE_DOMINGO BIGINT,
@ID_CLASE_SABADO BIGINT,
@ID_CLASE_ENTRE_SEMANA BIGINT,
	
@NOMBRE_HORARIO VARCHAR(50),
@EDAD_MINIMA_HORARIO INT,
@EDAD_MAXIMA_HORARIO INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_CLASES_HORARIO BIGINT

SET @ID_CLASES_HORARIO = 
(SELECT ID_CLASES_HORARIO FROM HORARIO WHERE ID_HORARIO = @ID)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
UPDATE CLASES_HORARIO
SET
ID_CLASE_DOMINGO = @ID_CLASE_DOMINGO,
ID_CLASE_SABADO = @ID_CLASE_SABADO,
ID_CLASE_ENTRE_SEMANA = @ID_CLASE_ENTRE_SEMANA
WHERE ID_CLASES_HORARIO = @ID_CLASES_HORARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
UPDATE HORARIO
SET
ID_CLASES_HORARIO = @ID_CLASES_HORARIO,
NOMBRE_HORARIO = UPPER(@NOMBRE_HORARIO),
EDAD_MINIMA_HORARIO = @EDAD_MINIMA_HORARIO,
EDAD_MAXIMA_HORARIO = @EDAD_MAXIMA_HORARIO
WHERE ID_HORARIO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_HORARIO_ID_CLASE_DOMINGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_HORARIO BIGINT,
@ID_CLASE_DOMINGO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_CLASES_HORARIO BIGINT

SET @ID_CLASES_HORARIO = 
(SELECT ID_CLASES_HORARIO FROM HORARIO WHERE ID_HORARIO = @ID_HORARIO)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
UPDATE CLASES_HORARIO
SET  
ID_CLASE_DOMINGO = @ID_CLASE_DOMINGO
WHERE ID_CLASES_HORARIO = @ID_CLASES_HORARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_HORARIO_ID_CLASE_SABADO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_HORARIO BIGINT,
@ID_CLASE_SABADO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_CLASES_HORARIO BIGINT

SET @ID_CLASES_HORARIO = 
(SELECT ID_CLASES_HORARIO FROM HORARIO WHERE ID_HORARIO = @ID_HORARIO)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
UPDATE CLASES_HORARIO
SET  
ID_CLASE_SABADO = @ID_CLASE_SABADO
WHERE ID_CLASES_HORARIO = @ID_CLASES_HORARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_HORARIO_ID_CLASE_ENTRE_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_HORARIO BIGINT,
@ID_CLASE_ENTRE_SEMANA BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_CLASES_HORARIO BIGINT

SET @ID_CLASES_HORARIO = 
(SELECT ID_CLASES_HORARIO FROM HORARIO WHERE ID_HORARIO = @ID_HORARIO)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
UPDATE CLASES_HORARIO
SET  
ID_CLASE_ENTRE_SEMANA = @ID_CLASE_ENTRE_SEMANA
WHERE ID_CLASES_HORARIO = @ID_CLASES_HORARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_HORARIO_EDAD_MINIMA_HORARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_HORARIO BIGINT,
@EDAD_MINIMA_HORARIO INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE HORARIO
SET  
EDAD_MINIMA_HORARIO = @EDAD_MINIMA_HORARIO
WHERE ID_HORARIO = @ID_HORARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_HORARIO_EDAD_MAXIMA_HORARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_HORARIO BIGINT,
@EDAD_MAXIMA_HORARIO INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE HORARIO
SET  
EDAD_MAXIMA_HORARIO = @EDAD_MAXIMA_HORARIO
WHERE ID_HORARIO = @ID_HORARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_HORARIO_TID_CLASE_DOMINGO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CLASE_DOMINGO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASES_HORARIO
SET  
ID_CLASE_DOMINGO = @ID_CLASE_DOMINGO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_HORARIO_TID_CLASE_SABADO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CLASE_SABADO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASES_HORARIO
SET  
ID_CLASE_SABADO = @ID_CLASE_SABADO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_HORARIO_TID_CLASE_ENTRE_SEMANA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CLASE_ENTRE_SEMANA BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CLASES_HORARIO
SET  
ID_CLASE_ENTRE_SEMANA = @ID_CLASE_ENTRE_SEMANA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_HORARIO_TEDAD_MINIMA_HORARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@EDAD_MINIMA_HORARIO INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE HORARIO
SET  
EDAD_MINIMA_HORARIO = @EDAD_MINIMA_HORARIO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_HORARIO_TEDAD_MAXIMA_HORARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@EDAD_MAXIMA_HORARIO INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE HORARIO
SET  
EDAD_MAXIMA_HORARIO = @EDAD_MAXIMA_HORARIO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_HORARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_CLASES_HORARIO BIGINT

SET @ID_CLASES_HORARIO = 
(SELECT ID_CLASES_HORARIO FROM HORARIO WHERE ID_HORARIO = @ID)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
DELETE HORARIO
WHERE ID_HORARIO = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
DELETE CLASES_HORARIO
WHERE ID_CLASES_HORARIO = @ID_CLASES_HORARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_THORARIO
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE TIPO_MENSUALIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
TRUNCATE TABLE CLASES_HORARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_HORARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@HORARIO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @HOR VARCHAR (50)
SET @HOR = '%'+UPPER(@HORARIO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_HORARIO
WHERE Nombre_horario LIKE @HOR;
END
GO

CREATE PROC SELECT_HORARIO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_HORARIO
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_HORARIO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_TIPO_MENSUALIDAD;
END
GO

--CINTURON
CREATE PROC INSERT_CINTURON
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@COLOR_CINTURON VARCHAR(50),
@SIGNIFICADO_CINTURON VARCHAR(MAX),
@IMAGEN_CINTURON IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO CINTURON
VALUES
(UPPER(@COLOR_CINTURON),
@SIGNIFICADO_CINTURON,
@IMAGEN_CINTURON,
'ACTIVADO');
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CINTURON
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,
@COLOR_CINTURON VARCHAR(50),
@SIGNIFICADO_CINTURON VARCHAR(MAX),
@IMAGEN_CINTURON IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CINTURON
SET
COLOR_CINTURON = UPPER(@COLOR_CINTURON),
SIGNIFICADO_CINTURON = @SIGNIFICADO_CINTURON,
IMAGEN_CINTURON = @IMAGEN_CINTURON
WHERE ID_CINTURON = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CINTURON_SIGNIFICADO_CINTURON
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CINTURON BIGINT,
@SIGNIFICADO_CINTURON VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CINTURON
SET  
SIGNIFICADO_CINTURON = @SIGNIFICADO_CINTURON
WHERE ID_CINTURON = @ID_CINTURON;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CINTURON_IMAGEN_CINTURON
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CINTURON BIGINT,
@IMAGEN_CINTURON IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CINTURON
SET  
IMAGEN_CINTURON = @IMAGEN_CINTURON
WHERE ID_CINTURON = @ID_CINTURON;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CINTURON_TSIGNIFICADO_CINTURON
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@SIGNIFICADO_CINTURON VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CINTURON
SET  
SIGNIFICADO_CINTURON = @SIGNIFICADO_CINTURON
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CINTURON_TIMAGEN_CINTURON
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@IMAGEN_CINTURON IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CINTURON
SET  
IMAGEN_CINTURON = @IMAGEN_CINTURON
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_CINTURON
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE CINTURON
WHERE ID_CINTURON = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TCINTURON
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE TIPO_CINTURON;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_CINTURON
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@CINTURON VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @CINT VARCHAR (50)
SET @CINT = '%'+UPPER(@CINTURON)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CINTURON
WHERE Cinturón LIKE @CINT;
END
GO

CREATE PROC SELECT_CINTURON
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CINTURON
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_CINTURON
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_TIPO_CINTURON;
END
GO

--CATEGORIA_EDAD
CREATE PROC INSERT_CATEGORIA_EDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE_CATEGORIA_EDAD VARCHAR(50),
@EDAD_MINIMA_CATEGORIA INT,
@EDAD_MAXIMA_CATEGORIA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO CATEGORIA_EDAD
VALUES
(UPPER(@NOMBRE_CATEGORIA_EDAD),
@EDAD_MINIMA_CATEGORIA,
@EDAD_MAXIMA_CATEGORIA,
'ACTIVADO');
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CATEGORIA_EDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,
@NOMBRE_CATEGORIA_EDAD VARCHAR(50),
@EDAD_MINIMA_CATEGORIA INT,
@EDAD_MAXIMA_CATEGORIA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CATEGORIA_EDAD
SET
NOMBRE_CATEGORIA_EDAD= UPPER(@NOMBRE_CATEGORIA_EDAD),
@EDAD_MINIMA_CATEGORIA = @EDAD_MINIMA_CATEGORIA,
@EDAD_MAXIMA_CATEGORIA = @EDAD_MAXIMA_CATEGORIA
WHERE ID_CATEGORIA_EDAD = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CATEGORIA_EDAD_EDAD_MINIMA_CATEGORIA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CATEGORIA_EDAD BIGINT,
@EDAD_MINIMA_CATEGORIA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CATEGORIA_EDAD
SET  
EDAD_MINIMA_CATEGORIA = @EDAD_MINIMA_CATEGORIA
WHERE ID_CATEGORIA_EDAD = @ID_CATEGORIA_EDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CATEGORIA_EDAD_EDAD_MAXIMA_CATEGORIA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CATEGORIA_EDAD BIGINT,
@EDAD_MAXIMA_CATEGORIA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CATEGORIA_EDAD
SET  
EDAD_MAXIMA_CATEGORIA = @EDAD_MAXIMA_CATEGORIA
WHERE ID_CATEGORIA_EDAD = @ID_CATEGORIA_EDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CATEGORIA_EDAD_TEDAD_MINIMA_CATEGORIA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@EDAD_MINIMA_CATEGORIA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CATEGORIA_EDAD
SET  
EDAD_MINIMA_CATEGORIA = @EDAD_MINIMA_CATEGORIA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_CATEGORIA_EDAD_TEDAD_MAXIMA_CATEGORIA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@EDAD_MAXIMA_CATEGORIA INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CATEGORIA_EDAD
SET  
EDAD_MAXIMA_CATEGORIA = @EDAD_MAXIMA_CATEGORIA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_CATEGORIA_EDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE CATEGORIA_EDAD
WHERE ID_CATEGORIA_EDAD = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TCATEGORIA_EDAD
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE CATEGORIA_EDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_CATEGORIA_EDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@CATEGORIA VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @CAT VARCHAR (50)
SET @CAT = '%'+UPPER(@CATEGORIA)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CATEGORIA_EDAD
WHERE Categoría LIKE @CAT;
END
GO

CREATE PROC SELECT_CATEGORIA_EDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CATEGORIA_EDAD
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_CATEGORIA_EDAD
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CATEGORIA_EDAD;
END
GO

--DATOS_CONTACTO
CREATE PROC INSERT_DATOS_CONTACTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR BIGINT,
@TELEFONO_FIJO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO DATOS_CONTACTO
VALUES
(@ID_SEDE,
UPPER(@EPS),
@DIRECCION_RESIDENCIA,
@CELULAR,
@TELEFONO_FIJO,
'ACTIVADO');
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC UPDATE_DATOS_CONTACTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_CONTACTO BIGINT,

@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR INT,
@TELEFONO_FIJO INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_CONTACTO
SET
ID_SEDE = @ID_SEDE,
EPS = @EPS,
DIRECCION_RESIDENCIA = @DIRECCION_RESIDENCIA,
CELULAR = @CELULAR,
TELEFONO_FIJO = @TELEFONO_FIJO
WHERE ID_DATOS_CONTACTO = @ID_DATOS_CONTACTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC UPDATE_DATOS_CONTACTO_ID_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_CONTACTO BIGINT,
@ID_SEDE BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_CONTACTO
SET  
ID_SEDE = @ID_SEDE
WHERE ID_DATOS_CONTACTO = @ID_DATOS_CONTACTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_CONTACTO_EPS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_CONTACTO BIGINT,
@EPS VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_CONTACTO
SET  
EPS = @EPS
WHERE ID_DATOS_CONTACTO = @ID_DATOS_CONTACTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_CONTACTO_DIRECCION_RESIDENCIA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_CONTACTO BIGINT,
@DIRECCION_RESIDENCIA VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_CONTACTO
SET  
DIRECCION_RESIDENCIA = @DIRECCION_RESIDENCIA
WHERE ID_DATOS_CONTACTO = @ID_DATOS_CONTACTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_CONTACTO_CELULAR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_CONTACTO BIGINT,
@CELULAR BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_CONTACTO
SET  
CELULAR = @CELULAR
WHERE ID_DATOS_CONTACTO = @ID_DATOS_CONTACTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_CONTACTO_TELEFONO_FIJO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_CONTACTO BIGINT,
@TELEFONO_FIJO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_CONTACTO
SET  
TELEFONO_FIJO = @TELEFONO_FIJO
WHERE ID_DATOS_CONTACTO = @ID_DATOS_CONTACTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_CONTACTO_TID_SEDE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_CONTACTO
SET  
ID_SEDE = @ID_SEDE
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_CONTACTO_TEPS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@EPS VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_CONTACTO
SET  
EPS = @EPS
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_CONTACTO_TDIRECCION_RESIDENCIA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@DIRECCION_RESIDENCIA VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_CONTACTO
SET  
DIRECCION_RESIDENCIA = @DIRECCION_RESIDENCIA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_CONTACTO_TCELULAR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@CELULAR BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_CONTACTO
SET  
CELULAR = @CELULAR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_CONTACTO_TTELEFONO_FIJO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@TELEFONO_FIJO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_CONTACTO
SET  
TELEFONO_FIJO = @TELEFONO_FIJO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_DATOS_CONTACTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_CONTACTO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE DATOS_CONTACTO
WHERE ID_DATOS_CONTACTO = @ID_DATOS_CONTACTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC DELETE_TDATOS_CONTACTO
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE DATOS_CONTACTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC SELECT_DATOS_CONTACTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_CONTACTO
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_DATOS_CONTACTO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_CONTACTO;
END
GO

--DATOS_SEGURIDAD
CREATE PROC INSERT_DATOS_SEGURIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO DATOS_SEGURIDAD
VALUES
(@ID_PREGUNTA_SEGURIDAD,
UPPER(@RESPUESTA_PREGUNTA_SEGURIDAD),
NULL,
NULL);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC UPDATE_DATOS_SEGURIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_SEGURIDAD BIGINT,

@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX),
@FECHA_ULTIMO_CIERRE_SESION DATE,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA DATE)
AS
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_SEGURIDAD
SET
ID_PREGUNTA_SEGURIDAD = @ID_PREGUNTA_SEGURIDAD,
RESPUESTA_PREGUNTA_SEGURIDAD = UPPER(@RESPUESTA_PREGUNTA_SEGURIDAD),
FECHA_ULTIMO_CIERRE_SESION = @FECHA_ULTIMO_CIERRE_SESION,
FECHA_ULTIMO_CAMBIO_CONTRASEÑA = @FECHA_ULTIMO_CAMBIO_CONTRASEÑA
WHERE ID_DATOS_SEGURIDAD = @ID_DATOS_SEGURIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC UPDATE_DATOS_SEGURIDAD_ID_PREGUNTA_SEGURIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_SEGURIDAD BIGINT,
@ID_PREGUNTA_SEGURIDAD BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_SEGURIDAD
SET  
ID_PREGUNTA_SEGURIDAD = @ID_PREGUNTA_SEGURIDAD
WHERE ID_DATOS_SEGURIDAD = @ID_DATOS_SEGURIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_SEGURIDAD_RESPUESTA_PREGUNTA_SEGURIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_SEGURIDAD
SET  
RESPUESTA_PREGUNTA_SEGURIDAD = @RESPUESTA_PREGUNTA_SEGURIDAD
WHERE ID_DATOS_SEGURIDAD = @ID_DATOS_SEGURIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_SEGURIDAD_RESPUESTA_FECHA_ULTIMO_CIERRE_SESION
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_SEGURIDAD BIGINT,
@FECHA_ULTIMO_CIERRE_SESION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_SEGURIDAD
SET  
FECHA_ULTIMO_CIERRE_SESION = GETDATE()
WHERE ID_DATOS_SEGURIDAD = @ID_DATOS_SEGURIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_SEGURIDAD_RESPUESTA_FECHA_ULTIMO_CAMBIO_CONTRASEÑA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_SEGURIDAD BIGINT,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_SEGURIDAD
SET  
FECHA_ULTIMO_CAMBIO_CONTRASEÑA = GETDATE()
WHERE ID_DATOS_SEGURIDAD = @ID_DATOS_SEGURIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_SEGURIDAD_TID_PREGUNTA_SEGURIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_PREGUNTA_SEGURIDAD BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_SEGURIDAD
SET  
ID_PREGUNTA_SEGURIDAD = @ID_PREGUNTA_SEGURIDAD
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_SEGURIDAD_TRESPUESTA_PREGUNTA_SEGURIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_SEGURIDAD
SET  
RESPUESTA_PREGUNTA_SEGURIDAD = @RESPUESTA_PREGUNTA_SEGURIDAD
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_SEGURIDAD_TFECHA_ULTIMO_CIERRE_SESION
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FECHA_ULTIMO_CIERRE_SESION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_SEGURIDAD
SET  
FECHA_ULTIMO_CIERRE_SESION = GETDATE()
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_SEGURIDAD_TFECHA_ULTIMO_CAMBIO_CONTRASEÑA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FECHA_ULTIMO_CAMBIO_CONTRASEÑA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_SEGURIDAD
SET  
FECHA_ULTIMO_CAMBIO_CONTRASEÑA = GETDATE()
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_DATOS_SEGURIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_SEGURIDAD BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE DATOS_SEGURIDAD
WHERE ID_DATOS_SEGURIDAD = @ID_DATOS_SEGURIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC DELETE_TDATOS_SEGURIDAD
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE DATOS_SEGURIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_DATOS_SEGURIDAD
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_SEGURIDAD
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_DATOS_SEGURIDAD
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_SEGURIDAD;
END
GO

--DATOS_PERSONALES 
CREATE PROC INSERT_DATOS_PERSONALES
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO DATOS_PERSONALES 
VALUES
(UPPER(@PRIMER_APELLIDO),
UPPER(@SEGUNDO_APELLIDO),
UPPER(@PRIMER_NOMBRE),
UPPER(@SEGUNDO_NOMBRE),
UPPER(@GENERO),
UPPER(@TIPO_DOCUMENTO),
@NUMERO_DOCUMENTO,
@FECHA_NACIMIENTO);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC UPDATE_DATOS_PERSONALES
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT,

@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET
PRIMER_APELLIDO = UPPER(@PRIMER_APELLIDO),
SEGUNDO_APELLIDO = UPPER(@SEGUNDO_APELLIDO),
PRIMER_NOMBRE = UPPER(@PRIMER_NOMBRE),
SEGUNDO_NOMBRE = UPPER(@SEGUNDO_NOMBRE),
GENERO = UPPER(@GENERO),
TIPO_DOCUMENTO = UPPER(@TIPO_DOCUMENTO),
NUMERO_DOCUMENTO = @NUMERO_DOCUMENTO,
FECHA_NACIMIENTO = @FECHA_NACIMIENTO
WHERE ID_DATOS_PERSONALES = @ID_DATOS_PERSONALES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC UPDATE_DATOS_PERSONALES_PRIMER_APELLIDO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT,
@PRIMER_APELLIDO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
PRIMER_APELLIDO = @PRIMER_APELLIDO
WHERE ID_DATOS_PERSONALES = @ID_DATOS_PERSONALES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_SEGUNDO_APELLIDO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT,
@SEGUNDO_APELLIDO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
SEGUNDO_APELLIDO = @SEGUNDO_APELLIDO
WHERE ID_DATOS_PERSONALES = @ID_DATOS_PERSONALES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_PRIMER_NOMBRE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT,
@PRIMER_NOMBRE VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
PRIMER_NOMBRE = @PRIMER_NOMBRE
WHERE ID_DATOS_PERSONALES = @ID_DATOS_PERSONALES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_SEGUNDO_NOMBRE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT,
@SEGUNDO_NOMBRE VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
SEGUNDO_NOMBRE = @SEGUNDO_NOMBRE
WHERE ID_DATOS_PERSONALES = @ID_DATOS_PERSONALES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_GENERO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT,
@GENERO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
GENERO = @GENERO
WHERE ID_DATOS_PERSONALES = @ID_DATOS_PERSONALES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_TIPO_DOCUMENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT,
@TIPO_DOCUMENTO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
TIPO_DOCUMENTO = @TIPO_DOCUMENTO
WHERE ID_DATOS_PERSONALES = @ID_DATOS_PERSONALES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_NUMERO_DOCUMENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT,
@NUMERO_DOCUMENTO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
NUMERO_DOCUMENTO = @NUMERO_DOCUMENTO
WHERE ID_DATOS_PERSONALES = @ID_DATOS_PERSONALES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_FECHA_NACIMIENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT,
@FECHA_NACIMIENTO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
FECHA_NACIMIENTO = @FECHA_NACIMIENTO
WHERE ID_DATOS_PERSONALES = @ID_DATOS_PERSONALES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_TPRIMER_APELLIDO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@PRIMER_APELLIDO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
PRIMER_APELLIDO = @PRIMER_APELLIDO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_TSEGUNDO_APELLIDO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@SEGUNDO_APELLIDO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
SEGUNDO_APELLIDO = @SEGUNDO_APELLIDO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_TPRIMER_NOMBRE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@PRIMER_NOMBRE VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
PRIMER_NOMBRE = @PRIMER_NOMBRE
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_TSEGUNDO_NOMBRE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@SEGUNDO_NOMBRE VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
SEGUNDO_NOMBRE = @SEGUNDO_NOMBRE
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_TGENERO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@GENERO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
GENERO = @GENERO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_TTIPO_DOCUMENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@TIPO_DOCUMENTO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
TIPO_DOCUMENTO = @TIPO_DOCUMENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_TNUMERO_DOCUMENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NUMERO_DOCUMENTO BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
NUMERO_DOCUMENTO = @NUMERO_DOCUMENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_PERSONALES_TFECHA_NACIMIENTO
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@FECHA_NACIMIENTO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PERSONALES
SET  
FECHA_NACIMIENTO = @FECHA_NACIMIENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_DATOS_PERSONALES
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE DATOS_PERSONALES
WHERE ID_DATOS_PERSONALES = @ID_DATOS_PERSONALES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC DELETE_TDATOS_PERSONALES
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE DATOS_PERSONALES ;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_DATOS_PERSONALES
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_PERSONALES 
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_DATOS_PERSONALES
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_PERSONALES;
END
GO

--DATOS_CUENTA
CREATE PROC INSERT_DATOS_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR BIGINT,
@TELEFONO_FIJO BIGINT,

@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX),

@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
EXEC INSERT_DATOS_CONTACTO
@ID_SEDE,
@EPS,
@DIRECCION_RESIDENCIA,
@CELULAR,
@TELEFONO_FIJO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----

----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC INSERT_DATOS_SEGURIDAD
@ID_PREGUNTA_SEGURIDAD,
@RESPUESTA_PREGUNTA_SEGURIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXEC INSERT_DATOS_PERSONALES
@PRIMER_APELLIDO,
@SEGUNDO_APELLIDO,
@PRIMER_NOMBRE,
@SEGUNDO_NOMBRE,
@GENERO,
@TIPO_DOCUMENTO,
@NUMERO_DOCUMENTO,
@FECHA_NACIMIENTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC UPDATE_DATOS_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_PERSONALES BIGINT,

@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR INT,
@TELEFONO_FIJO INT,

@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX),
@FECHA_ULTIMO_CIERRE_SESION DATE,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA DATE,

@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
EXEC UPDATE_DATOS_CONTACTO
@ID_DATOS_CONTACTO,
@ID_SEDE,
@EPS,
@DIRECCION_RESIDENCIA,
@CELULAR,
@TELEFONO_FIJO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC UPDATE_DATOS_SEGURIDAD
@ID_DATOS_SEGURIDAD,
@ID_PREGUNTA_SEGURIDAD,
@RESPUESTA_PREGUNTA_SEGURIDAD,
@FECHA_ULTIMO_CIERRE_SESION,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXEC UPDATE_DATOS_PERSONALES
@ID_DATOS_PERSONALES,
@PRIMER_APELLIDO,
@SEGUNDO_APELLIDO,
@PRIMER_NOMBRE,
@SEGUNDO_NOMBRE,
@GENERO,
@TIPO_DOCUMENTO,
@NUMERO_DOCUMENTO,
@FECHA_NACIMIENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC DELETE_DATOS_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_PERSONALES BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
EXEC DELETE_DATOS_CONTACTO
@ID_DATOS_CONTACTO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC DELETE_DATOS_SEGURIDAD
@ID_DATOS_SEGURIDAD;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXEC DELETE_DATOS_PERSONALES
@ID_DATOS_PERSONALES;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC DELETE_TDATOS_CUENTA
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
EXEC DELETE_TDATOS_CONTACTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC DELETE_TDATOS_SEGURIDAD
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXEC DELETE_TDATOS_PERSONALES
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

--DTS_CUENTA
CREATE PROC INSERT_DTS_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT,
@ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_DEPORTISTA BIGINT,
@ID_DATOS_SEGURIDAD BIGINT ,
@ID_DATOS_ADMINISTRADOR BIGINT,
@ID_DATOS_ACUDIENTE BIGINT,
@ID_DATOS_PROGRAMADOR BIGINT,
@ID_DATOS_ENTRENADOR BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO DATOS_CUENTA
VALUES
(@ID_DATOS_PERSONALES,
@ID_DATOS_CONTACTO,
@ID_DATOS_DEPORTISTA,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_ADMINISTRADOR,
@ID_DATOS_ACUDIENTE,
@ID_DATOS_PROGRAMADOR,
@ID_DATOS_ENTRENADOR);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC UPDATE_DTS_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_CUENTA BIGINT,

@ID_DATOS_DEPORTISTA BIGINT,
@ID_DATOS_ADMINISTRADOR BIGINT,
@ID_DATOS_ACUDIENTE BIGINT,
@ID_DATOS_PROGRAMADOR BIGINT,
@ID_DATOS_ENTRENADOR BIGINT,
@ID_DATOS_PERSONALES BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_CUENTA
SET
ID_DATOS_DEPORTISTA = @ID_DATOS_DEPORTISTA,
ID_DATOS_ADMINISTRADOR = @ID_DATOS_ADMINISTRADOR,
ID_DATOS_ACUDIENTE = @ID_DATOS_ACUDIENTE,
ID_DATOS_PROGRAMADOR = @ID_DATOS_PROGRAMADOR,
ID_DATOS_ENTRENADOR = @ID_DATOS_ENTRENADOR
WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC DELETE_DTS_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_CUENTA BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_DATOS_PERSONALES BIGINT,
@ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_DEPORTISTA BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_ADMINISTRADOR BIGINT,
@ID_DATOS_ACUDIENTE BIGINT,
@ID_DATOS_PROGRAMADOR BIGINT,
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_DATOS_PERSONALES = (SELECT ID_DATOS_PERSONALES FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA);
SET @ID_DATOS_CONTACTO = (SELECT ID_DATOS_CONTACTO FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA);
SET @ID_DATOS_DEPORTISTA = (SELECT ID_DATOS_DEPORTISTA FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA);
SET @ID_DATOS_SEGURIDAD = (SELECT ID_DATOS_SEGURIDAD FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA);
SET @ID_DATOS_ADMINISTRADOR = (SELECT ID_DATOS_ADMINISTRADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA);
SET @ID_DATOS_ACUDIENTE = (SELECT ID_DATOS_ACUDIENTE FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA);
SET @ID_DATOS_PROGRAMADOR = (SELECT ID_DATOS_PROGRAMADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA);
SET @ID_DATOS_ENTRENADOR = (SELECT ID_DATOS_ENTRENADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA);
SET @ID_DATOS_PERSONALES = (SELECT ID_DATOS_PERSONALES FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
DELETE DATOS_CUENTA
WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXEC DELETE_DATOS_CUENTA
@ID_DATOS_PERSONALES,
@ID_DATOS_CONTACTO,
@ID_DATOS_SEGURIDAD
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC DELETE_TDTS_CUENTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE DATOS_CUENTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC DELETE_TDATOS_CUENTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_DTS_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_CUENTA
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_DTS_CUENTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_CUENTA;
END
GO

--CUENTA
CREATE PROC INSERT_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_CUENTA BIGINT,
@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO CUENTA
VALUES
(@ID_DATOS_CUENTA,
@ID_TIPO_CUENTA,
ENCRYPTBYPASSPHRASE('password', @CONTRASEÑA),
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
UPPER(@ESTADO_CUENTA),
UPPER(@CORREO),
@RED,
@GREEN,
@BLUE,
@RED1,
@GREEN1,
@BLUE1,
@FOTO_PERFIL);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC UPDATE_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CUENTA BIGINT,

@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE CUENTA
SET
ID_TIPO_CUENTA = @ID_TIPO_CUENTA,
CONTRASEÑA = ENCRYPTBYPASSPHRASE('password',@CONTRASEÑA),
NOMBRE_USUARIO = @NOMBRE_USUARIO,
NOMBRE_USUARIO_ALTERNATIVO = @NOMBRE_USUARIO_ALTERNATIVO,
ESTADO_CUENTA = UPPER(@ESTADO_CUENTA),
CORREO = UPPER(@CORREO),
RED = @RED,
GREEN = @GREEN,
BLUE = @BLUE,
RED1 = @RED1,
GREEN1 = @GREEN1,
BLUE1 = @BLUE1,
FOTO_PERFIL = @FOTO_PERFIL
WHERE ID_CUENTA = @ID_CUENTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC DELETE_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CUENTA BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE CUENTA
WHERE ID_CUENTA = @ID_CUENTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC DELETE_DTS_CUENTA
@ID_CUENTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC DELETE_TCUENTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE CUENTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC DELETE_TDTS_CUENTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CUENTA
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC TSELECT_CUENTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CUENTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

--REGISTRO_CUENTA
CREATE PROC INSERT_REGISTRO_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT,
@ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_DEPORTISTA BIGINT,
@ID_DATOS_SEGURIDAD BIGINT ,
@ID_DATOS_ADMINISTRADOR BIGINT,
@ID_DATOS_ACUDIENTE BIGINT,
@ID_DATOS_PROGRAMADOR BIGINT,
@ID_DATOS_ENTRENADOR BIGINT,

@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE,

@NOMBRE_REGISTRADOR VARCHAR(50),
@CARGO_REGISTRADOR VARCHAR(50),
@FECHA_EXPIRACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
EXEC INSERT_DTS_CUENTA
@ID_DATOS_PERSONALES,
@ID_DATOS_CONTACTO,
@ID_DATOS_DEPORTISTA,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_ADMINISTRADOR,
@ID_DATOS_ACUDIENTE,
@ID_DATOS_PROGRAMADOR,
@ID_DATOS_ENTRENADOR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
DECLARE @ID_DATOS_CUENTA BIGINT

SET @ID_DATOS_CUENTA = (SELECT MAX(ID_DATOS_CUENTA) FROM DATOS_CUENTA)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXEC INSERT_CUENTA
@ID_DATOS_CUENTA,
@ID_TIPO_CUENTA,
@CONTRASEÑA,
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
@ESTADO_CUENTA,
@CORREO,
@RED,
@GREEN,
@BLUE,
@RED1,
@GREEN1,
@BLUE1,
@FOTO_PERFIL
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
DECLARE @ID_CUENTA BIGINT

SET @ID_CUENTA = (SELECT MAX(ID_CUENTA) FROM CUENTA)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
INSERT INTO REGISTRO_USUARIO
VALUES
(@ID_CUENTA,
UPPER(@NOMBRE_REGISTRADOR),
UPPER(@CARGO_REGISTRADOR),
GETDATE(),
@FECHA_EXPIRACION);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC UPDATE_REGISTRO_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_REGISTRO_USUARIO BIGINT,
@ID_CUENTA BIGINT,
@ID_DATOS_CUENTA BIGINT,

@ID_DATOS_DEPORTISTA BIGINT,
@ID_DATOS_ADMINISTRADOR BIGINT,
@ID_DATOS_ACUDIENTE BIGINT,
@ID_DATOS_PROGRAMADOR BIGINT,
@ID_DATOS_ENTRENADOR BIGINT,
@ID_DATOS_PERSONALES BIGINT,

@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE,

@NOMBRE_REGISTRADOR VARCHAR(50),
@CARGO_REGISTRADOR VARCHAR(50),
@FECHA_EXPIRACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE REGISTRO_USUARIO
SET
NOMBRE_REGISTRADOR = UPPER(@NOMBRE_REGISTRADOR),
CARGO_REGISTRADOR = UPPER(@CARGO_REGISTRADOR),
FECHA_REGISTRO = GETDATE(),
FECHA_EXPIRACION = @FECHA_EXPIRACION
WHERE ID_REGISTRO_USUARIO = @ID_REGISTRO_USUARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC UPDATE_CUENTA
@ID_CUENTA,
@ID_TIPO_CUENTA,
@CONTRASEÑA,
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
@ESTADO_CUENTA,
@CORREO,
@RED,
@GREEN,
@BLUE,
@RED1,
@GREEN1,
@BLUE1,
@FOTO_PERFIL
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXEC UPDATE_DTS_CUENTA
@ID_DATOS_DEPORTISTA,
@ID_DATOS_ADMINISTRADOR,
@ID_DATOS_ACUDIENTE,
@ID_DATOS_PROGRAMADOR,
@ID_DATOS_ENTRENADOR,
@ID_DATOS_PERSONALES
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC DELETE_REGISTRO_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_REGISTRO_USUARIO BIGINT,
@ID_CUENTA BIGINT,
@ID_DATOS_CUENTA BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE REGISTRO_USUARIO
WHERE ID_REGISTRO_USUARIO = @ID_REGISTRO_USUARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
DELETE CUENTA
WHERE ID_CUENTA = @ID_CUENTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXEC DELETE_DTS_CUENTA
@ID_DATOS_CUENTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC DELETE_TREGISTRO_CUENTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE REGISTRO_CUENTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXEC DELETE_TCUENTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_REGISTRO_CUENTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_REGISTRO_USUARIO
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC TSELECT_REGISTRO_CUENTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_REGISTRO_USUARIO;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

--DATOS_PROGRAMADOR
CREATE PROC INSERT_DATOS_PROGRAMADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@CODIGO_PROGRAMADOR VARCHAR(50),
@CONTRASEÑA_PROGRAMADOR_1 VARCHAR(50),
@CONTRASEÑA_PROGRAMADOR_2 VARCHAR(50),
@CODIGO_DESBLOQUEO VARCHAR(50),
@NUMERO_ACTIVACION INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO DATOS_PROGRAMADOR
VALUES
(ENCRYPTBYPASSPHRASE('password',@CODIGO_PROGRAMADOR),
ENCRYPTBYPASSPHRASE('password',@CONTRASEÑA_PROGRAMADOR_1),
ENCRYPTBYPASSPHRASE('password',@CONTRASEÑA_PROGRAMADOR_2),
ENCRYPTBYPASSPHRASE('password',@CODIGO_DESBLOQUEO),
@NUMERO_ACTIVACION);
END
GO

CREATE PROC UPDATE_DATOS_PROGRAMADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PROGRAMADOR BIGINT,
@CODIGO_PROGRAMADOR VARCHAR(50),
@CONTRASEÑA_PROGRAMADOR_1 VARCHAR(50),
@CONTRASEÑA_PROGRAMADOR_2 VARCHAR(50),
@CODIGO_DESBLOQUEO VARCHAR(50),
@NUMERO_ACTIVACION INT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_PROGRAMADOR
SET
CODIGO_PROGRAMADOR = ENCRYPTBYPASSPHRASE('password',@CODIGO_PROGRAMADOR),
CONTRASEÑA_PROGRAMADOR_1 = ENCRYPTBYPASSPHRASE('password',@CONTRASEÑA_PROGRAMADOR_1),
CONTRASEÑA_PROGRAMADOR_2 = ENCRYPTBYPASSPHRASE('password',@CONTRASEÑA_PROGRAMADOR_2),
CODIGO_DESBLOQUEO = ENCRYPTBYPASSPHRASE('password',@CODIGO_DESBLOQUEO),
NUMERO_ACTIVACION = @NUMERO_ACTIVACION
WHERE ID_DATOS_PROGRAMADOR = @ID_DATOS_PROGRAMADOR;
END
GO

CREATE PROC DELETE_DATOS_PROGRAMADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PROGRAMADOR BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE DATOS_PROGRAMADOR
WHERE ID_DATOS_PROGRAMADOR = @ID_DATOS_PROGRAMADOR;
END
GO

CREATE PROC DELETE_TDATOS_PROGRAMADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE DATOS_PROGRAMADOR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_DATOS_PROGRAMADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_PROGRAMADOR
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC TSELECT_DATOS_PROGRAMADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_PROGRAMADOR;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

--DATOS_ADMINISTRADOR
CREATE PROC INSERT_DATOS_ADMINISTRADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CARGO BIGINT,
@CODIGO_ADMINISTRADOR VARCHAR(50),
@CONTRASEÑA_CORREO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO DATOS_ADMINISTRADOR
VALUES
(@ID_CARGO,
ENCRYPTBYPASSPHRASE('password',@CODIGO_ADMINISTRADOR),
ENCRYPTBYPASSPHRASE('password',@CONTRASEÑA_CORREO));
END
GO

CREATE PROC UPDATE_DATOS_ADMINISTRADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_ADMINISTRADOR BIGINT,
@ID_CARGO BIGINT,
@CODIGO_ADMINISTRADOR VARCHAR(50),
@CONTRASEÑA_CORREO VARCHAR(MAX))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_ADMINISTRADOR
SET
ID_CARGO = @ID_CARGO,
CODIGO_ADMINISTRADOR = ENCRYPTBYPASSPHRASE('password',@CODIGO_ADMINISTRADOR),
CONTRASEÑA_CORREO = ENCRYPTBYPASSPHRASE('password',@CONTRASEÑA_CORREO)
WHERE ID_DATOS_ADMINISTRADOR = @ID_DATOS_ADMINISTRADOR;
END
GO

CREATE PROC DELETE_DATOS_ADMINISTRADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_ADMINISTRADOR BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE DATOS_ADMINISTRADOR
WHERE ID_DATOS_ADMINISTRADOR = @ID_DATOS_ADMINISTRADOR;
END
GO

CREATE PROC DELETE_TDATOS_ADMINISTRADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE DATOS_ADMINISTRADOR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_DATOS_ADMINISTRADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_ADMINISTRADOR
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC TSELECT_DATOS_ADMINISTRADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_ADMINISTRADOR;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

--DATOS_ENTRENADOR
CREATE PROC INSERT_DATOS_ENTRENADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ESTADO_ENTRENADOR VARCHAR(50),
@GRADO_DAN_ENTRENADOR INT,
@DESCRIPCION_ESTUDIO_ENTRENADOR VARCHAR(MAX),
@SUELDO_ENTRENADOR MONEY,
@HOJA_DE_VIDA_ENTRENADOR IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO DATOS_ENTRENADOR
VALUES
(UPPER(@ESTADO_ENTRENADOR),
@GRADO_DAN_ENTRENADOR,
UPPER(@DESCRIPCION_ESTUDIO_ENTRENADOR),
@SUELDO_ENTRENADOR,
@HOJA_DE_VIDA_ENTRENADOR);
END
GO

CREATE PROC UPDATE_DATOS_ENTRENADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_ENTRENADOR BIGINT,
@ESTADO_ENTRENADOR VARCHAR(50),
@GRADO_DAN_ENTRENADOR INT,
@DESCRIPCION_ESTUDIO_ENTRENADOR VARCHAR(MAX),
@SUELDO_ENTRENADOR MONEY,
@HOJA_DE_VIDA_ENTRENADOR IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_ENTRENADOR
SET
ESTADO_ENTRENADOR = UPPER(@ESTADO_ENTRENADOR),
GRADO_DAN_ENTRENADOR = @GRADO_DAN_ENTRENADOR,
DESCRIPCION_ESTUDIO_ENTRENADOR = UPPER(@DESCRIPCION_ESTUDIO_ENTRENADOR),
SUELDO_ENTRENADOR = @SUELDO_ENTRENADOR,
HOJA_DE_VIDA_ENTRENADOR = @HOJA_DE_VIDA_ENTRENADOR
WHERE ID_DATOS_ENTRENADOR = @ID_DATOS_ENTRENADOR;
END
GO

CREATE PROC DELETE_DATOS_ENTRENADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_ENTRENADOR BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE DATOS_ENTRENADOR
WHERE ID_DATOS_ENTRENADOR = @ID_DATOS_ENTRENADOR;
END
GO

CREATE PROC DELETE_TDATOS_ENTRENADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE DATOS_ENTRENADOR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_DATOS_ENTRENADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_ENTRENADOR
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC TSELECT_DATOS_ENTRENADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_ENTRENADOR;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

--ENTRENADOR
CREATE PROC INSERT_ENTRENADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT,
@ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_ENTRENADOR BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO ENTRENADOR
VALUES
(@ID_DATOS_PERSONALES,
@ID_DATOS_CONTACTO,
@ID_DATOS_ENTRENADOR);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_ENTRENADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_ENTRENADOR BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE ENTRENADOR
WHERE ID_ENTRENADOR = @ID_ENTRENADOR;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN DevolverEND 
END CATCH
GO

CREATE PROC DELETE_TENTRENADOR
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE ENTRENADOR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN DevolverEND 
END CATCH
GO

CREATE PROC LIKE_ENTRENADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50),
@APELLIDO VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NOM VARCHAR (50),
@APE VARCHAR (50)

SET @NOM = '%'+UPPER(@NOMBRE)+'%'
SET @APE = '%'+UPPER(@APELLIDO)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_ENTRENADOR
WHERE Nombre LIKE @NOM AND Apellido LIKE @APE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_ENTRENADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_ENTRENADOR
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC TSELECT_ENTRENADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_ENTRENADOR;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

--DATOS_DEPORTISTA
CREATE PROC INSERT_DATOS_DEPORTISTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_CATEGORIA_EDAD BIGINT,
@ID_CINTURON BIGINT,
@ID_HORARIO BIGINT ,
@ID_TIPO_MENSUALIDAD BIGINT ,
@PESO_DEPORTISTA VARCHAR(50),
@ESTATURA_DEPORTISTA VARCHAR(50) ,
@TIPO_SANGRE_DEPORTISTA VARCHAR(50),
@FOTOCOPIA_DOCUMENTO_ID IMAGE,
@FOTOCOPIA_CARNE_EPS IMAGE,
@CERTIFICADO_MEDICO_DEPORTISTA IMAGE,
@FOTO_DEPORTISTA IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
INSERT INTO DATOS_DEPORTISTA
VALUES
(@ID_CATEGORIA_EDAD,
@ID_CINTURON,
@ID_HORARIO,
@ID_TIPO_MENSUALIDAD,
@PESO_DEPORTISTA,
@ESTATURA_DEPORTISTA ,
UPPER(@TIPO_SANGRE_DEPORTISTA),
@FOTOCOPIA_DOCUMENTO_ID,
@FOTOCOPIA_CARNE_EPS,
@CERTIFICADO_MEDICO_DEPORTISTA,
@FOTO_DEPORTISTA);
END
GO

CREATE PROC UPDATE_DATOS_DEPORTISTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_DEPORTISTA BIGINT,

@ID_CATEGORIA_EDAD BIGINT,
@ID_CINTURON BIGINT,
@ID_HORARIO BIGINT ,
@ID_TIPO_MENSUALIDAD BIGINT ,
@PESO_DEPORTISTA VARCHAR(50),
@ESTATURA_DEPORTISTA VARCHAR(50) ,
@TIPO_SANGRE_DEPORTISTA VARCHAR(50),
@FOTOCOPIA_DOCUMENTO_ID IMAGE,
@FOTOCOPIA_CARNE_EPS IMAGE,
@CERTIFICADO_MEDICO_DEPORTISTA IMAGE,
@FOTO_DEPORTISTA IMAGE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_DEPORTISTA
SET
ID_CATEGORIA_EDAD = @ID_CATEGORIA_EDAD,
ID_CINTURON = @ID_CINTURON,
ID_HORARIO = @ID_HORARIO,
ID_TIPO_MENSUALIDAD = @ID_TIPO_MENSUALIDAD,
PESO_DEPORTISTA = @PESO_DEPORTISTA,
ESTATURA_DEPORTISTA = @ESTATURA_DEPORTISTA,
TIPO_SANGRE_DEPORTISTA = UPPER(@TIPO_SANGRE_DEPORTISTA),
FOTOCOPIA_DOCUMENTO_ID = @FOTOCOPIA_DOCUMENTO_ID,
FOTOCOPIA_CARNE_EPS = @FOTOCOPIA_CARNE_EPS,
CERTIFICADO_MEDICO_DEPORTISTA = @CERTIFICADO_MEDICO_DEPORTISTA,
FOTO_DEPORTISTA = @FOTO_DEPORTISTA
WHERE ID_DATOS_DEPORTISTA = @ID_DATOS_DEPORTISTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC DELETE_DATOS_DEPORTISTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_DEPORTISTA BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE DATOS_DEPORTISTA
WHERE ID_DATOS_DEPORTISTA = @ID_DATOS_DEPORTISTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC DELETE_TDATOS_DEPORTISTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE DATOS_DEPORTISTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_DATOS_DEPORTISTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_DEPORTISTA
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC TSELECT_DATOS_DEPORTISTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_DEPORTISTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

--DEPORTISTA
CREATE PROC INSERT_DEPORTISTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_PERSONALES BIGINT,
@ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_DEPORTISTA BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO DEPORTISTA
VALUES
(@ID_DATOS_PERSONALES,
@ID_DATOS_CONTACTO,
@ID_DATOS_DEPORTISTA);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_DEPORTISTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DEPORTISTA BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE DEPORTISTA
WHERE ID_DEPORTISTA = @ID_DEPORTISTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TDEPORTISTA
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE DEPORTISTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC LIKE_DEPORTISTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50),
@APELLIDO VARCHAR(50),
@CINTURON VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NOM VARCHAR (50),
@APE VARCHAR (50),
@CINT VARCHAR (50)

SET @NOM = '%'+UPPER(@NOMBRE)+'%'
SET @APE = '%'+UPPER(@APELLIDO)+'%'
SET @CINT = '%'+UPPER(@CINTURON)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_DEPORTISTA
WHERE Nombre LIKE @NOM AND Apellido LIKE @APE AND Cinturón LIKE @CINT;
END
GO

CREATE PROC SELECT_DEPORTISTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DEPORTISTA
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_DEPORTISTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DEPORTISTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

--DATOS_ACUDIENTE
CREATE PROC INSERT_DATOS_ACUDIENTE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DEPORTISTA BIGINT,
@EMPLEO_ACUDIENTE VARCHAR(50),
@TELEFONO_TRABAJO_ACUDIENTE BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO DATOS_ACUDIENTE
VALUES
(@ID_DEPORTISTA,
upper(@EMPLEO_ACUDIENTE),
@TELEFONO_TRABAJO_ACUDIENTE);
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_DATOS_ACUDIENTE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_ACUDIENTE BIGINT,
@EMPLEO_ACUDIENTE VARCHAR(50),
@TELEFONO_TRABAJO_ACUDIENTE BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
UPDATE DATOS_ACUDIENTE
SET
EMPLEO_ACUDIENTE = @EMPLEO_ACUDIENTE,
TELEFONO_TRABAJO_ACUDIENTE = @TELEFONO_TRABAJO_ACUDIENTE
WHERE ID_DATOS_ACUDIENTE = @ID_DATOS_ACUDIENTE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_DATOS_ACUDIENTE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_DATOS_ACUDIENTE BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DELETE DATOS_ACUDIENTE
WHERE ID_DATOS_ACUDIENTE = @ID_DATOS_ACUDIENTE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_TDATOS_ACUDIENTE
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
TRUNCATE TABLE DATOS_ACUDIENTE
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_DATOS_ACUDIENTE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_ACUDIENTE
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC TSELECT_DATOS_ACUDIENTE
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_DATOS_ACUDIENTE;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

--R_DEPORTISTA
CREATE PROC INSERT_R_DEPORTISTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR BIGINT,
@TELEFONO_FIJO BIGINT,
@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX),
@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE,

@ID_CATEGORIA_EDAD BIGINT,
@ID_CINTURON BIGINT,
@ID_HORARIO BIGINT ,
@ID_TIPO_MENSUALIDAD BIGINT ,
@PESO_DEPORTISTA VARCHAR(50),
@ESTATURA_DEPORTISTA VARCHAR(50) ,
@TIPO_SANGRE_DEPORTISTA VARCHAR(50),
@FOTOCOPIA_DOCUMENTO_ID IMAGE,
@FOTOCOPIA_CARNE_EPS IMAGE,
@CERTIFICADO_MEDICO_DEPORTISTA IMAGE,
@FOTO_DEPORTISTA IMAGE,

@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE,
@FECHA_EXPIRACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
EXECUTE INSERT_DATOS_CUENTA
@ID_SEDE,
@EPS,
@DIRECCION_RESIDENCIA,
@CELULAR,
@TELEFONO_FIJO,
@ID_PREGUNTA_SEGURIDAD,
@RESPUESTA_PREGUNTA_SEGURIDAD,
@PRIMER_APELLIDO,
@SEGUNDO_APELLIDO,
@PRIMER_NOMBRE,
@SEGUNDO_NOMBRE,
@GENERO,
@TIPO_DOCUMENTO,
@NUMERO_DOCUMENTO,
@FECHA_NACIMIENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE INSERT_DATOS_DEPORTISTA
@ID_CATEGORIA_EDAD,
@ID_CINTURON,
@ID_HORARIO,
@ID_TIPO_MENSUALIDAD,
@PESO_DEPORTISTA,
@ESTATURA_DEPORTISTA,
@TIPO_SANGRE_DEPORTISTA,
@FOTOCOPIA_DOCUMENTO_ID,
@FOTOCOPIA_CARNE_EPS,
@CERTIFICADO_MEDICO_DEPORTISTA,
@FOTO_DEPORTISTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
DECLARE @ID_DATOS_PERSONALES BIGINT,
@ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_DEPORTISTA BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_ADMINISTRADOR BIGINT,
@ID_DATOS_ACUDIENTE BIGINT,
@ID_DATOS_PROGRAMADOR BIGINT,
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_DATOS_PERSONALES = (SELECT MAX(ID_DATOS_PERSONALES) FROM DATOS_PERSONALES)
SET @ID_DATOS_CONTACTO = (SELECT MAX(ID_DATOS_CONTACTO) FROM DATOS_CONTACTO)
SET @ID_DATOS_DEPORTISTA = (SELECT MAX(ID_DATOS_DEPORTISTA) FROM DATOS_DEPORTISTA)
SET @ID_DATOS_SEGURIDAD = (SELECT MAX(ID_DATOS_SEGURIDAD) FROM DATOS_SEGURIDAD)
SET @ID_DATOS_ADMINISTRADOR = NULL
SET @ID_DATOS_ACUDIENTE = NULL
SET @ID_DATOS_PROGRAMADOR = NULL
SET @ID_DATOS_ENTRENADOR = NULL

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
EXECUTE INSERT_DEPORTISTA
@ID_DATOS_PERSONALES,
@ID_DATOS_CONTACTO,
@ID_DATOS_DEPORTISTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
DECLARE @NOMBRE_REGISTRADOR VARCHAR(50),
@CARGO_REGISTRADOR VARCHAR(50)

IF EXISTS (SELECT * FROM VIEW_PROGRAM)
BEGIN
SET @NOMBRE_REGISTRADOR = (SELECT PRIMER_NOMBRE + ' ' + PRIMER_APELLIDO FROM VIEW_PROGRAM)
SET @CARGO_REGISTRADOR = (SELECT NOMBRE_TIPO_CUENTA FROM VIEW_PROGRAM)
END
ELSE
BEGIN
SET @NOMBRE_REGISTRADOR = 'ENCRYPTCODE'
SET @CARGO_REGISTRADOR = 'PROGRAMADOR'
END
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 6----
BEGIN
EXECUTE INSERT_REGISTRO_CUENTA
@ID_DATOS_PERSONALES,
@ID_DATOS_CONTACTO,
@ID_DATOS_DEPORTISTA,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_ADMINISTRADOR,
@ID_DATOS_ACUDIENTE,
@ID_DATOS_PROGRAMADOR,
@ID_DATOS_ENTRENADOR,
@ID_TIPO_CUENTA,
@CONTRASEÑA,
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
@ESTADO_CUENTA,
@CORREO,
@RED,
@GREEN,
@BLUE,
@RED1,
@GREEN1,
@BLUE1,
@FOTO_PERFIL,
@NOMBRE_REGISTRADOR,
@CARGO_REGISTRADOR,
@FECHA_EXPIRACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_R_DEPORTISTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,

@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR BIGINT,
@TELEFONO_FIJO BIGINT,
@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX),
@FECHA_ULTIMO_CIERRE_SESION DATE,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA DATE,
@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE,

@ID_CATEGORIA_EDAD BIGINT,
@ID_CINTURON BIGINT,
@ID_HORARIO BIGINT ,
@ID_TIPO_MENSUALIDAD BIGINT ,
@PESO_DEPORTISTA VARCHAR(50),
@ESTATURA_DEPORTISTA VARCHAR(50) ,
@TIPO_SANGRE_DEPORTISTA VARCHAR(50),
@FOTOCOPIA_DOCUMENTO_ID IMAGE,
@FOTOCOPIA_CARNE_EPS IMAGE,
@CERTIFICADO_MEDICO_DEPORTISTA IMAGE,
@FOTO_DEPORTISTA IMAGE,

@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE,
@FECHA_EXPIRACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_PERSONALES BIGINT,
@ID_CUENTA BIGINT,
@ID_DATOS_CUENTA BIGINT,
@ID_DATOS_DEPORTISTA BIGINT, 
@ID_DATOS_ADMINISTRADOR BIGINT, 
@ID_DATOS_ACUDIENTE BIGINT, 
@ID_DATOS_PROGRAMADOR BIGINT, 
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_CUENTA = (SELECT ID_CUENTA FROM REGISTRO_USUARIO WHERE ID_REGISTRO_USUARIO = @ID) 

SET @ID_DATOS_CUENTA = (SELECT ID_DATOS_CUENTA FROM CUENTA WHERE ID_CUENTA = @ID_CUENTA)

SET @ID_DATOS_CONTACTO = (SELECT ID_DATOS_CONTACTO FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_SEGURIDAD = (SELECT ID_DATOS_SEGURIDAD FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PERSONALES = (SELECT ID_DATOS_PERSONALES FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_DEPORTISTA = (SELECT ID_DATOS_DEPORTISTA FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ADMINISTRADOR =(SELECT ID_DATOS_ADMINISTRADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ACUDIENTE = (SELECT ID_DATOS_ACUDIENTE FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PROGRAMADOR = (SELECT ID_DATOS_PROGRAMADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ENTRENADOR = (SELECT ID_DATOS_ENTRENADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE UPDATE_DATOS_CUENTA
@ID_DATOS_CONTACTO,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_PERSONALES,
@ID_SEDE,
@EPS,
@DIRECCION_RESIDENCIA,
@CELULAR,
@TELEFONO_FIJO,
@ID_PREGUNTA_SEGURIDAD,
@RESPUESTA_PREGUNTA_SEGURIDAD,
@FECHA_ULTIMO_CIERRE_SESION,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA,
@PRIMER_APELLIDO,
@SEGUNDO_APELLIDO,
@PRIMER_NOMBRE,
@SEGUNDO_NOMBRE,
@GENERO,
@TIPO_DOCUMENTO,
@NUMERO_DOCUMENTO,
@FECHA_NACIMIENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXECUTE UPDATE_DATOS_DEPORTISTA
@ID_DATOS_DEPORTISTA,
@ID_CATEGORIA_EDAD,
@ID_CINTURON,
@ID_HORARIO,
@ID_TIPO_MENSUALIDAD,
@PESO_DEPORTISTA,
@ESTATURA_DEPORTISTA,
@TIPO_SANGRE_DEPORTISTA,
@FOTOCOPIA_DOCUMENTO_ID,
@FOTOCOPIA_CARNE_EPS,
@CERTIFICADO_MEDICO_DEPORTISTA,
@FOTO_DEPORTISTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
DECLARE @NOMBRE_REGISTRADOR VARCHAR(50),
@CARGO_REGISTRADOR VARCHAR(50)

IF EXISTS (SELECT * FROM VIEW_PROGRAM)
BEGIN
SET @NOMBRE_REGISTRADOR = (SELECT PRIMER_NOMBRE + ' ' + PRIMER_APELLIDO FROM VIEW_PROGRAM)
SET @CARGO_REGISTRADOR = (SELECT NOMBRE_TIPO_CUENTA FROM VIEW_PROGRAM)
END
ELSE
BEGIN
SET @NOMBRE_REGISTRADOR = 'ENCRYPTCODE'
SET @CARGO_REGISTRADOR = 'PROGRAMADOR'
END
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
EXECUTE UPDATE_REGISTRO_CUENTA
@ID,
@ID_CUENTA,
@ID_DATOS_CUENTA,
@ID_DATOS_DEPORTISTA,
@ID_DATOS_ADMINISTRADOR,
@ID_DATOS_ACUDIENTE,
@ID_DATOS_PROGRAMADOR,
@ID_DATOS_ENTRENADOR,
@ID_TIPO_CUENTA,
@CONTRASEÑA,
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
@ESTADO_CUENTA,
@CORREO,
@RED,
@GREEN,
@BLUE,
@RED1,
@GREEN1,
@BLUE1,
@FOTO_PERFIL,
@NOMBRE_REGISTRADOR,
@CARGO_REGISTRADOR,
@FECHA_EXPIRACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_R_DEPORTISTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_PERSONALES BIGINT,
@ID_CUENTA BIGINT,
@ID_DATOS_CUENTA BIGINT,
@ID_DATOS_DEPORTISTA BIGINT, 
@ID_DATOS_ADMINISTRADOR BIGINT, 
@ID_DATOS_ACUDIENTE BIGINT, 
@ID_DATOS_PROGRAMADOR BIGINT, 
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_CUENTA = (SELECT ID_CUENTA FROM REGISTRO_USUARIO WHERE ID_REGISTRO_USUARIO = @ID) 

SET @ID_DATOS_CUENTA = (SELECT ID_DATOS_CUENTA FROM CUENTA WHERE ID_CUENTA = @ID_CUENTA)

SET @ID_DATOS_CONTACTO = (SELECT ID_DATOS_CONTACTO FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_SEGURIDAD = (SELECT ID_DATOS_SEGURIDAD FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PERSONALES = (SELECT ID_DATOS_PERSONALES FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_DEPORTISTA = (SELECT ID_DATOS_DEPORTISTA FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ADMINISTRADOR =(SELECT ID_DATOS_ADMINISTRADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ACUDIENTE = (SELECT ID_DATOS_ACUDIENTE FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PROGRAMADOR = (SELECT ID_DATOS_PROGRAMADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ENTRENADOR = (SELECT ID_DATOS_ENTRENADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE DELETE_REGISTRO_CUENTA
@ID,
@ID_CUENTA,
@ID_DATOS_CUENTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXECUTE DELETE_DATOS_CUENTA
@ID_DATOS_CONTACTO,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_PERSONALES
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
EXECUTE DELETE_DATOS_DEPORTISTA
@ID_DATOS_DEPORTISTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
EXECUTE DELETE_CUMPLEAÑOS
@ID
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 6----
BEGIN
DECLARE @ID_DEPORTISTA BIGINT

SET  @ID_DEPORTISTA = (SELECT ID_DEPORTISTA FROM DEPORTISTA 
WHERE ID_DATOS_DEPORTISTA = @ID_DATOS_DEPORTISTA 
AND ID_DATOS_CONTACTO = @ID_DATOS_CONTACTO 
AND ID_DATOS_PERSONALES = @ID_DATOS_PERSONALES)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 7----
BEGIN
EXECUTE DELETE_DEPORTISTA
@ID_DEPORTISTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC SELECT_R_DEPORTISTA
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT * FROM VIEW_REGISTRO_DEPORTISTA
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC PROGSELECT_R_DEPORTISTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID BIGINT
SET @ID = (SELECT DD.ID_DATOS_DEPORTISTA
FROM PROGRAM P
INNER JOIN CUENTA C
ON C.ID_CUENTA = P.ID_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_DEPORTISTA DD
ON DD.ID_DATOS_DEPORTISTA  = DC.ID_DATOS_DEPORTISTA );
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT * FROM VIEW_REGISTRO_DEPORTISTA
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC TSELECT_R_DEPORTISTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_REGISTRO_DEPORTISTA;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

--R_ENTRENADOR
CREATE PROC INSERT_R_ENTRENADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR BIGINT,
@TELEFONO_FIJO BIGINT,
@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX),
@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE,

@ESTADO_ENTRENADOR VARCHAR(50),
@GRADO_DAN_ENTRENADOR INT,
@DESCRIPCION_ESTUDIO_ENTRENADOR VARCHAR(MAX),
@SUELDO_ENTRENADOR MONEY,
@HOJA_DE_VIDA_ENTRENADOR IMAGE,

@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE,
@FECHA_EXPIRACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
EXECUTE INSERT_DATOS_CUENTA
@ID_SEDE,
@EPS,
@DIRECCION_RESIDENCIA,
@CELULAR,
@TELEFONO_FIJO,
@ID_PREGUNTA_SEGURIDAD,
@RESPUESTA_PREGUNTA_SEGURIDAD,
@PRIMER_APELLIDO,
@SEGUNDO_APELLIDO,
@PRIMER_NOMBRE,
@SEGUNDO_NOMBRE,
@GENERO,
@TIPO_DOCUMENTO,
@NUMERO_DOCUMENTO,
@FECHA_NACIMIENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE INSERT_DATOS_ENTRENADOR
@ESTADO_ENTRENADOR,
@GRADO_DAN_ENTRENADOR,
@DESCRIPCION_ESTUDIO_ENTRENADOR,
@SUELDO_ENTRENADOR,
@HOJA_DE_VIDA_ENTRENADOR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
DECLARE @ID_DATOS_PERSONALES BIGINT,
@ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_DEPORTISTA BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_ADMINISTRADOR BIGINT,
@ID_DATOS_ACUDIENTE BIGINT,
@ID_DATOS_PROGRAMADOR BIGINT,
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_DATOS_PERSONALES = (SELECT MAX(ID_DATOS_PERSONALES) FROM DATOS_PERSONALES)
SET @ID_DATOS_CONTACTO = (SELECT MAX(ID_DATOS_CONTACTO) FROM DATOS_CONTACTO)
SET @ID_DATOS_DEPORTISTA = NULL
SET @ID_DATOS_SEGURIDAD = (SELECT MAX(ID_DATOS_SEGURIDAD) FROM DATOS_SEGURIDAD)
SET @ID_DATOS_ADMINISTRADOR = NULL
SET @ID_DATOS_ACUDIENTE = NULL
SET @ID_DATOS_PROGRAMADOR = NULL
SET @ID_DATOS_ENTRENADOR = (SELECT MAX(ID_DATOS_ENTRENADOR) FROM DATOS_ENTRENADOR)

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
EXECUTE INSERT_ENTRENADOR
@ID_DATOS_PERSONALES,
@ID_DATOS_CONTACTO,
@ID_DATOS_ENTRENADOR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
DECLARE @NOMBRE_REGISTRADOR VARCHAR(50),
@CARGO_REGISTRADOR VARCHAR(50)

IF EXISTS (SELECT * FROM VIEW_PROGRAM)
BEGIN
SET @NOMBRE_REGISTRADOR = (SELECT PRIMER_NOMBRE + ' ' + PRIMER_APELLIDO FROM VIEW_PROGRAM)
SET @CARGO_REGISTRADOR = (SELECT NOMBRE_TIPO_CUENTA FROM VIEW_PROGRAM)
END
ELSE
BEGIN
SET @NOMBRE_REGISTRADOR = 'ENCRYPTCODE'
SET @CARGO_REGISTRADOR = 'PROGRAMADOR'
END
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 6----
BEGIN
EXECUTE INSERT_REGISTRO_CUENTA
@ID_DATOS_PERSONALES,
@ID_DATOS_CONTACTO,
@ID_DATOS_DEPORTISTA,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_ADMINISTRADOR,
@ID_DATOS_ACUDIENTE,
@ID_DATOS_PROGRAMADOR,
@ID_DATOS_ENTRENADOR,
@ID_TIPO_CUENTA,
@CONTRASEÑA,
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
@ESTADO_CUENTA,
@CORREO,
@RED,
@GREEN,
@BLUE,
@RED1,
@GREEN1,
@BLUE1,
@FOTO_PERFIL,
@NOMBRE_REGISTRADOR,
@CARGO_REGISTRADOR,
@FECHA_EXPIRACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_R_ENTRENADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,

@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR BIGINT,
@TELEFONO_FIJO BIGINT,
@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX),
@FECHA_ULTIMO_CIERRE_SESION DATE,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA DATE,
@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE,

@ESTADO_ENTRENADOR VARCHAR(50),
@HOJA_DE_VIDA_ENTRENADOR VARCHAR(MAX),
@GRADO_DAN_ENTRENADOR INT,
@DESCRIPCION_ESTUDIO_ENTRENADOR VARCHAR(MAX),
@SUELDO_ENTRENADOR MONEY,

@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE,
@FECHA_EXPIRACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_PERSONALES BIGINT,
@ID_CUENTA BIGINT,
@ID_DATOS_CUENTA BIGINT,
@ID_DATOS_DEPORTISTA BIGINT, 
@ID_DATOS_ADMINISTRADOR BIGINT, 
@ID_DATOS_ACUDIENTE BIGINT, 
@ID_DATOS_PROGRAMADOR BIGINT, 
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_CUENTA = (SELECT ID_CUENTA FROM REGISTRO_USUARIO WHERE ID_REGISTRO_USUARIO = @ID) 

SET @ID_DATOS_CUENTA = (SELECT ID_DATOS_CUENTA FROM CUENTA WHERE ID_CUENTA = @ID_CUENTA)

SET @ID_DATOS_CONTACTO = (SELECT ID_DATOS_CONTACTO FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_SEGURIDAD = (SELECT ID_DATOS_SEGURIDAD FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PERSONALES = (SELECT ID_DATOS_PERSONALES FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_DEPORTISTA = (SELECT ID_DATOS_DEPORTISTA FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ADMINISTRADOR =(SELECT ID_DATOS_ADMINISTRADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ACUDIENTE = (SELECT ID_DATOS_ACUDIENTE FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PROGRAMADOR = (SELECT ID_DATOS_PROGRAMADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ENTRENADOR = (SELECT ID_DATOS_ENTRENADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE UPDATE_DATOS_CUENTA
@ID_DATOS_CONTACTO,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_PERSONALES,
@ID_SEDE,
@EPS,
@DIRECCION_RESIDENCIA,
@CELULAR,
@TELEFONO_FIJO,
@ID_PREGUNTA_SEGURIDAD,
@RESPUESTA_PREGUNTA_SEGURIDAD,
@FECHA_ULTIMO_CIERRE_SESION,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA,
@PRIMER_APELLIDO,
@SEGUNDO_APELLIDO,
@PRIMER_NOMBRE,
@SEGUNDO_NOMBRE,
@GENERO,
@TIPO_DOCUMENTO,
@NUMERO_DOCUMENTO,
@FECHA_NACIMIENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXECUTE UPDATE_DATOS_ENTRENADOR
@SUELDO_ENTRENADOR,	
@ESTADO_ENTRENADOR,
@HOJA_DE_VIDA_ENTRENADOR,
@GRADO_DAN_ENTRENADOR,
@DESCRIPCION_ESTUDIO_ENTRENADOR,
@SUELDO_ENTRENADOR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
DECLARE @NOMBRE_REGISTRADOR VARCHAR(50),
@CARGO_REGISTRADOR VARCHAR(50)

IF EXISTS (SELECT * FROM VIEW_PROGRAM)
BEGIN
SET @NOMBRE_REGISTRADOR = (SELECT PRIMER_NOMBRE + ' ' + PRIMER_APELLIDO FROM VIEW_PROGRAM)
SET @CARGO_REGISTRADOR = (SELECT NOMBRE_TIPO_CUENTA FROM VIEW_PROGRAM)
END
ELSE
BEGIN
SET @NOMBRE_REGISTRADOR = 'ENCRYPTCODE'
SET @CARGO_REGISTRADOR = 'PROGRAMADOR'
END
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
EXECUTE UPDATE_REGISTRO_CUENTA
@ID,
@ID_CUENTA,
@ID_DATOS_CUENTA,
@ID_DATOS_DEPORTISTA,
@ID_DATOS_ADMINISTRADOR,
@ID_DATOS_ACUDIENTE,
@ID_DATOS_PROGRAMADOR,
@ID_DATOS_ENTRENADOR,
@ID_TIPO_CUENTA,
@CONTRASEÑA,
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
@ESTADO_CUENTA,
@CORREO,
@RED,
@GREEN,
@BLUE,
@RED1,
@GREEN1,
@BLUE1,
@FOTO_PERFIL,
@NOMBRE_REGISTRADOR,
@CARGO_REGISTRADOR,
@FECHA_EXPIRACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 6----
BEGIN
DECLARE @MES_CUMPLEAÑOS INT, 
@DIA_CUMPLEAÑOS INT

SET @MES_CUMPLEAÑOS = MONTH(@FECHA_NACIMIENTO)
SET @DIA_CUMPLEAÑOS = DAY(@FECHA_NACIMIENTO)

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 7----
BEGIN
EXECUTE UPDATE_CUMPLEAÑOS
@ID,
@MES_CUMPLEAÑOS,
@DIA_CUMPLEAÑOS
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_R_ENTRENADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_PERSONALES BIGINT,
@ID_CUENTA BIGINT,
@ID_DATOS_CUENTA BIGINT,
@ID_DATOS_DEPORTISTA BIGINT, 
@ID_DATOS_ADMINISTRADOR BIGINT, 
@ID_DATOS_ACUDIENTE BIGINT, 
@ID_DATOS_PROGRAMADOR BIGINT, 
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_CUENTA = (SELECT ID_CUENTA FROM REGISTRO_USUARIO WHERE ID_REGISTRO_USUARIO = @ID) 

SET @ID_DATOS_CUENTA = (SELECT ID_DATOS_CUENTA FROM CUENTA WHERE ID_CUENTA = @ID_CUENTA)

SET @ID_DATOS_CONTACTO = (SELECT ID_DATOS_CONTACTO FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_SEGURIDAD = (SELECT ID_DATOS_SEGURIDAD FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PERSONALES = (SELECT ID_DATOS_PERSONALES FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_DEPORTISTA = (SELECT ID_DATOS_DEPORTISTA FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ADMINISTRADOR =(SELECT ID_DATOS_ADMINISTRADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ACUDIENTE = (SELECT ID_DATOS_ACUDIENTE FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PROGRAMADOR = (SELECT ID_DATOS_PROGRAMADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ENTRENADOR = (SELECT ID_DATOS_ENTRENADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE DELETE_DATOS_CUENTA
@ID_DATOS_CONTACTO,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_PERSONALES
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXECUTE DELETE_DATOS_ENTRENADOR
@ID_DATOS_ENTRENADOR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
EXECUTE DELETE_REGISTRO_CUENTA
@ID,
@ID_CUENTA,
@ID_DATOS_CUENTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
EXECUTE DELETE_CUMPLEAÑOS
@ID
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 6----
BEGIN
DECLARE @ID_ENTRENADOR BIGINT

SET  @ID_ENTRENADOR = (SELECT ID_ENTRENADOR FROM ENTRENADOR
WHERE ID_DATOS_ENTRENADOR = @ID_DATOS_ENTRENADOR
AND ID_DATOS_CONTACTO = @ID_DATOS_CONTACTO 
AND ID_DATOS_PERSONALES = @ID_DATOS_PERSONALES)
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 7----
BEGIN
EXECUTE DELETE_ENTRENADOR
@ID_ENTRENADOR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC SELECT_R_ENTRENADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT * FROM VIEW_REGISTRO_ENTRENADOR
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC PROGSELECT_R_ENTRENADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID BIGINT
SET @ID = (SELECT DE.ID_DATOS_ENTRENADOR
FROM PROGRAM P
INNER JOIN CUENTA C
ON C.ID_CUENTA = P.ID_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_ENTRENADOR DE
ON DE.ID_DATOS_ENTRENADOR  = DC.ID_DATOS_ENTRENADOR );
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT * FROM VIEW_REGISTRO_ENTRENADOR
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC TSELECT_R_ENTRENADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_REGISTRO_ENTRENADOR;
END
GO

--R_ADMINISTRADOR
CREATE PROC INSERT_R_ADMINISTRADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR BIGINT,
@TELEFONO_FIJO BIGINT,
@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX),
@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE,

@ID_CARGO BIGINT,
@CODIGO_ADMINISTARDOR VARCHAR(50),
@CONTRASEÑA_CORREO VARCHAR(MAX),

@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE,
@FECHA_EXPIRACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
EXECUTE INSERT_DATOS_CUENTA
@ID_SEDE,
@EPS,
@DIRECCION_RESIDENCIA,
@CELULAR,
@TELEFONO_FIJO,
@ID_PREGUNTA_SEGURIDAD,
@RESPUESTA_PREGUNTA_SEGURIDAD,
@PRIMER_APELLIDO,
@SEGUNDO_APELLIDO,
@PRIMER_NOMBRE,
@SEGUNDO_NOMBRE,
@GENERO,
@TIPO_DOCUMENTO,
@NUMERO_DOCUMENTO,
@FECHA_NACIMIENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE INSERT_DATOS_ADMINISTRADOR
@ID_CARGO,
@CODIGO_ADMINISTARDOR,
@CONTRASEÑA_CORREO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
DECLARE @ID_DATOS_PERSONALES BIGINT,
@ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_DEPORTISTA BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_ADMINISTRADOR BIGINT,
@ID_DATOS_ACUDIENTE BIGINT,
@ID_DATOS_PROGRAMADOR BIGINT,
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_DATOS_PERSONALES = (SELECT MAX(ID_DATOS_PERSONALES) FROM DATOS_PERSONALES)
SET @ID_DATOS_CONTACTO = (SELECT MAX(ID_DATOS_CONTACTO) FROM DATOS_CONTACTO)
SET @ID_DATOS_DEPORTISTA = NULL
SET @ID_DATOS_SEGURIDAD = (SELECT MAX(ID_DATOS_SEGURIDAD) FROM DATOS_SEGURIDAD)
SET @ID_DATOS_ADMINISTRADOR = (SELECT MAX(ID_DATOS_ADMINISTRADOR) FROM DATOS_ADMINISTRADOR)
SET @ID_DATOS_ACUDIENTE = NULL
SET @ID_DATOS_PROGRAMADOR = NULL
SET @ID_DATOS_ENTRENADOR = NULL

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
DECLARE @NOMBRE_REGISTRADOR VARCHAR(50),
@CARGO_REGISTRADOR VARCHAR(50)

IF EXISTS (SELECT * FROM VIEW_PROGRAM)
BEGIN
SET @NOMBRE_REGISTRADOR = (SELECT PRIMER_NOMBRE + ' ' + PRIMER_APELLIDO FROM VIEW_PROGRAM)
SET @CARGO_REGISTRADOR = (SELECT NOMBRE_TIPO_CUENTA FROM VIEW_PROGRAM)
END
ELSE
BEGIN
SET @NOMBRE_REGISTRADOR = 'ENCRYPTCODE'
SET @CARGO_REGISTRADOR = 'PROGRAMADOR'
END
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
EXECUTE INSERT_REGISTRO_CUENTA
@ID_DATOS_PERSONALES,
@ID_DATOS_CONTACTO,
@ID_DATOS_DEPORTISTA,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_ADMINISTRADOR,
@ID_DATOS_ACUDIENTE,
@ID_DATOS_PROGRAMADOR,
@ID_DATOS_ENTRENADOR,
@ID_TIPO_CUENTA,
@CONTRASEÑA,
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
@ESTADO_CUENTA,
@CORREO,
@RED,
@GREEN,
@BLUE,
@RED1,
@GREEN1,
@BLUE1,
@FOTO_PERFIL,
@NOMBRE_REGISTRADOR,
@CARGO_REGISTRADOR,
@FECHA_EXPIRACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_R_ADMINISTRADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,

@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR BIGINT,
@TELEFONO_FIJO BIGINT,
@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX),
@FECHA_ULTIMO_CIERRE_SESION DATE,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA DATE,
@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE,

@ID_CARGO BIGINT,
@CODIGO_ADMINISTARDOR VARCHAR(50),
@CONTRASEÑA_CORREO VARCHAR(MAX),

@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE,
@FECHA_EXPIRACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_PERSONALES BIGINT,
@ID_CUENTA BIGINT,
@ID_DATOS_CUENTA BIGINT,
@ID_DATOS_DEPORTISTA BIGINT, 
@ID_DATOS_ADMINISTRADOR BIGINT, 
@ID_DATOS_ACUDIENTE BIGINT, 
@ID_DATOS_PROGRAMADOR BIGINT, 
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_CUENTA = (SELECT ID_CUENTA FROM REGISTRO_USUARIO WHERE ID_REGISTRO_USUARIO = @ID) 

SET @ID_DATOS_CUENTA = (SELECT ID_DATOS_CUENTA FROM CUENTA WHERE ID_CUENTA = @ID_CUENTA)

SET @ID_DATOS_CONTACTO = (SELECT ID_DATOS_CONTACTO FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_SEGURIDAD = (SELECT ID_DATOS_SEGURIDAD FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PERSONALES = (SELECT ID_DATOS_PERSONALES FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_DEPORTISTA = (SELECT ID_DATOS_DEPORTISTA FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ADMINISTRADOR =(SELECT ID_DATOS_ADMINISTRADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ACUDIENTE = (SELECT ID_DATOS_ACUDIENTE FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PROGRAMADOR = (SELECT ID_DATOS_PROGRAMADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ENTRENADOR = (SELECT ID_DATOS_ENTRENADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE UPDATE_DATOS_CUENTA
@ID_DATOS_CONTACTO,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_PERSONALES,
@ID_SEDE,
@EPS,
@DIRECCION_RESIDENCIA,
@CELULAR,
@TELEFONO_FIJO,
@ID_PREGUNTA_SEGURIDAD,
@RESPUESTA_PREGUNTA_SEGURIDAD,
@FECHA_ULTIMO_CIERRE_SESION,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA,
@PRIMER_APELLIDO,
@SEGUNDO_APELLIDO,
@PRIMER_NOMBRE,
@SEGUNDO_NOMBRE,
@GENERO,
@TIPO_DOCUMENTO,
@NUMERO_DOCUMENTO,
@FECHA_NACIMIENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXECUTE UPDATE_DATOS_ADMINISTRADOR
@ID_DATOS_ADMINISTRADOR,
@ID_CARGO,
@CODIGO_ADMINISTARDOR,
@CONTRASEÑA_CORREO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
DECLARE @NOMBRE_REGISTRADOR VARCHAR(50),
@CARGO_REGISTRADOR VARCHAR(50)

IF EXISTS (SELECT * FROM VIEW_PROGRAM)
BEGIN
SET @NOMBRE_REGISTRADOR = (SELECT PRIMER_NOMBRE + ' ' + PRIMER_APELLIDO FROM VIEW_PROGRAM)
SET @CARGO_REGISTRADOR = (SELECT NOMBRE_TIPO_CUENTA FROM VIEW_PROGRAM)
END
ELSE
BEGIN
SET @NOMBRE_REGISTRADOR = 'ENCRYPTCODE'
SET @CARGO_REGISTRADOR = 'PROGRAMADOR'
END
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
EXECUTE UPDATE_REGISTRO_CUENTA
@ID,
@ID_CUENTA,
@ID_DATOS_CUENTA,
@ID_DATOS_DEPORTISTA,
@ID_DATOS_ADMINISTRADOR,
@ID_DATOS_ACUDIENTE,
@ID_DATOS_PROGRAMADOR,
@ID_DATOS_ENTRENADOR,
@ID_TIPO_CUENTA,
@CONTRASEÑA,
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
@ESTADO_CUENTA,
@CORREO,
@RED,
@GREEN,
@BLUE,
@RED1,
@GREEN1,
@BLUE1,
@FOTO_PERFIL,
@NOMBRE_REGISTRADOR,
@CARGO_REGISTRADOR,
@FECHA_EXPIRACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_R_ADMINISTRADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_PERSONALES BIGINT,
@ID_CUENTA BIGINT,
@ID_DATOS_CUENTA BIGINT,
@ID_DATOS_DEPORTISTA BIGINT, 
@ID_DATOS_ADMINISTRADOR BIGINT, 
@ID_DATOS_ACUDIENTE BIGINT, 
@ID_DATOS_PROGRAMADOR BIGINT, 
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_CUENTA = (SELECT ID_CUENTA FROM REGISTRO_USUARIO WHERE ID_REGISTRO_USUARIO = @ID) 

SET @ID_DATOS_CUENTA = (SELECT ID_DATOS_CUENTA FROM CUENTA WHERE ID_CUENTA = @ID_CUENTA)

SET @ID_DATOS_CONTACTO = (SELECT ID_DATOS_CONTACTO FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_SEGURIDAD = (SELECT ID_DATOS_SEGURIDAD FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PERSONALES = (SELECT ID_DATOS_PERSONALES FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_DEPORTISTA = (SELECT ID_DATOS_DEPORTISTA FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ADMINISTRADOR = (SELECT ID_DATOS_ADMINISTRADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ACUDIENTE = (SELECT ID_DATOS_ACUDIENTE FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PROGRAMADOR = (SELECT ID_DATOS_PROGRAMADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ENTRENADOR = (SELECT ID_DATOS_ENTRENADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE DELETE_DATOS_CUENTA
@ID_DATOS_CONTACTO,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_PERSONALES
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXECUTE DELETE_DATOS_ADMINISTRADOR
@ID_DATOS_ADMINISTRADOR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
EXECUTE DELETE_REGISTRO_CUENTA
@ID,
@ID_CUENTA,
@ID_DATOS_CUENTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
EXECUTE DELETE_CUMPLEAÑOS
@ID
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC SELECT_R_ADMINISTRADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT * FROM VIEW_REGISTRO_ADMINISTRADOR
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC PROGSELECT_R_ADMINISTRADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID BIGINT
SET @ID = (SELECT DA.ID_DATOS_ADMINISTRADOR
FROM PROGRAM P
INNER JOIN CUENTA C
ON C.ID_CUENTA = P.ID_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_ADMINISTRADOR DA
ON DA.ID_DATOS_ADMINISTRADOR  = DC.ID_DATOS_ADMINISTRADOR );
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT * FROM VIEW_REGISTRO_ADMINISTRADOR
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC TSELECT_R_ADMINISTRADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_REGISTRO_ADMINISTRADOR;
END
GO

--R_PROGRAMADOR
CREATE PROC INSERT_R_PROGRAMADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR BIGINT,
@TELEFONO_FIJO BIGINT,
@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX),
@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE,

@CODIGO_PROGRAMADOR VARCHAR(50),
@CONTRASEÑA_PROGRAMADOR_1 VARCHAR(50),
@CONTRASEÑA_PROGRAMADOR_2 VARCHAR(50),
@CODIGO_DESBLOQUEO VARCHAR(50),
@NUMERO_ACTIVACION INT,

@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE,
@FECHA_EXPIRACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
EXECUTE INSERT_DATOS_CUENTA
@ID_SEDE,
@EPS,
@DIRECCION_RESIDENCIA,
@CELULAR,
@TELEFONO_FIJO,
@ID_PREGUNTA_SEGURIDAD,
@RESPUESTA_PREGUNTA_SEGURIDAD,
@PRIMER_APELLIDO,
@SEGUNDO_APELLIDO,
@PRIMER_NOMBRE,
@SEGUNDO_NOMBRE,
@GENERO,
@TIPO_DOCUMENTO,
@NUMERO_DOCUMENTO,
@FECHA_NACIMIENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE INSERT_DATOS_PROGRAMADOR
@CODIGO_PROGRAMADOR,
@CONTRASEÑA_PROGRAMADOR_1,
@CONTRASEÑA_PROGRAMADOR_2,
@CODIGO_DESBLOQUEO,
@NUMERO_ACTIVACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
DECLARE @ID_DATOS_PERSONALES BIGINT,
@ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_DEPORTISTA BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_ADMINISTRADOR BIGINT,
@ID_DATOS_ACUDIENTE BIGINT,
@ID_DATOS_PROGRAMADOR BIGINT,
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_DATOS_PERSONALES = (SELECT MAX(ID_DATOS_PERSONALES) FROM DATOS_PERSONALES)
SET @ID_DATOS_CONTACTO = (SELECT MAX(ID_DATOS_CONTACTO) FROM DATOS_CONTACTO)
SET @ID_DATOS_DEPORTISTA = NULL
SET @ID_DATOS_SEGURIDAD = (SELECT MAX(ID_DATOS_SEGURIDAD) FROM DATOS_SEGURIDAD)
SET @ID_DATOS_ADMINISTRADOR = NULL
SET @ID_DATOS_ACUDIENTE = NULL
SET @ID_DATOS_PROGRAMADOR = (SELECT MAX(ID_DATOS_PROGRAMADOR) FROM DATOS_PROGRAMADOR)
SET @ID_DATOS_ENTRENADOR = NULL

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
DECLARE @NOMBRE_REGISTRADOR VARCHAR(50),
@CARGO_REGISTRADOR VARCHAR(50)

IF EXISTS (SELECT * FROM VIEW_PROGRAM)
BEGIN
SET @NOMBRE_REGISTRADOR = (SELECT PRIMER_NOMBRE + ' ' + PRIMER_APELLIDO FROM VIEW_PROGRAM)
SET @CARGO_REGISTRADOR = (SELECT NOMBRE_TIPO_CUENTA FROM VIEW_PROGRAM)
END
ELSE
BEGIN
SET @NOMBRE_REGISTRADOR = 'ENCRYPTCODE'
SET @CARGO_REGISTRADOR = 'PROGRAMADOR'
END
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
EXECUTE INSERT_REGISTRO_CUENTA
@ID_DATOS_PERSONALES,
@ID_DATOS_CONTACTO,
@ID_DATOS_DEPORTISTA,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_ADMINISTRADOR,
@ID_DATOS_ACUDIENTE,
@ID_DATOS_PROGRAMADOR,
@ID_DATOS_ENTRENADOR,
@ID_TIPO_CUENTA,
@CONTRASEÑA,
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
@ESTADO_CUENTA,
@CORREO,
@RED,
@GREEN,
@BLUE,
@RED1,
@GREEN1,
@BLUE1,
@FOTO_PERFIL,
@NOMBRE_REGISTRADOR,
@CARGO_REGISTRADOR,
@FECHA_EXPIRACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_R_PROGRAMADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,

@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR BIGINT,
@TELEFONO_FIJO BIGINT,
@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX),
@FECHA_ULTIMO_CIERRE_SESION DATE,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA DATE,
@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE,

@CODIGO_PROGRAMADOR VARCHAR(50),
@CONTRASEÑA_PROGRAMADOR_1 VARCHAR(50),
@CONTRASEÑA_PROGRAMADOR_2 VARCHAR(50),
@CODIGO_DESBLOQUEO VARCHAR(50),
@NUMERO_ACTIVACION INT,

@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE,
@FECHA_EXPIRACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_PERSONALES BIGINT,
@ID_CUENTA BIGINT,
@ID_DATOS_CUENTA BIGINT,
@ID_DATOS_DEPORTISTA BIGINT, 
@ID_DATOS_ADMINISTRADOR BIGINT, 
@ID_DATOS_ACUDIENTE BIGINT, 
@ID_DATOS_PROGRAMADOR BIGINT, 
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_CUENTA = (SELECT ID_CUENTA FROM REGISTRO_USUARIO WHERE ID_REGISTRO_USUARIO = @ID) 

SET @ID_DATOS_CUENTA = (SELECT ID_DATOS_CUENTA FROM CUENTA WHERE ID_CUENTA = @ID_CUENTA)

SET @ID_DATOS_CONTACTO = (SELECT ID_DATOS_CONTACTO FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_SEGURIDAD = (SELECT ID_DATOS_SEGURIDAD FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PERSONALES = (SELECT ID_DATOS_PERSONALES FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_DEPORTISTA = (SELECT ID_DATOS_DEPORTISTA FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ADMINISTRADOR =(SELECT ID_DATOS_ADMINISTRADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ACUDIENTE = (SELECT ID_DATOS_ACUDIENTE FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PROGRAMADOR = (SELECT ID_DATOS_PROGRAMADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ENTRENADOR = (SELECT ID_DATOS_ENTRENADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE UPDATE_DATOS_CUENTA
@ID_DATOS_CONTACTO,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_PERSONALES,
@ID_SEDE,
@EPS,
@DIRECCION_RESIDENCIA,
@CELULAR,
@TELEFONO_FIJO,
@ID_PREGUNTA_SEGURIDAD,
@RESPUESTA_PREGUNTA_SEGURIDAD,
@FECHA_ULTIMO_CIERRE_SESION,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA,
@PRIMER_APELLIDO,
@SEGUNDO_APELLIDO,
@PRIMER_NOMBRE,
@SEGUNDO_NOMBRE,
@GENERO,
@TIPO_DOCUMENTO,
@NUMERO_DOCUMENTO,
@FECHA_NACIMIENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXECUTE UPDATE_DATOS_PROGRAMADOR
@ID_DATOS_PROGRAMADOR,
@CODIGO_PROGRAMADOR,
@CONTRASEÑA_PROGRAMADOR_1,
@CONTRASEÑA_PROGRAMADOR_2,
@CODIGO_DESBLOQUEO,
@NUMERO_ACTIVACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
DECLARE @NOMBRE_REGISTRADOR VARCHAR(50),
@CARGO_REGISTRADOR VARCHAR(50)

IF EXISTS (SELECT * FROM VIEW_PROGRAM)
BEGIN
SET @NOMBRE_REGISTRADOR = (SELECT PRIMER_NOMBRE + ' ' + PRIMER_APELLIDO FROM VIEW_PROGRAM)
SET @CARGO_REGISTRADOR = (SELECT NOMBRE_TIPO_CUENTA FROM VIEW_PROGRAM)
END
ELSE
BEGIN
SET @NOMBRE_REGISTRADOR = 'ENCRYPTCODE'
SET @CARGO_REGISTRADOR = 'PROGRAMADOR'
END
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
EXECUTE UPDATE_REGISTRO_CUENTA
@ID,
@ID_CUENTA,
@ID_DATOS_CUENTA,
@ID_DATOS_DEPORTISTA,
@ID_DATOS_ADMINISTRADOR,
@ID_DATOS_ACUDIENTE,
@ID_DATOS_PROGRAMADOR,
@ID_DATOS_ENTRENADOR,
@ID_TIPO_CUENTA,
@CONTRASEÑA,
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
@ESTADO_CUENTA,
@CORREO,
@RED,
@GREEN,
@BLUE,
@RED1,
@GREEN1,
@BLUE1,
@FOTO_PERFIL,
@NOMBRE_REGISTRADOR,
@CARGO_REGISTRADOR,
@FECHA_EXPIRACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_R_PROGRAMADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_PERSONALES BIGINT,
@ID_CUENTA BIGINT,
@ID_DATOS_CUENTA BIGINT,
@ID_DATOS_DEPORTISTA BIGINT, 
@ID_DATOS_ADMINISTRADOR BIGINT, 
@ID_DATOS_ACUDIENTE BIGINT, 
@ID_DATOS_PROGRAMADOR BIGINT, 
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_CUENTA = (SELECT ID_CUENTA FROM REGISTRO_USUARIO WHERE ID_REGISTRO_USUARIO = @ID) 

SET @ID_DATOS_CUENTA = (SELECT ID_DATOS_CUENTA FROM CUENTA WHERE ID_CUENTA = @ID_CUENTA)

SET @ID_DATOS_CONTACTO = (SELECT ID_DATOS_CONTACTO FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_SEGURIDAD = (SELECT ID_DATOS_SEGURIDAD FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PERSONALES = (SELECT ID_DATOS_PERSONALES FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_DEPORTISTA = (SELECT ID_DATOS_DEPORTISTA FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ADMINISTRADOR =(SELECT ID_DATOS_ADMINISTRADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ACUDIENTE = (SELECT ID_DATOS_ACUDIENTE FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PROGRAMADOR = (SELECT ID_DATOS_PROGRAMADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ENTRENADOR = (SELECT ID_DATOS_ENTRENADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE DELETE_DATOS_CUENTA
@ID_DATOS_CONTACTO,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_PERSONALES
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXECUTE DELETE_DATOS_PROGRAMADOR
@ID_DATOS_PROGRAMADOR
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
EXECUTE DELETE_REGISTRO_CUENTA
@ID,
@ID_CUENTA,
@ID_DATOS_CUENTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
EXECUTE DELETE_CUMPLEAÑOS
@ID
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC SELECT_R_PROGRAMADOR
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT * FROM VIEW_REGISTRO_PROGRAMADOR
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC PROGSELECT_R_PROGRAMADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID BIGINT
SET @ID = (SELECT DP.ID_DATOS_PROGRAMADOR
FROM PROGRAM P
INNER JOIN CUENTA C
ON C.ID_CUENTA = P.ID_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_PROGRAMADOR DP
ON DP.ID_DATOS_PROGRAMADOR  = DC.ID_DATOS_PROGRAMADOR );
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT * FROM VIEW_REGISTRO_PROGRAMADOR
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC TSELECT_R_PROGRAMADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_REGISTRO_PROGRAMADOR;
END
GO

--R_ACUDIENTE
CREATE PROC INSERT_R_ACUDIENTE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR BIGINT,
@TELEFONO_FIJO BIGINT,
@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX),
@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE,

@ID_DEPORTISTA BIGINT,
@EMPLEO_ACUDIENTE VARCHAR(50),
@TELEFONO_TRABAJO_ACUDIENTE BIGINT,

@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE,
@FECHA_EXPIRACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
EXECUTE INSERT_DATOS_CUENTA
@ID_SEDE,
@EPS,
@DIRECCION_RESIDENCIA,
@CELULAR,
@TELEFONO_FIJO,
@ID_PREGUNTA_SEGURIDAD,
@RESPUESTA_PREGUNTA_SEGURIDAD,
@PRIMER_APELLIDO,
@SEGUNDO_APELLIDO,
@PRIMER_NOMBRE,
@SEGUNDO_NOMBRE,
@GENERO,
@TIPO_DOCUMENTO,
@NUMERO_DOCUMENTO,
@FECHA_NACIMIENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE INSERT_DATOS_ACUDIENTE
@ID_DEPORTISTA,
@EMPLEO_ACUDIENTE,
@TELEFONO_TRABAJO_ACUDIENTE
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
DECLARE @ID_DATOS_PERSONALES BIGINT,
@ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_DEPORTISTA BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_ADMINISTRADOR BIGINT,
@ID_DATOS_ACUDIENTE BIGINT,
@ID_DATOS_PROGRAMADOR BIGINT,
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_DATOS_PERSONALES = (SELECT MAX(ID_DATOS_PERSONALES) FROM DATOS_PERSONALES)
SET @ID_DATOS_CONTACTO = (SELECT MAX(ID_DATOS_CONTACTO) FROM DATOS_CONTACTO)
SET @ID_DATOS_DEPORTISTA = NULL
SET @ID_DATOS_SEGURIDAD = (SELECT MAX(ID_DATOS_SEGURIDAD) FROM DATOS_SEGURIDAD)
SET @ID_DATOS_ADMINISTRADOR = NULL
SET @ID_DATOS_ACUDIENTE = (SELECT MAX(ID_DATOS_ACUDIENTE) FROM DATOS_ACUDIENTE)
SET @ID_DATOS_PROGRAMADOR = NULL
SET @ID_DATOS_ENTRENADOR = NULL

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
DECLARE @NOMBRE_REGISTRADOR VARCHAR(50),
@CARGO_REGISTRADOR VARCHAR(50)

IF EXISTS (SELECT * FROM VIEW_PROGRAM)
BEGIN
SET @NOMBRE_REGISTRADOR = (SELECT PRIMER_NOMBRE + ' ' + PRIMER_APELLIDO FROM VIEW_PROGRAM)
SET @CARGO_REGISTRADOR = (SELECT NOMBRE_TIPO_CUENTA FROM VIEW_PROGRAM)
END
ELSE
BEGIN
SET @NOMBRE_REGISTRADOR = 'ENCRYPTCODE'
SET @CARGO_REGISTRADOR = 'PROGRAMADOR'
END
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
EXECUTE INSERT_REGISTRO_CUENTA
@ID_DATOS_PERSONALES,
@ID_DATOS_CONTACTO,
@ID_DATOS_DEPORTISTA,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_ADMINISTRADOR,
@ID_DATOS_ACUDIENTE,
@ID_DATOS_PROGRAMADOR,
@ID_DATOS_ENTRENADOR,
@ID_TIPO_CUENTA,
@CONTRASEÑA,
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
@ESTADO_CUENTA,
@CORREO,
@RED,
@GREEN,
@BLUE,
@RED1,
@GREEN1,
@BLUE1,
@FOTO_PERFIL,
@NOMBRE_REGISTRADOR,
@CARGO_REGISTRADOR,
@FECHA_EXPIRACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC UPDATE_R_ACUDIENTE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT,
@ID_SEDE BIGINT,
@EPS VARCHAR(50),
@DIRECCION_RESIDENCIA VARCHAR(50),
@CELULAR BIGINT,
@TELEFONO_FIJO BIGINT,
@ID_PREGUNTA_SEGURIDAD BIGINT,
@RESPUESTA_PREGUNTA_SEGURIDAD VARCHAR(MAX),
@FECHA_ULTIMO_CIERRE_SESION DATE,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA DATE,
@PRIMER_APELLIDO VARCHAR(50),
@SEGUNDO_APELLIDO VARCHAR(50),
@PRIMER_NOMBRE VARCHAR(50),
@SEGUNDO_NOMBRE VARCHAR(50),
@GENERO VARCHAR(50),
@TIPO_DOCUMENTO VARCHAR(50),
@NUMERO_DOCUMENTO BIGINT,
@FECHA_NACIMIENTO DATE,

@EMPLEO_ACUDIENTE VARCHAR(50),
@TELEFONO_TRABAJO_ACUDIENTE BIGINT,

@ID_TIPO_CUENTA BIGINT,
@CONTRASEÑA VARCHAR(50),
@NOMBRE_USUARIO VARCHAR(50),
@NOMBRE_USUARIO_ALTERNATIVO VARCHAR(50),
@ESTADO_CUENTA VARCHAR(50),
@CORREO VARCHAR(50),
@RED INT,
@GREEN INT,
@BLUE INT,
@RED1 INT,
@GREEN1 INT,
@BLUE1 INT,
@FOTO_PERFIL IMAGE,
@FECHA_EXPIRACION DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_PERSONALES BIGINT,
@ID_CUENTA BIGINT,
@ID_DATOS_CUENTA BIGINT,
@ID_DATOS_DEPORTISTA BIGINT, 
@ID_DATOS_ADMINISTRADOR BIGINT, 
@ID_DATOS_ACUDIENTE BIGINT, 
@ID_DATOS_PROGRAMADOR BIGINT, 
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_CUENTA = (SELECT ID_CUENTA FROM REGISTRO_USUARIO WHERE ID_REGISTRO_USUARIO = @ID) 

SET @ID_DATOS_CUENTA = (SELECT ID_DATOS_CUENTA FROM CUENTA WHERE ID_CUENTA = @ID_CUENTA)

SET @ID_DATOS_CONTACTO = (SELECT ID_DATOS_CONTACTO FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_SEGURIDAD = (SELECT ID_DATOS_SEGURIDAD FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PERSONALES = (SELECT ID_DATOS_PERSONALES FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_DEPORTISTA = (SELECT ID_DATOS_DEPORTISTA FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ADMINISTRADOR =(SELECT ID_DATOS_ADMINISTRADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ACUDIENTE = (SELECT ID_DATOS_ACUDIENTE FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PROGRAMADOR = (SELECT ID_DATOS_PROGRAMADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ENTRENADOR = (SELECT ID_DATOS_ENTRENADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE UPDATE_DATOS_CUENTA
@ID_DATOS_CONTACTO,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_PERSONALES,
@ID_SEDE,
@EPS,
@DIRECCION_RESIDENCIA,
@CELULAR,
@TELEFONO_FIJO,
@ID_PREGUNTA_SEGURIDAD,
@RESPUESTA_PREGUNTA_SEGURIDAD,
@FECHA_ULTIMO_CIERRE_SESION,
@FECHA_ULTIMO_CAMBIO_CONTRASEÑA,
@PRIMER_APELLIDO,
@SEGUNDO_APELLIDO,
@PRIMER_NOMBRE,
@SEGUNDO_NOMBRE,
@GENERO,
@TIPO_DOCUMENTO,
@NUMERO_DOCUMENTO,
@FECHA_NACIMIENTO
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXECUTE UPDATE_DATOS_ACUDIENTE
@ID_DATOS_ACUDIENTE,
@EMPLEO_ACUDIENTE,
@TELEFONO_TRABAJO_ACUDIENTE
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
DECLARE @NOMBRE_REGISTRADOR VARCHAR(50),
@CARGO_REGISTRADOR VARCHAR(50)

IF EXISTS (SELECT * FROM VIEW_PROGRAM)
BEGIN
SET @NOMBRE_REGISTRADOR = (SELECT PRIMER_NOMBRE + ' ' + PRIMER_APELLIDO FROM VIEW_PROGRAM)
SET @CARGO_REGISTRADOR = (SELECT NOMBRE_TIPO_CUENTA FROM VIEW_PROGRAM)
END
ELSE
BEGIN
SET @NOMBRE_REGISTRADOR = 'ENCRYPTCODE'
SET @CARGO_REGISTRADOR = 'PROGRAMADOR'
END
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
EXECUTE UPDATE_REGISTRO_CUENTA
@ID,
@ID_CUENTA,
@ID_DATOS_CUENTA,
@ID_DATOS_DEPORTISTA,
@ID_DATOS_ADMINISTRADOR,
@ID_DATOS_ACUDIENTE,
@ID_DATOS_PROGRAMADOR,
@ID_DATOS_ENTRENADOR,
@ID_TIPO_CUENTA,
@CONTRASEÑA,
@NOMBRE_USUARIO,
@NOMBRE_USUARIO_ALTERNATIVO,
@ESTADO_CUENTA,
@CORREO,
@RED,
@GREEN,
@BLUE,
@RED1,
@GREEN1,
@BLUE1,
@FOTO_PERFIL,
@NOMBRE_REGISTRADOR,
@CARGO_REGISTRADOR,
@FECHA_EXPIRACION
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC DELETE_R_ACUDIENTE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID_DATOS_CONTACTO BIGINT,
@ID_DATOS_SEGURIDAD BIGINT,
@ID_DATOS_PERSONALES BIGINT,
@ID_CUENTA BIGINT,
@ID_DATOS_CUENTA BIGINT,
@ID_DATOS_DEPORTISTA BIGINT, 
@ID_DATOS_ADMINISTRADOR BIGINT, 
@ID_DATOS_ACUDIENTE BIGINT, 
@ID_DATOS_PROGRAMADOR BIGINT, 
@ID_DATOS_ENTRENADOR BIGINT

SET @ID_CUENTA = (SELECT ID_CUENTA FROM REGISTRO_USUARIO WHERE ID_REGISTRO_USUARIO = @ID) 

SET @ID_DATOS_CUENTA = (SELECT ID_DATOS_CUENTA FROM CUENTA WHERE ID_CUENTA = @ID_CUENTA)

SET @ID_DATOS_CONTACTO = (SELECT ID_DATOS_CONTACTO FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_SEGURIDAD = (SELECT ID_DATOS_SEGURIDAD FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PERSONALES = (SELECT ID_DATOS_PERSONALES FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_DEPORTISTA = (SELECT ID_DATOS_DEPORTISTA FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ADMINISTRADOR =(SELECT ID_DATOS_ADMINISTRADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ACUDIENTE = (SELECT ID_DATOS_ACUDIENTE FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_PROGRAMADOR = (SELECT ID_DATOS_PROGRAMADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

SET @ID_DATOS_ENTRENADOR = (SELECT ID_DATOS_ENTRENADOR FROM DATOS_CUENTA WHERE ID_DATOS_CUENTA = @ID_DATOS_CUENTA)

END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
EXECUTE DELETE_DATOS_CUENTA
@ID_DATOS_CONTACTO,
@ID_DATOS_SEGURIDAD,
@ID_DATOS_PERSONALES
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 3----
BEGIN
EXECUTE DELETE_DATOS_ACUDIENTE
@ID_DATOS_ACUDIENTE
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 4----
BEGIN
EXECUTE DELETE_REGISTRO_CUENTA
@ID,
@ID_CUENTA,
@ID_DATOS_CUENTA
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 5----
BEGIN
EXECUTE DELETE_CUMPLEAÑOS
@ID
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO

CREATE PROC SELECT_R_ACUDIENTE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT * FROM VIEW_REGISTRO_ACUDIENTE
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC PROGSELECT_R_ACUDIENTE
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @ID BIGINT
SET @ID = (SELECT DA.ID_DATOS_ACUDIENTE
FROM PROGRAM P
INNER JOIN CUENTA C
ON C.ID_CUENTA = P.ID_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_ACUDIENTE DA
ON DA.ID_DATOS_ACUDIENTE  = DC.ID_DATOS_ACUDIENTE );
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT * FROM VIEW_REGISTRO_ACUDIENTE
WHERE Código = @ID;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC TSELECT_R_ACUDIENTE
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_REGISTRO_ACUDIENTE;
END
GO

--CUMPLEAÑOS
CREATE PROC LIKE_CUMPLEAÑOST
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50), @FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS
WHERE (Primer_nombre+' ' + Primer_apellido LIKE @NAME 
OR Típo_cuenta LIKE @NAME OR Género LIKE @NAME OR Sede LIKE @NAME OR Teléfono_celular LIKE @NAME
OR Teléfono_fijo LIKE @NAME OR Nombre_usuario LIKE @NAME OR Edad_actual LIKE @NAME OR Correo_electrónico LIKE @NAME
OR Días_que_faltan_próximo_año LIKE @NAME OR Días_que_faltan_presente_año LIKE @NAME) AND Fecha_nacimiento >= @FECHA
ORDER BY Días_que_faltan_próximo_año ASC;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC LIKE_CUMPLEAÑOSTT
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS
WHERE Primer_nombre+' ' + Primer_apellido LIKE @NAME 
OR Típo_cuenta LIKE @NAME OR Género LIKE @NAME OR Sede LIKE @NAME OR Teléfono_celular LIKE @NAME
OR Teléfono_fijo LIKE @NAME OR Nombre_usuario LIKE @NAME OR Edad_actual LIKE @NAME OR Correo_electrónico LIKE @NAME
OR Días_que_faltan_próximo_año LIKE @NAME OR Días_que_faltan_presente_año LIKE @NAME
ORDER BY Días_que_faltan_próximo_año ASC;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC LIKE_CUMPLEAÑOSN
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50))
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS
WHERE Primer_nombre+' ' + Primer_apellido LIKE @NAME
ORDER BY Días_que_faltan_próximo_año ASC;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC LIKE_CUMPLEAÑOSTC
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50), @FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS
WHERE (Típo_cuenta LIKE @NAME)
ORDER BY Días_que_faltan_próximo_año ASC;
END
GO

CREATE PROC LIKE_CUMPLEAÑOSG
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50), @FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS
WHERE (Género LIKE @NAME)
ORDER BY Días_que_faltan_próximo_año ASC;
END
GO

CREATE PROC LIKE_CUMPLEAÑOSS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50), @FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS
WHERE Sede LIKE @NAME
ORDER BY Días_que_faltan_próximo_año ASC;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC LIKE_CUMPLEAÑOSTEL
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50), @FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS
WHERE Teléfono_celular LIKE @NAME
OR Teléfono_fijo LIKE @NAME
ORDER BY Días_que_faltan_próximo_año ASC;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC LIKE_CUMPLEAÑOSNUSU
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50), @FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS
WHERE Nombre_usuario LIKE @NAME
ORDER BY Días_que_faltan_próximo_año ASC;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC LIKE_CUMPLEAÑOSCE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50), @FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS
WHERE Correo_electrónico LIKE @NAME
ORDER BY Días_que_faltan_próximo_año ASC;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC LIKE_CUMPLEAÑOSE
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50), @FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS
WHERE Edad_actual LIKE @NAME
ORDER BY Días_que_faltan_próximo_año ASC;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC LIKE_CUMPLEAÑOSDQF
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50), @FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS
WHERE Días_que_faltan_próximo_año LIKE @NAME OR Días_que_faltan_presente_año LIKE @NAME
ORDER BY Días_que_faltan_próximo_año ASC;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC LIKE_CUMPLEAÑOSF
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@NOMBRE VARCHAR(50), @FECHA DATE)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
DECLARE @NAME VARCHAR (50)
SET @NAME = '%'+UPPER(@NOMBRE)+'%'
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 2----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS
WHERE Fecha_nacimiento >= @FECHA
ORDER BY Días_que_faltan_próximo_año ASC;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
GO

CREATE PROC SELECT_CUMPLEAÑOS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» ESTABLECIENDO ATRIBUTOS----
(@ID BIGINT)
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS
WHERE Código = @ID;
END
GO

CREATE PROC TSELECT_CUMPLEAÑOS
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT *
FROM VIEW_CUMPLEAÑOS;
END
GO

CREATE PROC TSELECT_GRAFICAR_CUMPLEAÑOS
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
SELECT Primer_nombre+' ' + Primer_apellido AS Nombre, DATEDIFF(YEAR,
Fecha_nacimiento, GETDATE()) AS Edad
FROM VIEW_CUMPLEAÑOS;
END
GO

----║►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----
----║►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----
----║▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲║----
----╚══════════════════════════════════════════════════════════════════╝----



----╔══════════════════════════════════════════════════════════════════╗----
----║▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼║----
----║►►►►►►►►►►►►►►►►►►►►►►►►►►►► VISTAS ◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----'
----║►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----
CREATE VIEW VIEW_OBJETO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
O.ID_OBJETO AS Código,
O.NOMBRE_OBJETO AS Objeto,
O.DESCRIPCION_OBJETO AS Descripción,
O.VALOR_APROXIMADO_OBJETO AS precio_estimado,
O.FECHA_REGISTRO_OBJETO AS Fecha_de_Actualización,
O.IMAGEN_OBJETO AS Imagen

FROM OBJETO O
WHERE ESTADO = 'ACTIVADO';
GO

CREATE VIEW VIEW_OBJETO_D
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
O.ID_OBJETO AS Código,
O.NOMBRE_OBJETO AS Objeto,
O.DESCRIPCION_OBJETO AS Descripción,
O.VALOR_APROXIMADO_OBJETO AS precio_estimado,
O.FECHA_REGISTRO_OBJETO AS Fecha_de_reciclado,
O.IMAGEN_OBJETO AS Imagen

FROM OBJETO O
WHERE ESTADO = 'DESACTIVADO';
GO

CREATE VIEW VIEW_TIPO_CUENTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
TC.ID_TIPO_CUENTA AS Código,
TC.NOMBRE_TIPO_CUENTA AS Cuenta,
TC.LIMITE_USUARIOS AS Usuarios_soportados,
TC.PERMISOS_TIPO_CUENTA AS Permisos_de_acceso

FROM TIPO_CUENTA TC
GO

CREATE VIEW VIEW_SEDE
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
S.ID_SEDE AS Código,
S.NOMBRE_SEDE AS Sede,
S.PAIS_SEDE AS País,
S.DEPARTAMENTO_SEDE AS Departamento,
S.MUNICIPIO_SEDE AS Municipio,
S.DIRECCION_SEDE AS Dirección,
S.FECHA_FUNDACION_SEDE AS Fecha_de_fundación,
S.IMAGEN_SEDE AS Imágen

FROM SEDE S;
GO

CREATE VIEW VIEW_INVENTARIO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
I.ID_INVENTARIO AS Código,

S.NOMBRE_SEDE AS Sede,

O.NOMBRE_OBJETO AS Objeto,
O.VALOR_APROXIMADO_OBJETO AS Precio_objeto,

I.CANTIDAD_OBJETO_SEDE AS Cantidad,
'$'+O.VALOR_APROXIMADO_OBJETO 
* I.CANTIDAD_OBJETO_SEDE 
AS Valor_total_estimado,
I.FECHA_ACTUALIZACION_INVENTARIO AS Fecha_de_actualización,

O.IMAGEN_OBJETO AS Imágen

FROM INVENTARIO I

INNER JOIN OBJETO O
ON O.ID_OBJETO = I.ID_OBJETO

INNER JOIN SEDE S
ON S.ID_SEDE = I.ID_SEDE;
GO

CREATE VIEW VIEW_TEMA_PREGUNTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
TP.ID_TEMA_PREGUNTA AS Código,
TP.NOMBRE_TEMA_PREGUNTA AS Tema,
'Desde '+ 
CAST ( TP.EDAD_MINIMA_TEMA_PREGUNTA AS VARCHAR ( 50 ) ) 
+' años hasta '+
CAST ( TP.EDAD_MAXIMA_TEMA_PREGUNTA AS VARCHAR ( 50 ) ) 
+' años.'  
AS Intervalo_de_edades

FROM TEMA_PREGUNTA TP;
GO

CREATE VIEW VIEW_PREGUNTA_SEGURIDAD
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
TS.ID_PREGUNTA_SEGURIDAD AS Código,
TS.PREGUNTA AS Pregunta,

TP.NOMBRE_TEMA_PREGUNTA AS Tema,
'Desde '+ CAST ( TP.EDAD_MINIMA_TEMA_PREGUNTA AS VARCHAR ( 50 ) ) +' años hasta '+
CAST ( TP.EDAD_MAXIMA_TEMA_PREGUNTA AS VARCHAR ( 50 ) ) +' años.'  
AS Intervalo_de_edades

FROM PREGUNTA_SEGURIDAD TS

INNER JOIN TEMA_PREGUNTA TP
ON TP.ID_TEMA_PREGUNTA = TS.ID_TEMA_PREGUNTA;
GO

CREATE VIEW VIEW_CARGO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
C.ID_CARGO AS Código,
C.NOMBRE_CARGO AS Cargo,
C.FUNCION_CARGO AS Función,
'Desde ' +
CAST ( C.FECHA_INICIO_CARGO AS VARCHAR ( 50 ) ) + 
' hasta ' + 
CAST ( C.FECHA_REELECCION_CARGO AS VARCHAR ( 50 ) ) 
AS Periodo_de_duración

FROM CARGO C;
GO

CREATE VIEW VIEW_INTENCIDAD_HORARIA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
IH.ID_INTENCIDAD_HORARIA AS Código,

IH.NIVEL_INTENCIDAD_HORARIA AS Nivel_de_intencidad,
IH.N_CLASES_SEMANA AS Clases_por_semana,
IH.DURACION_CLASE AS Duración_clase

FROM INTENCIDAD_HORARIA IH
GO

CREATE VIEW VIEW_TIPO_MENSUALIDAD
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
TM.ID_TIPO_MENSUALIDAD AS Código,

IH.NIVEL_INTENCIDAD_HORARIA AS Nivel_de_intencidad,
IH.N_CLASES_SEMANA AS Clases_por_semana,
IH.DURACION_CLASE AS Duración_clase,

TM.PRECIO_CLASE AS Valor_clase,
TM.PRECIO_MENSUALIDAD AS Valor_mensualidad

FROM TIPO_MENSUALIDAD TM
INNER JOIN INTENCIDAD_HORARIA IH
ON IH.ID_INTENCIDAD_HORARIA = TM.ID_INTENCIDAD_HORARIA;
GO

CREATE VIEW VIEW_CLASE_DOMINGO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
CD.ID_CLASE_DOMINGO AS Código,

CD.HORA_INICIO_CLASE_DOMINGO AS Hora_inicio,
CD.TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO AS Tiempo_de_exparcimiento,
CD.HORA_FINALIZACION_CLASE_DOMINGO AS Hora_finalización

FROM CLASE_DOMINGO CD
GO

CREATE VIEW VIEW_CLASE_SABADO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
CS.ID_CLASE_SABADO AS Código,

CS.HORA_INICIO_CLASE_SABADO AS Hora_inicio,
CS.TIEMPO_EXPARSIMIENTO_CLASE_SABADO AS Tiempo_de_exparcimiento,
CS.HORA_FINALIZACION_CLASE_SABADO AS Hora_finalización

FROM CLASE_SABADO CS
GO

CREATE VIEW VIEW_CLASE_ENTRE_SEMANA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
CES.ID_CLASE_ENTRE_SEMANA AS Código,

CES.HORA_INICIO_CLASE_ENTRE_SEMANA AS Hora_inicio,
CES.TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA AS Tiempo_de_exparcimiento,
CES.HORA_FINALIZACION_CLASE_ENTRE_SEMANA Hora_finalización

FROM CLASE_ENTRE_SEMANA CES
GO

CREATE VIEW VIEW_HORARIO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
H.ID_HORARIO AS Código,
H.NOMBRE_HORARIO AS Nombre_horario,
'Desde: '+ CAST (H.EDAD_MINIMA_HORARIO AS VARCHAR ( 50 ) ) + 
', hasta: '+ CAST (H.EDAD_MAXIMA_HORARIO AS VARCHAR ( 50 ) ) 
AS Intervalo_de_edades,

CD.TIEMPO_EXPARSIMIENTO_CLASE_DOMINGO AS Tiempo_de_exparcimiento_domingo,
'Desde: ' + CAST (CD.HORA_INICIO_CLASE_DOMINGO AS VARCHAR ( 50 ) ) + 
', hasta: ' + CAST( CD.HORA_FINALIZACION_CLASE_DOMINGO AS VARCHAR ( 50 ) ) 
AS Horario_clase_domingo,

CS.TIEMPO_EXPARSIMIENTO_CLASE_SABADO AS Tiempo_de_exparcimiento_sábado,
'Desde: ' + CAST (CS.HORA_INICIO_CLASE_SABADO  AS VARCHAR ( 50 ) ) + 
', hasta: ' + CAST( CS.HORA_FINALIZACION_CLASE_SABADO  AS VARCHAR ( 50 ) ) 
AS Horario_clase_sábado,

CES.TIEMPO_EXPARSIMIENTO_CLASE_ENTRE_SEMANA AS Tiempo_de_exparcimiento_entre_semana,
'Desde: ' + CAST (CES.HORA_INICIO_CLASE_ENTRE_SEMANA  AS VARCHAR ( 50 ) ) + 
', hasta: ' + CAST( CES.HORA_FINALIZACION_CLASE_ENTRE_SEMANA  AS VARCHAR ( 50 ) ) 
AS Horario_clase_entre_semana

FROM HORARIO H

INNER JOIN CLASES_HORARIO CH
ON CH.ID_CLASES_HORARIO = H.ID_CLASES_HORARIO

INNER JOIN CLASE_DOMINGO CD
ON CD.ID_CLASE_DOMINGO = CH.ID_CLASE_DOMINGO

INNER JOIN CLASE_SABADO CS
ON CS.ID_CLASE_SABADO = CH.ID_CLASE_SABADO

INNER JOIN CLASE_ENTRE_SEMANA CES
ON CES.ID_CLASE_ENTRE_SEMANA = CH.ID_CLASE_ENTRE_SEMANA;
GO

CREATE VIEW VIEW_CINTURON
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
C.ID_CINTURON AS Código,
C.COLOR_CINTURON AS Cinturón,
C.SIGNIFICADO_CINTURON AS Significado,
C.IMAGEN_CINTURON AS Imagen

FROM CINTURON C;
GO

CREATE VIEW VIEW_CATEGORIA_EDAD
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
CE.ID_CATEGORIA_EDAD AS Código,
CE.NOMBRE_CATEGORIA_EDAD AS Categoría,
'Desde '+ CAST(CE.EDAD_MINIMA_CATEGORIA AS VARCHAR(50)) +
' años hasta '+ CAST(CE.EDAD_MAXIMA_CATEGORIA AS VARCHAR(50)) + ' años.' AS Intervalo_de_edades

FROM CATEGORIA_EDAD CE;
GO

CREATE VIEW VIEW_DATOS_PERSONALES
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
DP.ID_DATOS_PERSONALES AS Código,

DP.PRIMER_APELLIDO AS Primer_apellido,
DP.SEGUNDO_APELLIDO AS Segundo_apellido,
DP.PRIMER_NOMBRE AS Primer_nombre,
DP.SEGUNDO_NOMBRE AS Segundo_nombre,
DP.GENERO AS Género,
DP.TIPO_DOCUMENTO AS Típo_documento,
DP.NUMERO_DOCUMENTO AS Número_documento,
DP.FECHA_NACIMIENTO AS Fecha_nacimiento

FROM DATOS_PERSONALES DP
GO

CREATE VIEW VIEW_DATOS_CONTACTO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
DC.ID_DATOS_CONTACTO AS Código,

S.NOMBRE_SEDE AS Sede,
DC.EPS,
DC.DIRECCION_RESIDENCIA AS Dirección_residencia,
DC.CELULAR AS Teléfono_celular,
DC.TELEFONO_FIJO AS Teléfono_fijo

FROM DATOS_CONTACTO DC
INNER JOIN SEDE AS S
ON S.ID_SEDE = DC.ID_SEDE
GO

CREATE VIEW VIEW_DATOS_SEGURIDAD
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
DS.ID_DATOS_SEGURIDAD AS Código,

PS.PREGUNTA AS Pregunta_seguridad,
DS.RESPUESTA_PREGUNTA_SEGURIDAD AS Respuesta_pregunta_seguridad,
DS.FECHA_ULTIMO_CIERRE_SESION AS Fecha_último_cierre_sesión,
DS.FECHA_ULTIMO_CAMBIO_CONTRASEÑA AS Fecha_último_cambio_contraseña

FROM DATOS_SEGURIDAD DS
INNER JOIN PREGUNTA_SEGURIDAD PS
ON PS.ID_PREGUNTA_SEGURIDAD = DS.ID_PREGUNTA_SEGURIDAD
GO

CREATE VIEW VIEW_DATOS_CUENTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
DC.ID_DATOS_CUENTA AS Código,

DP.PRIMER_APELLIDO AS Primer_apellido,
DP.SEGUNDO_APELLIDO AS Segundo_apellido,
DP.PRIMER_NOMBRE AS Primer_nombre,
DP.SEGUNDO_NOMBRE AS Segundo_nombre,
DP.GENERO AS Género,
DP.TIPO_DOCUMENTO AS Típo_documento,
DP.NUMERO_DOCUMENTO AS Número_documento,
DP.FECHA_NACIMIENTO AS Fecha_nacimiento,

S.NOMBRE_SEDE AS Sede,
DCC.EPS,
DCC.DIRECCION_RESIDENCIA AS Dirección_residencia,
DCC.CELULAR AS Teléfono_celular,
DCC.TELEFONO_FIJO AS Teléfono_fijo,

PS.PREGUNTA AS Pregunta_seguridad,
DS.RESPUESTA_PREGUNTA_SEGURIDAD AS Respuesta_pregunta_seguridad,
DS.FECHA_ULTIMO_CIERRE_SESION AS Fecha_último_cierre_sesión,
DS.FECHA_ULTIMO_CAMBIO_CONTRASEÑA AS Fecha_último_cambio_contraseña

FROM DATOS_CUENTA DC
INNER JOIN DATOS_SEGURIDAD DS
ON DS.ID_DATOS_SEGURIDAD = DC.ID_DATOS_SEGURIDAD
INNER JOIN PREGUNTA_SEGURIDAD PS
ON PS.ID_PREGUNTA_SEGURIDAD = DS.ID_PREGUNTA_SEGURIDAD
INNER JOIN DATOS_PERSONALES DP
ON DP.ID_DATOS_PERSONALES = DC.ID_DATOS_PERSONALES
INNER JOIN DATOS_CONTACTO DCC
ON DCC.ID_DATOS_CONTACTO = DC.ID_DATOS_CONTACTO
INNER JOIN SEDE AS S
ON S.ID_SEDE = DCC.ID_SEDE
GO

CREATE VIEW VIEW_CUENTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
C.ID_CUENTA AS Código,

TC.NOMBRE_TIPO_CUENTA AS Típo_cuenta,

DP.PRIMER_APELLIDO AS Primer_apellido,
DP.SEGUNDO_APELLIDO AS Segundo_apellido,
DP.PRIMER_NOMBRE AS Primer_nombre,
DP.SEGUNDO_NOMBRE AS Segundo_nombre,
DP.GENERO AS Género,
DP.TIPO_DOCUMENTO AS Típo_documento,
DP.NUMERO_DOCUMENTO AS Número_documento,
DP.FECHA_NACIMIENTO AS Fecha_nacimiento,

S.NOMBRE_SEDE AS Sede,
DCC.EPS,
DCC.DIRECCION_RESIDENCIA AS Dirección_residencia,
DCC.CELULAR AS Teléfono_celular,
DCC.TELEFONO_FIJO AS Teléfono_fijo,

PS.PREGUNTA AS Pregunta_seguridad,
DS.RESPUESTA_PREGUNTA_SEGURIDAD AS Respuesta_pregunta_seguridad,
DS.FECHA_ULTIMO_CIERRE_SESION AS Fecha_último_cierre_sesión,
DS.FECHA_ULTIMO_CAMBIO_CONTRASEÑA AS Fecha_último_cambio_contraseña,

C.NOMBRE_USUARIO AS Nombre_usuario,
C.NOMBRE_USUARIO_ALTERNATIVO AS Nombre_usuario_alternativo,
C.CONTRASEÑA AS Contraseña,
C.ESTADO_CUENTA AS Estado_cuenta,
C.CORREO AS Correo_electrónico,
C.FOTO_PERFIL AS Foto_perfil

FROM CUENTA C
INNER JOIN TIPO_CUENTA TC
ON TC.ID_TIPO_CUENTA = C.ID_TIPO_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_SEGURIDAD DS
ON DS.ID_DATOS_SEGURIDAD = DC.ID_DATOS_SEGURIDAD
INNER JOIN PREGUNTA_SEGURIDAD PS
ON PS.ID_PREGUNTA_SEGURIDAD = DS.ID_PREGUNTA_SEGURIDAD
INNER JOIN DATOS_PERSONALES DP
ON DP.ID_DATOS_PERSONALES = DC.ID_DATOS_PERSONALES
INNER JOIN DATOS_CONTACTO DCC
ON DCC.ID_DATOS_CONTACTO = DC.ID_DATOS_CONTACTO
INNER JOIN SEDE AS S
ON S.ID_SEDE = DCC.ID_SEDE
GO

CREATE VIEW VIEW_REGISTRO_USUARIO
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
RU.ID_REGISTRO_USUARIO AS Código,

TC.NOMBRE_TIPO_CUENTA AS Típo_cuenta,

DP.PRIMER_APELLIDO AS Primer_apellido,
DP.SEGUNDO_APELLIDO AS Segundo_apellido,
DP.PRIMER_NOMBRE AS Primer_nombre,
DP.SEGUNDO_NOMBRE AS Segundo_nombre,
DP.GENERO AS Género,
DP.TIPO_DOCUMENTO AS Típo_documento,
DP.NUMERO_DOCUMENTO AS Número_documento,
DP.FECHA_NACIMIENTO AS Fecha_nacimiento,

S.NOMBRE_SEDE AS Sede,
DCO.EPS,
DCO.DIRECCION_RESIDENCIA AS Dirección_residencia,
DCO.CELULAR AS Teléfono_celular,
DCO.TELEFONO_FIJO AS Teléfono_fijo,

PS.PREGUNTA AS Pregunta_seguridad,
DS.RESPUESTA_PREGUNTA_SEGURIDAD AS Respuesta_pregunta_seguridad,
DS.FECHA_ULTIMO_CIERRE_SESION AS Fecha_último_cierre_sesión,
DS.FECHA_ULTIMO_CAMBIO_CONTRASEÑA AS Fecha_último_cambio_contraseña,

C.NOMBRE_USUARIO AS Nombre_usuario,
C.NOMBRE_USUARIO_ALTERNATIVO AS Nombre_usuario_alternativo,
C.CONTRASEÑA AS Contraseña,
C.ESTADO_CUENTA AS Estado_cuenta,
C.CORREO AS Correo_electrónico,
C.FOTO_PERFIL AS Foto_perfil,

RU.NOMBRE_REGISTRADOR AS Nombre_registrador,
RU.CARGO_REGISTRADOR AS Cargo_registrador,
RU.FECHA_REGISTRO AS Fecha_registro,
RU.FECHA_EXPIRACION AS Fecha_expiración_cuenta

FROM REGISTRO_USUARIO RU
INNER JOIN CUENTA C
ON C.ID_CUENTA = RU.ID_CUENTA
INNER JOIN TIPO_CUENTA TC
ON TC.ID_TIPO_CUENTA = C.ID_TIPO_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_SEGURIDAD DS
ON DS.ID_DATOS_SEGURIDAD = DC.ID_DATOS_SEGURIDAD
INNER JOIN PREGUNTA_SEGURIDAD PS
ON PS.ID_PREGUNTA_SEGURIDAD = DS.ID_PREGUNTA_SEGURIDAD
INNER JOIN DATOS_PERSONALES DP
ON DP.ID_DATOS_PERSONALES = DC.ID_DATOS_PERSONALES
INNER JOIN DATOS_CONTACTO DCO
ON DCO.ID_DATOS_CONTACTO = DC.ID_DATOS_CONTACTO
INNER JOIN SEDE AS S
ON S.ID_SEDE = DCO.ID_SEDE
GO

CREATE VIEW VIEW_DATOS_PROGRAMADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
DP.ID_DATOS_PROGRAMADOR AS Código,
DP.CODIGO_PROGRAMADOR AS Clave_programador,
DP.CONTRASEÑA_PROGRAMADOR_1 AS Contraseña_programador1,
DP.CONTRASEÑA_PROGRAMADOR_2 AS Contraseña_programador2,
DP.CODIGO_DESBLOQUEO AS Clave_desbloqueo,
DP.NUMERO_ACTIVACION AS Número_activación

FROM DATOS_PROGRAMADOR DP;
GO

CREATE VIEW VIEW_DATOS_ADMINISTRADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
DA.ID_DATOS_ADMINISTRADOR AS Código,

C.NOMBRE_CARGO AS Cargo,

DA.CODIGO_ADMINISTRADOR AS Código_Administrador,
DA.CONTRASEÑA_CORREO AS Contraseña_correo

FROM DATOS_ADMINISTRADOR DA
INNER JOIN CARGO C
ON C.ID_CARGO = DA.ID_CARGO;
GO

CREATE VIEW VIEW_DATOS_ENTRENADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
DE.ID_DATOS_ENTRENADOR AS Código,

DE.ESTADO_ENTRENADOR AS Estado,
DE.GRADO_DAN_ENTRENADOR AS Grado_DAN,
DE.DESCRIPCION_ESTUDIO_ENTRENADOR AS Estudios_realizados,
DE.SUELDO_ENTRENADOR AS Salario_mensual,
DE.HOJA_DE_VIDA_ENTRENADOR AS Hoja_de_vída

FROM DATOS_ENTRENADOR DE;
GO

CREATE VIEW VIEW_ENTRENADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
E.ID_ENTRENADOR AS Código,

DP.PRIMER_APELLIDO AS Primer_apellido,
DP.SEGUNDO_APELLIDO AS Segundo_apellido,
DP.PRIMER_NOMBRE AS Primer_nombre,
DP.SEGUNDO_NOMBRE AS Segundo_nombre,
DP.GENERO AS Género,
DP.TIPO_DOCUMENTO AS Típo_documento,
DP.NUMERO_DOCUMENTO AS Número_documento,
DP.FECHA_NACIMIENTO AS Fecha_nacimiento,

S.NOMBRE_SEDE AS Sede,
DC.EPS,
DC.DIRECCION_RESIDENCIA AS Dirección_residencia,
DC.CELULAR AS Teléfono_celular,
DC.TELEFONO_FIJO AS Teléfono_fijo,

DE.ESTADO_ENTRENADOR AS Estado,
DE.GRADO_DAN_ENTRENADOR AS Grado_DAN,
DE.DESCRIPCION_ESTUDIO_ENTRENADOR AS Estudios_realizados,
DE.SUELDO_ENTRENADOR AS Salario_mensual,
DE.HOJA_DE_VIDA_ENTRENADOR AS Hoja_de_vída

FROM ENTRENADOR E
INNER JOIN DATOS_ENTRENADOR DE
ON DE.ID_DATOS_ENTRENADOR = E.ID_DATOS_ENTRENADOR
INNER JOIN DATOS_PERSONALES DP
ON DP.ID_DATOS_PERSONALES = E.ID_DATOS_PERSONALES
INNER JOIN DATOS_CONTACTO DC
ON DC.ID_DATOS_CONTACTO = E.ID_DATOS_CONTACTO
INNER JOIN SEDE S
ON S.ID_SEDE = DC.ID_SEDE
GO

CREATE VIEW VIEW_DATOS_DEPORTISTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
DD.ID_DATOS_DEPORTISTA AS Código,

C.COLOR_CINTURON AS Cinturón,
CE.NOMBRE_CATEGORIA_EDAD AS Categoría_edad,
H.NOMBRE_HORARIO AS Horario,
IH.NIVEL_INTENCIDAD_HORARIA AS Intencidad_horaria,
TM.PRECIO_MENSUALIDAD AS Valor_mensualidad,

DD.PESO_DEPORTISTA AS Peso,
DD.ESTATURA_DEPORTISTA AS Estatura,
DD.TIPO_SANGRE_DEPORTISTA AS RH,
DD.FOTOCOPIA_DOCUMENTO_ID AS Documento_identidad,
DD.FOTOCOPIA_CARNE_EPS AS Carné_EPS,
DD.CERTIFICADO_MEDICO_DEPORTISTA AS Certificado_médico,
DD.FOTO_DEPORTISTA AS Foto

FROM DATOS_DEPORTISTA DD
INNER JOIN CATEGORIA_EDAD CE
ON CE.ID_CATEGORIA_EDAD = DD.ID_CATEGORIA_EDAD
INNER JOIN CINTURON C
ON C.ID_CINTURON = DD.ID_CINTURON
INNER JOIN HORARIO H
ON H.ID_HORARIO = DD.ID_HORARIO
INNER JOIN TIPO_MENSUALIDAD TM
ON TM.ID_TIPO_MENSUALIDAD = DD.ID_TIPO_MENSUALIDAD
INNER JOIN INTENCIDAD_HORARIA IH
ON IH.ID_INTENCIDAD_HORARIA = TM.ID_INTENCIDAD_HORARIA;
GO

CREATE VIEW VIEW_DEPORTISTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
D.ID_DEPORTISTA AS Código,

DP.PRIMER_APELLIDO AS Primer_apellido,
DP.SEGUNDO_APELLIDO AS Segundo_apellido,
DP.PRIMER_NOMBRE AS Primer_nombre,
DP.SEGUNDO_NOMBRE AS Segundo_nombre,
DP.GENERO AS Género,
DP.TIPO_DOCUMENTO AS Típo_documento,
DP.NUMERO_DOCUMENTO AS Número_documento,
DP.FECHA_NACIMIENTO AS Fecha_nacimiento,

S.NOMBRE_SEDE AS Sede,
DC.EPS,
DC.DIRECCION_RESIDENCIA AS Dirección_residencia,
DC.CELULAR AS Teléfono_celular,
DC.TELEFONO_FIJO AS Teléfono_fijo,

C.COLOR_CINTURON AS Cinturón,
CE.NOMBRE_CATEGORIA_EDAD AS Categoría_edad,
H.NOMBRE_HORARIO AS Horario,
IH.NIVEL_INTENCIDAD_HORARIA AS Intencidad_horaria,
TM.PRECIO_MENSUALIDAD AS Valor_mensualidad,

DD.PESO_DEPORTISTA AS Peso,
DD.ESTATURA_DEPORTISTA AS Estatura,
DD.TIPO_SANGRE_DEPORTISTA AS RH,
DD.FOTOCOPIA_DOCUMENTO_ID AS Documento_identidad,
DD.FOTOCOPIA_CARNE_EPS AS Carné_EPS,
DD.CERTIFICADO_MEDICO_DEPORTISTA AS Certificado_médico,
DD.FOTO_DEPORTISTA AS Foto

FROM DEPORTISTA D
INNER JOIN DATOS_DEPORTISTA DD
ON DD.ID_DATOS_DEPORTISTA = D.ID_DATOS_DEPORTISTA
INNER JOIN CATEGORIA_EDAD CE
ON CE.ID_CATEGORIA_EDAD = DD.ID_CATEGORIA_EDAD
INNER JOIN CINTURON C
ON C.ID_CINTURON = DD.ID_CINTURON
INNER JOIN HORARIO H
ON H.ID_HORARIO = DD.ID_HORARIO
INNER JOIN TIPO_MENSUALIDAD TM
ON TM.ID_TIPO_MENSUALIDAD = DD.ID_TIPO_MENSUALIDAD
INNER JOIN INTENCIDAD_HORARIA IH
ON IH.ID_INTENCIDAD_HORARIA = TM.ID_INTENCIDAD_HORARIA
INNER JOIN DATOS_PERSONALES DP
ON DP.ID_DATOS_PERSONALES = D.ID_DATOS_PERSONALES
INNER JOIN DATOS_CONTACTO DC
ON DC.ID_DATOS_CONTACTO = D.ID_DATOS_CONTACTO
INNER JOIN SEDE S
ON S.ID_SEDE = DC.ID_SEDE
GO

CREATE VIEW VIEW_DATOS_ACUDIENTE
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
DA.ID_DATOS_ACUDIENTE AS Código,

DA.EMPLEO_ACUDIENTE AS Empleo_u_oficio,
DA.TELEFONO_TRABAJO_ACUDIENTE AS Telefono_lugar_trabajo

FROM DATOS_ACUDIENTE DA
GO

CREATE VIEW VIEW_CUMPLEAÑOS
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
RU.ID_REGISTRO_USUARIO AS Código,

TC.NOMBRE_TIPO_CUENTA AS Típo_cuenta,

DP.PRIMER_APELLIDO AS Primer_apellido,
DP.SEGUNDO_APELLIDO AS Segundo_apellido,
DP.PRIMER_NOMBRE AS Primer_nombre,
DP.SEGUNDO_NOMBRE AS Segundo_nombre,
DP.GENERO AS Género,

S.NOMBRE_SEDE AS Sede,
DCO.CELULAR AS Teléfono_celular,
DCO.TELEFONO_FIJO AS Teléfono_fijo,

C.NOMBRE_USUARIO AS Nombre_usuario,
C.CORREO AS Correo_electrónico,
C.FOTO_PERFIL AS Foto_perfil,

DP.FECHA_NACIMIENTO AS Fecha_nacimiento,
CAST((DATEDIFF(YEAR,
DP.FECHA_NACIMIENTO, 
GETDATE())) as varchar(200)) + ' AÑOS' AS Edad_actual,

CAST((DATEDIFF(DAY, 
GETDATE(),
CAST(CAST((YEAR(GETDATE())) AS VARCHAR(50)) + '-'+CAST(MONTH(DP.FECHA_NACIMIENTO) AS VARCHAR(50))+'-'+CAST(DAY(DP.FECHA_NACIMIENTO) AS VARCHAR(50)) AS DATETIME)
)) as varchar(200)) AS Días_que_faltan_presente_año,

CAST((DATEDIFF(DAY, 
GETDATE(),
CAST(CAST((YEAR(GETDATE())+1) AS VARCHAR(50)) + '-'+CAST(MONTH(DP.FECHA_NACIMIENTO) AS VARCHAR(50))+'-'+CAST(DAY(DP.FECHA_NACIMIENTO) AS VARCHAR(50)) AS DATETIME)
)) as varchar(200)) AS Días_que_faltan_próximo_año

FROM REGISTRO_USUARIO RU
INNER JOIN CUENTA C
ON C.ID_CUENTA = RU.ID_CUENTA
INNER JOIN TIPO_CUENTA TC
ON TC.ID_TIPO_CUENTA = C.ID_TIPO_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_PERSONALES DP
ON DP.ID_DATOS_PERSONALES = DC.ID_DATOS_PERSONALES
INNER JOIN DATOS_CONTACTO DCO
ON DCO.ID_DATOS_CONTACTO = DC.ID_DATOS_CONTACTO
INNER JOIN SEDE AS S
ON S.ID_SEDE = DCO.ID_SEDE
GO

CREATE VIEW VIEW_PROGRAM
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
P.ID_PR,

TC.NOMBRE_TIPO_CUENTA,

DP.PRIMER_NOMBRE + ' ' + DP.PRIMER_APELLIDO AS NOMBRE,
DP.PRIMER_APELLIDO,
DP.SEGUNDO_APELLIDO,
DP.PRIMER_NOMBRE,
DP.SEGUNDO_NOMBRE,
DP.GENERO,
DP.TIPO_DOCUMENTO,
DP.NUMERO_DOCUMENTO,
DP.FECHA_NACIMIENTO,

S.NOMBRE_SEDE,
DCC.EPS,
DCC.DIRECCION_RESIDENCIA,
DCC.CELULAR,
DCC.TELEFONO_FIJO,

PS.PREGUNTA,
DS.RESPUESTA_PREGUNTA_SEGURIDAD,
DS.FECHA_ULTIMO_CIERRE_SESION,
DS.FECHA_ULTIMO_CAMBIO_CONTRASEÑA,

C.CONTRASEÑA,
C.NOMBRE_USUARIO,
C.NOMBRE_USUARIO_ALTERNATIVO,
C.ESTADO_CUENTA,
C.CORREO,
C.RED,
C.GREEN,
C.BLUE,
C.RED1,
C.GREEN1,
C.BLUE1,
C.FOTO_PERFIL,

P.SONIDO,
P.FORMULARIO,
P.FMR_ANTERIOR,
P.FMR_INICIO

FROM PROGRAM P
INNER JOIN CUENTA C
ON C.ID_CUENTA = P.ID_CUENTA
INNER JOIN TIPO_CUENTA TC
ON TC.ID_TIPO_CUENTA = C.ID_TIPO_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_SEGURIDAD DS
ON DS.ID_DATOS_SEGURIDAD = DC.ID_DATOS_SEGURIDAD
INNER JOIN PREGUNTA_SEGURIDAD PS
ON PS.ID_PREGUNTA_SEGURIDAD = DS.ID_PREGUNTA_SEGURIDAD
INNER JOIN DATOS_PERSONALES DP
ON DP.ID_DATOS_PERSONALES = DC.ID_DATOS_PERSONALES
INNER JOIN DATOS_CONTACTO DCC
ON DCC.ID_DATOS_CONTACTO = DC.ID_DATOS_CONTACTO
INNER JOIN SEDE AS S
ON S.ID_SEDE = DCC.ID_SEDE

WHERE P.ID_PR = 1;
GO

CREATE VIEW VIEW_REGISTRO_DEPORTISTA
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
DD.ID_DATOS_DEPORTISTA AS Código,

TC.NOMBRE_TIPO_CUENTA AS Típo_cuenta,

DP.PRIMER_APELLIDO AS Primer_apellido,
DP.SEGUNDO_APELLIDO AS Segundo_apellido,
DP.PRIMER_NOMBRE AS Primer_nombre,
DP.SEGUNDO_NOMBRE AS Segundo_nombre,
DP.GENERO AS Género,
DP.TIPO_DOCUMENTO AS Típo_documento,
DP.NUMERO_DOCUMENTO AS Número_documento,
DP.FECHA_NACIMIENTO AS Fecha_nacimiento,

CI.COLOR_CINTURON AS Cinturón,
CE.NOMBRE_CATEGORIA_EDAD AS Categoría_edad,
H.NOMBRE_HORARIO AS Horario,
IH.NIVEL_INTENCIDAD_HORARIA AS Intencidad_horaria,
TM.PRECIO_MENSUALIDAD AS Valor_mensualidad,

DD.PESO_DEPORTISTA AS Peso,
DD.ESTATURA_DEPORTISTA AS Estatura,
DD.TIPO_SANGRE_DEPORTISTA AS RH,
DD.FOTOCOPIA_DOCUMENTO_ID AS Documento_identidad,
DD.FOTOCOPIA_CARNE_EPS AS Carné_EPS,
DD.CERTIFICADO_MEDICO_DEPORTISTA AS Certificado_médico,
DD.FOTO_DEPORTISTA AS Foto,

S.NOMBRE_SEDE AS Sede,
DCO.EPS,
DCO.DIRECCION_RESIDENCIA AS Dirección_residencia,
DCO.CELULAR AS Teléfono_celular,
DCO.TELEFONO_FIJO AS Teléfono_fijo,

PS.PREGUNTA AS Pregunta_seguridad,
DS.RESPUESTA_PREGUNTA_SEGURIDAD AS Respuesta_pregunta_seguridad,
DS.FECHA_ULTIMO_CIERRE_SESION AS Fecha_último_cierre_sesión,
DS.FECHA_ULTIMO_CAMBIO_CONTRASEÑA AS Fecha_último_cambio_contraseña,

C.NOMBRE_USUARIO AS Nombre_usuario,
C.NOMBRE_USUARIO_ALTERNATIVO AS Nombre_usuario_alternativo,
C.CONTRASEÑA AS Contraseña,
C.ESTADO_CUENTA AS Estado_cuenta,
C.CORREO AS Correo_electrónico,
C.FOTO_PERFIL AS Foto_perfil,

RU.NOMBRE_REGISTRADOR AS Nombre_registrador,
RU.CARGO_REGISTRADOR AS Cargo_registrador,
RU.FECHA_REGISTRO AS Fecha_registro,
RU.FECHA_EXPIRACION AS Fecha_expiración_cuenta

FROM REGISTRO_USUARIO RU
INNER JOIN CUENTA C
ON C.ID_CUENTA = RU.ID_CUENTA
INNER JOIN TIPO_CUENTA TC
ON TC.ID_TIPO_CUENTA = C.ID_TIPO_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_DEPORTISTA DD
ON DD.ID_DATOS_DEPORTISTA = DC.ID_DATOS_DEPORTISTA
INNER JOIN CATEGORIA_EDAD CE
ON CE.ID_CATEGORIA_EDAD = DD.ID_CATEGORIA_EDAD
INNER JOIN CINTURON CI
ON CI.ID_CINTURON = DD.ID_CINTURON
INNER JOIN HORARIO H
ON H.ID_HORARIO = DD.ID_HORARIO
INNER JOIN TIPO_MENSUALIDAD TM
ON TM.ID_TIPO_MENSUALIDAD = DD.ID_TIPO_MENSUALIDAD
INNER JOIN INTENCIDAD_HORARIA IH
ON IH.ID_INTENCIDAD_HORARIA = TM.ID_INTENCIDAD_HORARIA
INNER JOIN DATOS_SEGURIDAD DS
ON DS.ID_DATOS_SEGURIDAD = DC.ID_DATOS_SEGURIDAD
INNER JOIN PREGUNTA_SEGURIDAD PS
ON PS.ID_PREGUNTA_SEGURIDAD = DS.ID_PREGUNTA_SEGURIDAD
INNER JOIN DATOS_PERSONALES DP
ON DP.ID_DATOS_PERSONALES = DC.ID_DATOS_PERSONALES
INNER JOIN DATOS_CONTACTO DCO
ON DCO.ID_DATOS_CONTACTO = DC.ID_DATOS_CONTACTO
INNER JOIN SEDE AS S
ON S.ID_SEDE = DCO.ID_SEDE
GO

CREATE VIEW VIEW_REGISTRO_PROGRAMADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
RU.ID_REGISTRO_USUARIO AS Código,

TC.NOMBRE_TIPO_CUENTA AS Típo_cuenta,

DP.PRIMER_APELLIDO AS Primer_apellido,
DP.SEGUNDO_APELLIDO AS Segundo_apellido,
DP.PRIMER_NOMBRE AS Primer_nombre,
DP.SEGUNDO_NOMBRE AS Segundo_nombre,
DP.GENERO AS Género,
DP.TIPO_DOCUMENTO AS Típo_documento,
DP.NUMERO_DOCUMENTO AS Número_documento,
DP.FECHA_NACIMIENTO AS Fecha_nacimiento,

DPR.CODIGO_PROGRAMADOR AS Clave_programador,
DPR.CONTRASEÑA_PROGRAMADOR_1 AS Contraseña_programador1,
DPR.CONTRASEÑA_PROGRAMADOR_2 AS Contraseña_programador2,
DPR.CODIGO_DESBLOQUEO AS Clave_desbloqueo,
DPR.NUMERO_ACTIVACION AS Número_activación,

S.NOMBRE_SEDE AS Sede,
DCO.EPS,
DCO.DIRECCION_RESIDENCIA AS Dirección_residencia,
DCO.CELULAR AS Teléfono_celular,
DCO.TELEFONO_FIJO AS Teléfono_fijo,

PS.PREGUNTA AS Pregunta_seguridad,
DS.RESPUESTA_PREGUNTA_SEGURIDAD AS Respuesta_pregunta_seguridad,
DS.FECHA_ULTIMO_CIERRE_SESION AS Fecha_último_cierre_sesión,
DS.FECHA_ULTIMO_CAMBIO_CONTRASEÑA AS Fecha_último_cambio_contraseña,

C.NOMBRE_USUARIO AS Nombre_usuario,
C.NOMBRE_USUARIO_ALTERNATIVO AS Nombre_usuario_alternativo,
C.CONTRASEÑA AS Contraseña,
C.ESTADO_CUENTA AS Estado_cuenta,
C.CORREO AS Correo_electrónico,
C.FOTO_PERFIL AS Foto_perfil,

RU.NOMBRE_REGISTRADOR AS Nombre_registrador,
RU.CARGO_REGISTRADOR AS Cargo_registrador,
RU.FECHA_REGISTRO AS Fecha_registro,
RU.FECHA_EXPIRACION AS Fecha_expiración_cuenta

FROM REGISTRO_USUARIO RU
INNER JOIN CUENTA C
ON C.ID_CUENTA = RU.ID_CUENTA
INNER JOIN TIPO_CUENTA TC
ON TC.ID_TIPO_CUENTA = C.ID_TIPO_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_PROGRAMADOR DPR
ON DPR.ID_DATOS_PROGRAMADOR = DC.ID_DATOS_PROGRAMADOR
INNER JOIN DATOS_SEGURIDAD DS
ON DS.ID_DATOS_SEGURIDAD = DC.ID_DATOS_SEGURIDAD
INNER JOIN PREGUNTA_SEGURIDAD PS
ON PS.ID_PREGUNTA_SEGURIDAD = DS.ID_PREGUNTA_SEGURIDAD
INNER JOIN DATOS_PERSONALES DP
ON DP.ID_DATOS_PERSONALES = DC.ID_DATOS_PERSONALES
INNER JOIN DATOS_CONTACTO DCO
ON DCO.ID_DATOS_CONTACTO = DC.ID_DATOS_CONTACTO
INNER JOIN SEDE AS S
ON S.ID_SEDE = DCO.ID_SEDE
GO

CREATE VIEW VIEW_REGISTRO_ADMINISTRADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
RU.ID_REGISTRO_USUARIO AS Código,

TC.NOMBRE_TIPO_CUENTA AS Típo_cuenta,

DP.PRIMER_APELLIDO AS Primer_apellido,
DP.SEGUNDO_APELLIDO AS Segundo_apellido,
DP.PRIMER_NOMBRE AS Primer_nombre,
DP.SEGUNDO_NOMBRE AS Segundo_nombre,
DP.GENERO AS Género,
DP.TIPO_DOCUMENTO AS Típo_documento,
DP.NUMERO_DOCUMENTO AS Número_documento,
DP.FECHA_NACIMIENTO AS Fecha_nacimiento,

CAR.NOMBRE_CARGO AS Cargo,

DA.CODIGO_ADMINISTRADOR AS Código_Administrador,
DA.CONTRASEÑA_CORREO AS Contraseña_correo,

S.NOMBRE_SEDE AS Sede,
DCO.EPS,
DCO.DIRECCION_RESIDENCIA AS Dirección_residencia,
DCO.CELULAR AS Teléfono_celular,
DCO.TELEFONO_FIJO AS Teléfono_fijo,

PS.PREGUNTA AS Pregunta_seguridad,
DS.RESPUESTA_PREGUNTA_SEGURIDAD AS Respuesta_pregunta_seguridad,
DS.FECHA_ULTIMO_CIERRE_SESION AS Fecha_último_cierre_sesión,
DS.FECHA_ULTIMO_CAMBIO_CONTRASEÑA AS Fecha_último_cambio_contraseña,

C.NOMBRE_USUARIO AS Nombre_usuario,
C.NOMBRE_USUARIO_ALTERNATIVO AS Nombre_usuario_alternativo,
C.CONTRASEÑA AS Contraseña,
C.ESTADO_CUENTA AS Estado_cuenta,
C.CORREO AS Correo_electrónico,
C.FOTO_PERFIL AS Foto_perfil,

RU.NOMBRE_REGISTRADOR AS Nombre_registrador,
RU.CARGO_REGISTRADOR AS Cargo_registrador,
RU.FECHA_REGISTRO AS Fecha_registro,
RU.FECHA_EXPIRACION AS Fecha_expiración_cuenta

FROM REGISTRO_USUARIO RU
INNER JOIN CUENTA C
ON C.ID_CUENTA = RU.ID_CUENTA
INNER JOIN TIPO_CUENTA TC
ON TC.ID_TIPO_CUENTA = C.ID_TIPO_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_ADMINISTRADOR DA
ON DA.ID_DATOS_ADMINISTRADOR = DC.ID_DATOS_ADMINISTRADOR
INNER JOIN CARGO CAR
ON CAR.ID_CARGO = DA.ID_CARGO
INNER JOIN DATOS_SEGURIDAD DS
ON DS.ID_DATOS_SEGURIDAD = DC.ID_DATOS_SEGURIDAD
INNER JOIN PREGUNTA_SEGURIDAD PS
ON PS.ID_PREGUNTA_SEGURIDAD = DS.ID_PREGUNTA_SEGURIDAD
INNER JOIN DATOS_PERSONALES DP
ON DP.ID_DATOS_PERSONALES = DC.ID_DATOS_PERSONALES
INNER JOIN DATOS_CONTACTO DCO
ON DCO.ID_DATOS_CONTACTO = DC.ID_DATOS_CONTACTO
INNER JOIN SEDE AS S
ON S.ID_SEDE = DCO.ID_SEDE
GO

CREATE VIEW VIEW_REGISTRO_ENTRENADOR
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
RU.ID_REGISTRO_USUARIO AS Código,

TC.NOMBRE_TIPO_CUENTA AS Típo_cuenta,

DP.PRIMER_APELLIDO AS Primer_apellido,
DP.SEGUNDO_APELLIDO AS Segundo_apellido,
DP.PRIMER_NOMBRE AS Primer_nombre,
DP.SEGUNDO_NOMBRE AS Segundo_nombre,
DP.GENERO AS Género,
DP.TIPO_DOCUMENTO AS Típo_documento,
DP.NUMERO_DOCUMENTO AS Número_documento,
DP.FECHA_NACIMIENTO AS Fecha_nacimiento,

DE.ESTADO_ENTRENADOR AS Estado,
DE.GRADO_DAN_ENTRENADOR AS Grado_DAN,
DE.DESCRIPCION_ESTUDIO_ENTRENADOR AS Estudios_realizados,
DE.SUELDO_ENTRENADOR AS Salario_mensual,
DE.HOJA_DE_VIDA_ENTRENADOR AS Hoja_de_vída,

S.NOMBRE_SEDE AS Sede,
DCO.EPS,
DCO.DIRECCION_RESIDENCIA AS Dirección_residencia,
DCO.CELULAR AS Teléfono_celular,
DCO.TELEFONO_FIJO AS Teléfono_fijo,

PS.PREGUNTA AS Pregunta_seguridad,
DS.RESPUESTA_PREGUNTA_SEGURIDAD AS Respuesta_pregunta_seguridad,
DS.FECHA_ULTIMO_CIERRE_SESION AS Fecha_último_cierre_sesión,
DS.FECHA_ULTIMO_CAMBIO_CONTRASEÑA AS Fecha_último_cambio_contraseña,

C.NOMBRE_USUARIO AS Nombre_usuario,
C.NOMBRE_USUARIO_ALTERNATIVO AS Nombre_usuario_alternativo,
C.CONTRASEÑA AS Contraseña,
C.ESTADO_CUENTA AS Estado_cuenta,
C.CORREO AS Correo_electrónico,
C.FOTO_PERFIL AS Foto_perfil,

RU.NOMBRE_REGISTRADOR AS Nombre_registrador,
RU.CARGO_REGISTRADOR AS Cargo_registrador,
RU.FECHA_REGISTRO AS Fecha_registro,
RU.FECHA_EXPIRACION AS Fecha_expiración_cuenta

FROM REGISTRO_USUARIO RU
INNER JOIN CUENTA C
ON C.ID_CUENTA = RU.ID_CUENTA
INNER JOIN TIPO_CUENTA TC
ON TC.ID_TIPO_CUENTA = C.ID_TIPO_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_ENTRENADOR DE
ON DE.ID_DATOS_ENTRENADOR = DC.ID_DATOS_ENTRENADOR
INNER JOIN DATOS_SEGURIDAD DS
ON DS.ID_DATOS_SEGURIDAD = DC.ID_DATOS_SEGURIDAD
INNER JOIN PREGUNTA_SEGURIDAD PS
ON PS.ID_PREGUNTA_SEGURIDAD = DS.ID_PREGUNTA_SEGURIDAD
INNER JOIN DATOS_PERSONALES DP
ON DP.ID_DATOS_PERSONALES = DC.ID_DATOS_PERSONALES
INNER JOIN DATOS_CONTACTO DCO
ON DCO.ID_DATOS_CONTACTO = DC.ID_DATOS_CONTACTO
INNER JOIN SEDE AS S
ON S.ID_SEDE = DCO.ID_SEDE
GO

CREATE VIEW VIEW_REGISTRO_ACUDIENTE
AS
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO SELECT DE LA VISTA----
SELECT  
RU.ID_REGISTRO_USUARIO AS Código,

TC.NOMBRE_TIPO_CUENTA AS Típo_cuenta,

DP.PRIMER_APELLIDO AS Primer_apellido,
DP.SEGUNDO_APELLIDO AS Segundo_apellido,
DP.PRIMER_NOMBRE AS Primer_nombre,
DP.SEGUNDO_NOMBRE AS Segundo_nombre,
DP.GENERO AS Género,
DP.TIPO_DOCUMENTO AS Típo_documento,
DP.NUMERO_DOCUMENTO AS Número_documento,
DP.FECHA_NACIMIENTO AS Fecha_nacimiento,

DA.EMPLEO_ACUDIENTE AS Empleo_u_oficio,
DA.TELEFONO_TRABAJO_ACUDIENTE AS Telefono_lugar_trabajo,

S.NOMBRE_SEDE AS Sede,
DCO.EPS,
DCO.DIRECCION_RESIDENCIA AS Dirección_residencia,
DCO.CELULAR AS Teléfono_celular,
DCO.TELEFONO_FIJO AS Teléfono_fijo,

PS.PREGUNTA AS Pregunta_seguridad,
DS.RESPUESTA_PREGUNTA_SEGURIDAD AS Respuesta_pregunta_seguridad,
DS.FECHA_ULTIMO_CIERRE_SESION AS Fecha_último_cierre_sesión,
DS.FECHA_ULTIMO_CAMBIO_CONTRASEÑA AS Fecha_último_cambio_contraseña,

C.NOMBRE_USUARIO AS Nombre_usuario,
C.NOMBRE_USUARIO_ALTERNATIVO AS Nombre_usuario_alternativo,
C.CONTRASEÑA AS Contraseña,
C.ESTADO_CUENTA AS Estado_cuenta,
C.CORREO AS Correo_electrónico,
C.FOTO_PERFIL AS Foto_perfil,

RU.NOMBRE_REGISTRADOR AS Nombre_registrador,
RU.CARGO_REGISTRADOR AS Cargo_registrador,
RU.FECHA_REGISTRO AS Fecha_registro,
RU.FECHA_EXPIRACION AS Fecha_expiración_cuenta

FROM REGISTRO_USUARIO RU
INNER JOIN CUENTA C
ON C.ID_CUENTA = RU.ID_CUENTA
INNER JOIN TIPO_CUENTA TC
ON TC.ID_TIPO_CUENTA = C.ID_TIPO_CUENTA
INNER JOIN DATOS_CUENTA DC
ON DC.ID_DATOS_CUENTA = C.ID_DATOS_CUENTA
INNER JOIN DATOS_ACUDIENTE DA
ON DA.ID_DATOS_ACUDIENTE = DC.ID_DATOS_ACUDIENTE
INNER JOIN DATOS_SEGURIDAD DS
ON DS.ID_DATOS_SEGURIDAD = DC.ID_DATOS_SEGURIDAD
INNER JOIN PREGUNTA_SEGURIDAD PS
ON PS.ID_PREGUNTA_SEGURIDAD = DS.ID_PREGUNTA_SEGURIDAD
INNER JOIN DATOS_PERSONALES DP
ON DP.ID_DATOS_PERSONALES = DC.ID_DATOS_PERSONALES
INNER JOIN DATOS_CONTACTO DCO
ON DCO.ID_DATOS_CONTACTO = DC.ID_DATOS_CONTACTO
INNER JOIN SEDE AS S
ON S.ID_SEDE = DCO.ID_SEDE
GO
----║►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----
----║►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►►◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄◄║----
----║▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲║----
----╚══════════════════════════════════════════════════════════════════╝----

CREATE PROC INSERTAR
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
AS
BEGIN TRY
BEGIN TRAN Devolver
----»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»»» REALIZANDO PROCESO 1----
BEGIN
INSERT INTO PROGRAM
VALUES
(1,
0,
'A',
0,
1);
EXEC INSERT_TIPO_CUENTA
'CONTROL TOTAL',
'PROGRAMADOR',
10;
EXEC INSERT_TIPO_CUENTA
'CONTROL MAXIMO',
'ADMINISTRADOR',
50;
EXEC INSERT_TIPO_CUENTA
'CONTROL MEDIO',
'ENTRENADOR',
100;
EXEC INSERT_TIPO_CUENTA
'PERMISOS BÁSICOS',
'DEPORTISTA',
10000;
EXEC INSERT_TIPO_CUENTA
'PERMISOS BÁSICOS',
'ACUDIENTE',
10000;
EXEC INSERT_SEDE
'SEDE SUBA',
'COLOMBIA',
'BOGOTÁ',
'BOGOTÁ',
'FREANTE AL HOSPITAL DE SUBA',
'10/10/2014',
NULL;
EXEC INSERT_TEMA_PREGUNTA
'FAMILIA',
1,
50;
EXEC INSERT_PREGUNTA_SEGURIDAD
1,
'¿CUÁL ES EL NOMBRE DE SU MADRE?';
EXECUTE INSERT_R_PROGRAMADOR
1,
'CAPRECOM',
'CLL138 BIS #127C',
3057064687,
6870946,
1,
'MARINA',
'TORRES',
'FORERO',
'JHONATAN',
NULL,
'HOMBRE',
'TARJETA DE IDENTIDAD',
99060901208,
'1999-5-11',
'$99060901208jtf?',
'KOJOloko',
'jhonatan247',
'DESBLOQUEAR',
99060,
1,
'SUMAMA',
'jhonatan247',
'jhonatan24',
'ACTIVADO',
'YON.T.F@HOTMAIL.COM',
0,
0,
0,
255,
255,
255,
NULL,
'20/10/2020';
EXECUTE OBTENER_DATOS 
1;
EXECUTE UPDATE_PROGRAM1
0;
END
----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~----
COMMIT TRAN Devolver
END TRY
BEGIN CATCH
       SELECT ERROR_NUMBER() AS Código_error
       , ERROR_SEVERITY() AS Gravedad 
       , ERROR_STATE() AS Estádo
       , ERROR_PROCEDURE() AS Procedimiento
       , ERROR_LINE() AS Linea
       , ERROR_MESSAGE() AS Mensaje

       ROLLBACK TRAN Devolver
END CATCH
GO
EXECUTE INSERTAR;
GO
SELECT*FROM VIEW_CUMPLEAÑOS;
SELECT * FROM VIEW_CUENTA;
SELECT * FROM VIEW_PROGRAM;
SELECT*FROM OBJETO;